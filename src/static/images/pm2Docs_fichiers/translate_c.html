<!DOCTYPE html>
<html class="translated-ltr" lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="translate_c_data/linkid.js"></script><script async="" src="translate_c_data/analytics.js"></script><script>(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script src="translate_c_data/translate_c.js"></script><script>_intlStrings._originalText = "Texte Anglais original:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="en|fr";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="Traduction en date du %1$s réalisée par %2$s";_intlStrings._unknown="inconnu";_intlStrings._suggestTranslation="Proposer une meilleure traduction"  ;_intlStrings._submit="Envoyer";_intlStrings._suggestThanks="Merci de votre contribution à Google Traduction.";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/" hreflang="en" rel="alternate machine-translated-from"><!-- base href="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/" -->
    


<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="copyright" content="Keymetrics Inc.">
<meta name="description" content="Advanced process manager for production Node.js applications. Load balancer, logs facility, startup script, micro service management, at a glance.">

<meta property="og:url" content="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/">
<meta property="og:type" content="website">
<meta property="og:title" content="PM2 - Single Page Doc">
<meta property="og:description" content="Advanced process manager for production Node.js applications. Load balancer, logs facility, startup script, micro service management, at a glance.">
<meta property="og:image" content="https://raw.githubusercontent.com/unitech/pm2/master/pres/pm2.20d3ef.png">
<meta name="google-site-verification" content="ELR1mLPjKnUWvC62UIAp4fpVUvO4ToECWOK_jb922bI">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@keymetrics_io">
<meta name="twitter:title" content="PM2 - Single Page Doc">
<meta name="twitter:description" content="Advanced process manager for production Node.js applications. Load balancer, logs facility, startup script, micro service management, at a glance.">
<meta name="twitter:image:src" content="https://raw.githubusercontent.com/unitech/pm2/master/pres/pm2.20d3ef.png">
<meta name="twitter:url" content="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/">
<link rel="canonical" href="https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/">
<link rel="stylesheet" href="translate_c_data/css.css">
<link rel="stylesheet" href="translate_c_data/main.css">
<link rel="icon" type="image/png" href="https://pm2.keymetrics.io/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://pm2.keymetrics.io/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://pm2.keymetrics.io/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/x-icon" href="https://pm2.keymetrics.io/favicon.ico">

<title>PM2 - Doc d'une seule page</title>

    <link rel="stylesheet" href="translate_c_data/font-awesome.css">
    <link rel="stylesheet" href="translate_c_data/docsearch.css">
  <script type="text/javascript" async="" src="translate_c_data/embed.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="translate_c_data/translateelement.css"><script type="text/javascript" charset="UTF-8" src="translate_c_data/main_fr.js"></script><link rel="prefetch" as="style" href="translate_c_data/a_data_002/lounge.css"><link rel="prefetch" as="script" href="translate_c_data/a_data_002/common.js"><link rel="prefetch" as="script" href="translate_c_data/a_data_002/lounge_002.js"><link rel="prefetch" as="script" href="translate_c_data/a_data_002/config.js"><script type="text/javascript" charset="UTF-8" src="translate_c_data/element_main.js"></script><link rel="stylesheet" type="text/css" href="translate_c_data/iw_sprite.css"></head>
  <body><iframe src="translate_c_data/translate_un.html" style="width:0px;height:0px;border:0px;display:none;" width="0" height="0" frameborder="0"></iframe>
    <header id="menu">
  <div class="header-wrapper">
    <nav class="main-nav">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/&amp;usg=ALkJrhgSSTYquOkZbLSJzJqi-5Qldab2sg" title="Aller à la page d'accueil" class="logo-link">
        <img alt="Logo PM2" src="translate_c_data/pm2-logo-1.png" width="206">
      </a>
      <div class="menu">
        <a title="Ouvrir le menu" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w#menu" class="button accent-border border-corners inner-shadows menu-button" style="top: 32px;">
          <div class="menu-icon"></div>
        </a>
        <a class="menu-overlay" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w#" title="Fermer le menu"></a>
        <div class="menu-content">
          <div class="doc-links">
            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2&amp;usg=ALkJrhiiR5W06kiN0ydvwv2KL8kYmcHN8Q" title="Code source Github"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Github
            </font></font></a>
            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/quick-start/&amp;usg=ALkJrhizG1wBySkC_o81puNYwIXUNlYixA" title="Aller au démarrage rapide" class=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Démarrage rapide
            </font></font></a>
            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w" title="Aller à la documentation" class="current"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Documentation
            </font></font></a>
            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/&amp;usg=ALkJrhjYgDvOZy4U3evk6_Atj2sm_c2cyg" title="Aller aux intégrations" class=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Intégrations
            </font></font></a>
          </div>
          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://id.keymetrics.io/api/oauth/register&amp;usg=ALkJrhgTnPjY2avaxkvTOvWVObVrjm4v1w" title="Commencer" class="button accent-border border-corners inner-shadows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
            Moniteur PM2
          </font></font></a>
        </div>
      </div>
    </nav>
  </div>
</header>

    <main>
      <section class="section-doc">
        <div class="section-background">
          <div class="section-wrapper">
            <div class="hexagon hexagon-1"></div>
            <div class="hexagon hexagon-2"></div>
            <div class="hexagon hexagon-3"></div>
            <div class="hexagon hexagon-4"></div>
          </div>
        </div>
        <div class="section-wrapper">
          <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doc d'une page</font></font></h1>
          <div class="doc-nav-and-content">
            <nav>
              <div class="search-field">
                <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" placeholder="Chercher" class="ds-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-label="recherche d'entrée" aria-owns="algolia-autocomplete-listbox-0" style="position: relative; vertical-align: top;" dir="auto"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: &quot;Exo&quot;, sans-serif; font-size: 20.4px; font-style: normal; font-variant: normal; font-weight: 300; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: optimizelegibility; text-transform: none;"></pre><span class="ds-dropdown-menu" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;" role="listbox" id="algolia-autocomplete-listbox-0"><div class="ds-dataset-1"></div></span></span>
                <i class="fa fa-search"></i>
              </div>
              <div class="nav-mobile-title"><div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                      
                        Doc d'une page
                      
                    </font></font></div><i class="fa fa-chevron-up"></i></div><ul>
                
                <li class="nav-section ">

                  <a class="nav-section-title" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/quick-start/&amp;usg=ALkJrhizG1wBySkC_o81puNYwIXUNlYixA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrage rapide</font></font></a>

                  <ul class="nav-section-content">
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/quick-start/&amp;usg=ALkJrhizG1wBySkC_o81puNYwIXUNlYixA" title="Démarrage rapide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Démarrage rapide
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/process-management/&amp;usg=ALkJrhjIkEZjVwZ2Z87-9RL1Ug-92lHHJw" title="La gestion des processus"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        La gestion des processus
                      </font></font></a>
                    </li>
                    
                  </ul>
                </li>
                
                <li class="nav-section active">

                  <a class="nav-section-title" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation</font></font></a>

                  <ul class="nav-section-content">
                    
                    <li class="nav-section-entry active">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w" title="Doc d'une page"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Doc d'une page
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/cluster-mode&amp;usg=ALkJrhjpQeYxG20Irfzj2nsnWKRhXC9jrA" title="Mode de cluster"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Mode de cluster
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg" title="Fichier d'écosystème"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Fichier d'écosystème
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhgfxfZrwIo4G_pJ_H_qyaQXPmaUUA" title="Démarrage / arrêt progressif"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Démarrage / arrêt progressif
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/environment/&amp;usg=ALkJrhj_tywAgsNjWyCNoW4kVJwYtAWzew" title="Variables d'environnement"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Variables d'environnement
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/log-management/&amp;usg=ALkJrhirkW9n84pp0d2p7YRjqZlHIxXrBw" title="Journaux"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Journaux
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/restart-strategies/&amp;usg=ALkJrhgVtrEDh00DeRiZhO8porpndT9Fhg" title="Stratégies de redémarrage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Stratégies de redémarrage
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/memory-limit/&amp;usg=ALkJrhjvUS-jFchTolOObSG4DddU5x9CVA" title="Recharge de la limite de mémoire"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Recharge de la limite de mémoire
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/update-pm2/&amp;usg=ALkJrhjOPxoHENZaFBK4acjKxOW6RboIRA" title="Mettre à jour PM2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Mettre à jour PM2
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/deployment/&amp;usg=ALkJrhj8N5NALtQJDDYOiziBiz1a53A7TA" title="Déploiement"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Déploiement
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/startup/&amp;usg=ALkJrhiB2yYJJwSQFuB7Z3zemuxbPgxvlg" title="Script de démarrage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Script de démarrage
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/process-metrics/&amp;usg=ALkJrhitwcPBqZ0OuH8YotFOjgCVOYjaxw" title="Mesures personnalisées"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Mesures personnalisées
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/process-actions/&amp;usg=ALkJrhiaAV1PC9SXvup1S5FWDmRyi2Gx5Q" title="Actions de processus"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Actions de processus
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/watch-and-restart/&amp;usg=ALkJrhjsfllznw_NmoPwm0hxW5u9TyGqPg" title="Regarder et redémarrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Regarder et redémarrer
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/monitoring/&amp;usg=ALkJrhiyBu1svRSBPsOxQomYNYxCNsV1dA" title="surveillance"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        surveillance
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/source-map-support/&amp;usg=ALkJrhhz_C1Ua-jSVmeVs43VzNuebnDFfA" title="Prise en charge de la carte source"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Prise en charge de la carte source
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/specifics/&amp;usg=ALkJrhjOAXVywUDMuyBmx7moPMHmGY0NcA" title="Détails"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Détails
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-api/&amp;usg=ALkJrhizyeSNvVwvuGvXupiBUr8kuqZ5kA" title="API PM2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        API PM2
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/advanced/pm2-module-system/&amp;usg=ALkJrhhs5j5S0wfvuwUxkGAhg6OLjm2l3g" title="Système de module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Système de module
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/expose/&amp;usg=ALkJrhj8jgA-99XgHZm-S50BvnbzNXt4dQ" title="Exposez le fichier statique sur http"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Exposez le fichier statique sur http
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/PM2/releases&amp;usg=ALkJrhguDbHIGyo8eGRqlecOscAOthWekw" title="Télécharger comme ZIP" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Télécharger comme ZIP
                      </font></font></a>
                    </li>
                    
                  </ul>
                </li>
                
                <li class="nav-section ">

                  <a class="nav-section-title" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/&amp;usg=ALkJrhjYgDvOZy4U3evk6_Atj2sm_c2cyg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intégrations</font></font></a>

                  <ul class="nav-section-content">
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/&amp;usg=ALkJrhjYgDvOZy4U3evk6_Atj2sm_c2cyg" title="Utiliser PM2 dans les fournisseurs de cloud"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Utiliser PM2 dans les fournisseurs de cloud
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/docker-pm2-nodejs/&amp;usg=ALkJrhh1S4NaZlreSVetRtXHdnF0kWlt1A" title="Intégration Docker"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Intégration Docker
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/integrations/heroku/&amp;usg=ALkJrhgANADhVOMujs1YNVfO9_1FY4340g" title="Intégration Heroku"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Intégration Heroku
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup&amp;usg=ALkJrhigSLtnjw201roBlshG8xCO5nk8jg" title="Configuration de la production avec Nginx"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Configuration de la production avec Nginx
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/tutorials/using-transpilers-with-pm2&amp;usg=ALkJrhjxk2DKXdpV1Mc3Jrn4JB6Li41zCA" title="Utilisation de transpileurs avec PM2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Utilisation de transpileurs avec PM2
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/tutorials/use-pm2-with-aws-elastic-beanstalk/&amp;usg=ALkJrhiW8Jd82j0TuoDrmP7Lz2dhYFopKQ" title="PM2 dans ElasticBeanstalk"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        PM2 dans ElasticBeanstalk
                      </font></font></a>
                    </li>
                    
                    <li class="nav-section-entry ">
                      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/tutorials/capistrano-like-deployments&amp;usg=ALkJrhjq2ezbVjb-_JJeiiQFqrdy2bwUVQ" title="Capistrano comme les déploiements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                        Capistrano comme les déploiements
                      </font></font></a>
                    </li>
                    
                  </ul>
                </li>
                
              </ul>
            </nav>
            <article class="doc-content">

            <h2 id="welcome"><a href="#welcome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bienvenue!</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bienvenue dans le Quick Start PM2!</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 est un gestionnaire de processus démon qui vous aidera à gérer et à maintenir votre application en ligne. </font><font style="vertical-align: inherit;">La prise en main de PM2 est simple, elle est proposée sous la forme d'une CLI simple et intuitive, installable via NPM.</font></font></p>

<h2 id="installation"><a href="#installation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La dernière version PM2 est installable avec NPM ou Yarn:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>pm2@latest <span class="nt">-g</span>
<span class="c"># or</span>
<span class="nv">$ </span>yarn global add pm2
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour installer Node.js et NPM, vous pouvez utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://yoember.com/nodejs/the-best-way-to-install-node-js/&amp;usg=ALkJrhgA2Gps1DtVEO1fVfRia3Xa8Md-ew"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NVM</font></font></a></p>

<h2 id="start-an-app"><a href="#start-an-app"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancer une application</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le moyen le plus simple de démarrer, démoniser et surveiller votre application consiste à utiliser cette ligne de commande:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start app.js
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou lancez toute autre application facilement:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start bashscript.sh
<span class="nv">$ </span>pm2 start python-app.py <span class="nt">--watch</span>
<span class="nv">$ </span>pm2 start binary-file <span class="nt">--</span> <span class="nt">--port</span> 1520
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certaines options que vous pouvez transmettre à la CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Specify an app name</span>
<span class="nt">--name</span> &lt;app_name&gt;<font></font>
<font></font>
<span class="c"># Watch and Restart app when files change</span>
<span class="nt">--watch</span><font></font>
<font></font>
<span class="c"># Set memory threshold for app reload</span>
<span class="nt">--max-memory-restart</span> &lt;200MB&gt;<font></font>
<font></font>
<span class="c"># Specify log file</span>
<span class="nt">--log</span> &lt;log_path&gt;<font></font>
<font></font>
<span class="c"># Pass extra arguments to the script</span>
<span class="nt">--</span> arg1 arg2 arg3<font></font>
<font></font>
<span class="c"># Delay between automatic restarts</span>
<span class="nt">--restart-delay</span> &lt;delay <span class="k">in </span>ms&gt;<font></font>
<font></font>
<span class="c"># Prefix logs with time</span>
<span class="nt">--time</span><font></font>
<font></font>
<span class="c"># Do not auto restart app</span>
<span class="nt">--no-autorestart</span><font></font>
<font></font>
<span class="c"># Specify cron for forced restart</span>
<span class="nt">--cron</span> &lt;cron_pattern&gt;<font></font>
<font></font>
<span class="c"># Attach to application log</span>
<span class="nt">--no-daemon</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Comme vous pouvez le voir, de nombreuses options sont disponibles pour gérer votre application avec PM2. </font><font style="vertical-align: inherit;" class="">Vous les découvrirez en fonction de votre cas d'utilisation.</font></font></p>

<h2 id="managing-processes"><a href="#managing-processes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion des processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La gestion de l'état de l'application est simple, voici les commandes:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 restart app_name
<span class="nv">$ </span>pm2 reload app_name
<span class="nv">$ </span>pm2 stop app_name
<span class="nv">$ </span>pm2 delete app_name
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Au lieu de </font></font><code class="language-plaintext highlighter-rouge">app_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">vous pouvez passer:</font></font></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'agir sur tous les processus</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour agir sur un identifiant de processus spécifique</font></font></li>
</ul>

<h2 id="check-status-logs-metrics"><a href="#check-status-logs-metrics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Vérifier l'état, les journaux, les métriques</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Maintenant que vous avez commencé cette application, vous pouvez vérifier son état, les </font><font style="vertical-align: inherit;" class="">journaux, les </font><font style="vertical-align: inherit;" class="">mesures et même obtenir le tableau de </font><font style="vertical-align: inherit;" class="">bord en </font><font style="vertical-align: inherit;" class="">ligne avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.io/&amp;usg=ALkJrhgujPlYQc2dzmor3GRuIXGA9wPL2A" target="_blank"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">pm2.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> .</font></font></p>

<h3 id="list-managed-applications"><a href="#list-managed-applications"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Répertorier les applications gérées</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Répertoriez l'état de toutes les applications gérées par PM2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 <span class="o">[</span>list|ls|status]
</code></pre></div></div>

<p><img src="translate_c_data/LmRD3FN.png" alt="https://i.imgur.com/LmRD3FN.png"></p>

<h3 id="display-logs"><a href="#display-logs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afficher les journaux</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour afficher les journaux en temps réel:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 logs
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour creuser des journaux plus anciens:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 logs <span class="nt">--lines</span> 200
</code></pre></div></div>

<h3 id="terminal-based-dashboard"><a href="#terminal-based-dashboard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tableau de bord basé sur le terminal</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici un tableau de bord en temps réel qui s'intègre directement dans votre terminal:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 monit
</code></pre></div></div>

<p><img src="translate_c_data/xo0LDb7.png" alt="https://i.imgur.com/xo0LDb7.png"></p>

<h3 id="pm2io-monitoring--diagnostic-web-interface"><a href="#pm2io-monitoring--diagnostic-web-interface"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2.io: Interface Web de surveillance et de diagnostic</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tableau de bord Web, serveurs croisés avec système de diagnostic:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 plus
</code></pre></div></div>

<p><img src="translate_c_data/sigMHli.png" alt="https://i.imgur.com/sigMHli.png"></p>

<h2 id="cluster-mode"><a href="#cluster-mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode cluster</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour
 les applications Node.js, PM2 inclut un équilibreur de charge 
automatique qui partagera toutes les connexions HTTP [s] / Websocket / 
TCP / UDP entre chaque processus généré.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour démarrer une application en mode cluster:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pm2 start app.js -i max
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le mode cluster </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/cluster-mode/&amp;usg=ALkJrhhHZKCCu1Ob5nQMuntjHFVHwL3yxw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="ecosystem-file"><a href="#ecosystem-file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier d'écosystème</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également créer un fichier de configuration, appelé fichier d'écosystème, pour gérer plusieurs applications. </font><font style="vertical-align: inherit;">Pour générer un fichier d'écosystème:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 ecosystem
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela générera un fichier écosystème.config.js:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">env_production</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">{</span>
     <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">worker</span><span class="dl">'</span><span class="p">,</span>
     <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">worker.js</span><span class="dl">'</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et démarrez-le facilement:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start process.yml
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la déclaration d'application </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="setup-startup-script"><a href="#setup-startup-script"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script de démarrage d'installation</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le redémarrage de PM2 avec les processus que vous gérez au démarrage / redémarrage du serveur est essentiel. </font><font style="vertical-align: inherit;">Pour résoudre ce problème, exécutez simplement cette commande pour générer un script de démarrage actif:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 startup
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et pour figer une liste de processus pour la réapparition automatique:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 save
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le générateur de script de démarrage </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/startup/&amp;usg=ALkJrhiB2yYJJwSQFuB7Z3zemuxbPgxvlg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="restart-application-on-changes"><a href="#restart-application-on-changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redémarrez l'application sur les modifications</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est assez simple avec l' </font></font><code class="language-plaintext highlighter-rouge">--watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> /path/to/my/app
<span class="nv">$ </span>pm2 start env.js <span class="nt">--watch</span> <span class="nt">--ignore-watch</span><span class="o">=</span><span class="s2">"node_modules"</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela
 surveillera et redémarrera l'application sur toute modification de 
fichier à partir du répertoire actuel + tous les sous-dossiers et 
ignorera toutes les modifications dans le dossier node_modules </font></font><code class="language-plaintext highlighter-rouge">--ignore-watch="node_modules"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez ensuite utiliser </font></font><code class="language-plaintext highlighter-rouge">pm2 logs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour vérifier les journaux des applications redémarrées.</font></font></p>

<h2 id="updating-pm2"><a href="#updating-pm2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour de PM2</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous l'avons simplifié, il n'y a pas de changement de rupture entre les versions et la procédure est simple:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>pm2@latest <span class="nt">-g</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, mettez à jour le PM2 en mémoire:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 update
</code></pre></div></div>

<h2 id="cheatsheet"><a href="#cheatsheet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CheatSheet</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici quelques commandes à connaître. </font><font style="vertical-align: inherit;" class="">Essayez-les simplement avec un exemple d'application ou avec votre application Web actuelle sur votre machine de développement:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fork mode</span>
pm2 start app.js <span class="nt">--name</span> my-api <span class="c"># Name process</span><font></font>
<font></font>
<span class="c"># Cluster mode</span>
pm2 start app.js <span class="nt">-i</span> 0        <span class="c"># Will start maximum processes with LB depending on available CPUs</span>
pm2 start app.js <span class="nt">-i</span> max      <span class="c"># Same as above, but deprecated.</span>
pm2 scale app +3             <span class="c"># Scales `app` up by 3 workers</span>
pm2 scale app 2              <span class="c"># Scales `app` up or down to 2 workers total</span><font></font>
<font></font>
<span class="c"># Listing</span><font></font>
<font></font>
pm2 list               <span class="c"># Display all processes status</span>
pm2 jlist              <span class="c"># Print process list in raw JSON</span>
pm2 prettylist         <span class="c"># Print process list in beautified JSON</span><font></font>
<font></font>
pm2 describe 0         <span class="c"># Display all informations about a specific process</span><font></font>
<font></font>
pm2 monit              <span class="c"># Monitor all processes</span><font></font>
<font></font>
<span class="c"># Logs</span><font></font>
<font></font>
pm2 logs <span class="o">[</span><span class="nt">--raw</span><span class="o">]</span>       <span class="c"># Display all processes logs in streaming</span>
pm2 flush              <span class="c"># Empty all log files</span>
pm2 reloadLogs         <span class="c"># Reload all logs</span><font></font>
<font></font>
<span class="c"># Actions</span><font></font>
<font></font>
pm2 stop all           <span class="c"># Stop all processes</span>
pm2 restart all        <span class="c"># Restart all processes</span><font></font>
<font></font>
pm2 reload all         <span class="c"># Will 0s downtime reload (for NETWORKED apps)</span><font></font>
<font></font>
pm2 stop 0             <span class="c"># Stop specific process id</span>
pm2 restart 0          <span class="c"># Restart specific process id</span><font></font>
<font></font>
pm2 delete 0           <span class="c"># Will remove process from pm2 list</span>
pm2 delete all         <span class="c"># Will remove all processes from pm2 list</span><font></font>
<font></font>
<span class="c"># Misc</span><font></font>
<font></font>
pm2 reset &lt;process&gt;    <span class="c"># Reset meta data (restarted time...)</span>
pm2 updatePM2          <span class="c"># Update in memory pm2</span>
pm2 ping               <span class="c"># Ensure pm2 daemon has been launched</span>
pm2 sendSignal SIGUSR2 my-app <span class="c"># Send system signal to script</span>
pm2 start app.js <span class="nt">--no-daemon</span>
pm2 start app.js <span class="nt">--no-vizion</span>
pm2 start app.js <span class="nt">--no-autorestart</span>
</code></pre></div></div>

<h2 id="whats-next"><a href="#whats-next"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et après?</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apprenez à déclarer toutes les options de comportement de votre application dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier de configuration JSON</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Apprenez à effectuer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">un arrêt propre et un redémarrage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> pour augmenter la fiabilité.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Découvrez comment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/deployment/&amp;usg=ALkJrhjtaA1SAZldqYtoAt-zAle1SSYHsw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">déployer et mettre à jour facilement des applications de production</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillez vos applications de production avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://keymetrics.io/&amp;usg=ALkJrhiMvWfcH0Zx_N19ge_fR2LN6OhrbA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keymetrics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="how-to-update-pm2"><a href="#how-to-update-pm2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment mettre à jour PM2</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez la dernière version pm2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>pm2@latest <span class="nt">-g</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, mettez à jour le PM2 en mémoire:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 update
</code></pre></div></div>

<h2 id="ecosystem-file-1"><a href="#ecosystem-file-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier d'écosystème</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 renforce votre flux de travail de gestion des processus. </font><font style="vertical-align: inherit;">Il
 vous permet d'affiner le comportement, les options, les variables 
d'environnement, les fichiers journaux de chaque application via un 
fichier de processus. </font><font style="vertical-align: inherit;">C'est particulièrement utile pour les applications basées sur des micro-services.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les formats de configuration pris en charge sont Javascript, JSON et YAML.</font></font></p>

<h2 id="generate-configuration"><a href="#generate-configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Générer la configuration</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Pour générer un exemple de fichier de processus, vous pouvez taper cette commande:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 ecosystem
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela générera un échantillon </font></font><code class="language-plaintext highlighter-rouge">ecosystem.config.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">env_production</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une fois édité à votre convenance, vous pouvez démarrer / redémarrer / arrêter / supprimer ce fichier via CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 <span class="o">[</span>start|restart|stop|delete] ecosystem.config.js
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Consultez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w#cli"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">la section sur l'action avec la CLI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> sur écosystème.config.js pour en savoir plus.</font></font></p>

<h3 id="javascript-format"><a href="#javascript-format"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format Javascript</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez déclarer plusieurs applications facilement et spécifier différentes options pour chacune d'elles:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span>        <span class="p">:</span> <span class="dl">"</span><span class="s2">worker</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span>      <span class="p">:</span> <span class="dl">"</span><span class="s2">./worker.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">watch</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">env_production</span> <span class="p">:</span> <span class="p">{</span>
       <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="na">name</span>       <span class="p">:</span> <span class="dl">"</span><span class="s2">api-app</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span>     <span class="p">:</span> <span class="dl">"</span><span class="s2">./api.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">instances</span>  <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="na">exec_mode</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">cluster</span><span class="dl">"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notez que l'utilisation d'un fichier de configuration Javascript nécessite de terminer le nom du fichier par </font></font><code class="language-plaintext highlighter-rouge">.config.js</code></strong></p>

<h3 id="yaml-format"><a href="#yaml-format"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Format YAML</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également créer un fichier d'écosystème au format YAML. </font><font style="vertical-align: inherit;">Exemple:</font></font></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">script   </span><span class="pi">:</span> <span class="s">./api.js</span>
    <span class="na">name     </span><span class="pi">:</span> <span class="s1">'</span><span class="s">api-app'</span>
    <span class="na">instances</span><span class="pi">:</span> <span class="m">4</span>
    <span class="na">exec_mode</span><span class="pi">:</span> <span class="s">cluster</span>
  <span class="pi">-</span> <span class="na">script </span><span class="pi">:</span> <span class="s">./worker.js</span>
    <span class="na">name   </span><span class="pi">:</span> <span class="s1">'</span><span class="s">worker'</span>
    <span class="na">watch  </span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">env    </span><span class="pi">:</span>
      <span class="na">NODE_ENV</span><span class="pi">:</span> <span class="s">development</span>
    <span class="na">env_production</span><span class="pi">:</span>
      <span class="na">NODE_ENV</span><span class="pi">:</span> <span class="s">production</span>
</code></pre></div></div>

<h3 id="cli"><a href="#cli"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, vous pouvez exécuter et gérer vos processus facilement:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start all applications</span><font></font>
pm2 start ecosystem.config.js<font></font>
<font></font>
<span class="c"># Start only the app named worker-app</span>
pm2 start ecosystem.config.js <span class="nt">--only</span> worker-app<font></font>
<font></font>
<span class="c"># Stop all</span><font></font>
pm2 stop ecosystem.config.js<font></font>
<font></font>
<span class="c"># Restart all</span><font></font>
pm2 start   ecosystem.config.js<font></font>
<span class="c">## Or</span><font></font>
pm2 restart ecosystem.config.js<font></font>
<font></font>
<span class="c"># Reload all</span><font></font>
pm2 reload ecosystem.config.js<font></font>
<font></font>
<span class="c"># Delete all</span><font></font>
pm2 delete ecosystem.config.js<font></font>
</code></pre></div></div>

<h3 id="act-on-a-specific-process"><a href="#act-on-a-specific-process"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agir sur un processus spécifique</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également agir sur une application particulière en utilisant son nom et l'option </font></font><code class="language-plaintext highlighter-rouge">--only &lt;app_name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start   ecosystem.config.js <span class="nt">--only</span> api-app<font></font>
pm2 restart ecosystem.config.js <span class="nt">--only</span> api-app<font></font>
pm2 reload  ecosystem.config.js <span class="nt">--only</span> api-app<font></font>
pm2 delete  ecosystem.config.js <span class="nt">--only</span> api-app
</code></pre></div></div>

<h3 id="switching-environments"><a href="#switching-environments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changement d'environnements</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous avez peut-être remarqué que vous pouvez déclarer des variables spécifiques à l'environnement avec l'attribut </font></font><code class="language-plaintext highlighter-rouge">env_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(par exemple env_production, env_staging…). </font><font style="vertical-align: inherit;">Ils peuvent être commutés facilement. </font><font style="vertical-align: inherit;">Il vous suffit de spécifier le </font></font><code class="language-plaintext highlighter-rouge">--env &lt;environment_name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque vous agissez sur la déclaration d'application.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Inject what is declared in env_production</span>
pm2 start process.json <span class="nt">--env</span> production<font></font>
<font></font>
<span class="c"># Inject what is declared in env_staging</span>
pm2 restart process.json <span class="nt">--env</span> staging
</code></pre></div></div>

<h2 id="attributes-available"><a href="#attributes-available"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributs disponibles</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le comportement et la configuration de l'application peuvent être affinés avec les attributs suivants:</font></font></p>

<h3 id="general"><a href="#general"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Général</font></font></a></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Champ</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></th>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"My-api"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom de l'application (par défaut, nom de fichier de script sans extension)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scénario</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"./Api/app.js"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">chemin du script relatif au début de pm2</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cwd</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/ Var / www /"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le répertoire à partir duquel votre application sera lancée</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">args</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«-A 13 -b 12»</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaîne contenant tous les arguments passés via CLI au script</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interprète</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/ Usr / bin / python"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">chemin absolu de l'interpréteur (par défaut au nœud)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpreter_args</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"-harmonie"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">possibilité de passer à l'interprète</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_args</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center">&nbsp;</td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alias de interpreter_args</font></font></td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-features"><a href="#advanced-features"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionnalités avancées</font></font></a></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Champ</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></th>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les instances</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-1</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre d'instances d'application à lancer</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exec_mode</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaîne</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"grappe"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode pour démarrer votre application, peut être «cluster» ou «fork», fork par défaut</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regarder</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen ou []</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">activer
 la fonction de surveillance et de redémarrage, si un fichier change 
dans le dossier ou le sous-dossier, votre application sera rechargée</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ignore_watch</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">["[\ / \\] \ ./", "node_modules"]</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste de regex pour ignorer certains noms de fichiers ou de dossiers par la fonction de surveillance</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_memory_restart</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaîne</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«150 millions»</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">votre application sera redémarrée si elle dépasse la quantité de mémoire spécifiée. </font><font style="vertical-align: inherit;">format convivial: il peut s'agir de «10M», «100K», «2G» et ainsi de suite…</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">env</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">{"NODE_ENV": "développement", "ID": "42"}</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variables d'env qui apparaîtront dans votre application</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">env_</font></font><env_name></env_name></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{"NODE_ENV": "production", "ID": "89"}</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injecter </font></font><env_name><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors du redémarrage de pm2 app.yml --env </font></font><env_name></env_name></env_name></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source_map_support</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur par défaut true, [activer / désactiver le fichier de carte source]</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instance_var</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaîne</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"NODE_APP_INSTANCE"</font></font></td>
      <td style="text-align: left"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/environment/&amp;usg=ALkJrhhILTtT4h7ASbNA0KQM5nr7S3tcEg#specific-environment-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voir la documentation</font></font></a></td>
    </tr>
  </tbody>
</table>

<h3 id="log-files"><a href="#log-files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichiers journaux</font></font></a></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Champ</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></th>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_date_format</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"AAAA-MM-JJ HH: mm Z"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format de la date du journal (voir la section du journal)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error_file</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center">&nbsp;</td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin du fichier d'erreur (par défaut à $ HOME / .pm2 / logs / XXXerr.log)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">out_file</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center">&nbsp;</td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin du fichier de sortie (par défaut à $ HOME / .pm2 / logs / XXXout.log)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combiner_logs</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s'il est défini sur true, évitez de suffixer le fichier journaux avec l'ID de processus</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">merge_logs</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alias pour combiner_logs</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pid_file</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center">&nbsp;</td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin du fichier pid (par défaut à $ HOME / .pm2 / pid / app-pm_id.pid)</font></font></td>
    </tr>
  </tbody>
</table>

<h3 id="control-flow"><a href="#control-flow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôle du flux</font></font></a></h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Champ</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></th>
      <th style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></th>
      <th style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">min_uptime</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chaîne)</font></font></td>
      <td style="text-align: center">&nbsp;</td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disponibilité minimale de l'application à considérer comme démarrée</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">listen_timeout</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 000</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temps en ms avant de forcer un rechargement si l'application n'écoute pas</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kill_timeout</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1600</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temps en millisecondes avant d'envoyer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw#cleaning-states-and-jobs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un SIGKILL final</font></font></a></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shutdown_with_message</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arrêter une application avec process.send ('shutdown') au lieu de process.kill (pid, SIGINT)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wait_ready</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu de recharger en attendant l'événement d'écoute, attendez process.send ('ready')</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_restarts</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dix</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre
 de redémarrages instables consécutifs (intervalle inférieur à 1 seconde
 ou temps personnalisé via min_uptime) avant que votre application ne 
soit considérée comme une erreur et cesse d'être redémarrée</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restart_delay</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4000</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temps d'attente avant de redémarrer une application en panne (en millisecondes). </font><font style="vertical-align: inherit;">la valeur par défaut est 0.</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redémarrage automatique</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true par défaut. </font><font style="vertical-align: inherit;">si false, PM2 ne redémarrera pas votre application si elle plante ou se termine paisiblement</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cron_restart</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaîne</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"dix * * *"</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un motif cron pour redémarrer votre application. </font><font style="vertical-align: inherit;">L'application doit être en cours d'exécution pour que la fonction cron fonctionne</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vision</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faux</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true par défaut. </font><font style="vertical-align: inherit;">si false, PM2 démarrera sans fonctionnalités de visualisation (métadonnées de contrôle de version)</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post_update</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">["Npm install", "echo lancement de l'application"]</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une
 liste de commandes qui seront exécutées après avoir effectué une 
opération Pull / Upgrade à partir du tableau de bord Keymetrics</font></font></td>
    </tr>
    <tr>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obliger</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">booléen</font></font></td>
      <td style="text-align: center"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vrai</font></font></td>
      <td style="text-align: left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la valeur par défaut est false. </font><font style="vertical-align: inherit;">si vrai, vous pouvez lancer le même script plusieurs fois, ce qui n'est généralement pas autorisé par PM2</font></font></td>
    </tr>
  </tbody>
</table>

<h3 id="deployment"><a href="#deployment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déploiement</font></font></a></h3>

<table>
  <thead>
    <tr>
      <th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom de l'entrée</font></font></th>
      <th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></th>
      <th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Type</font></font></th>
      <th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Défaut</font></font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clé</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chemin de clé SSH</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ HOME / .ssh</font></font></td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisateur</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisateur SSH</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hôte</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hôte SSH</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Chaîne]</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssh_options</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options SSH sans indicateur de ligne de commande, voir 'man ssh'</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String ou [String]</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réf</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GIT à distance / branche</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repo</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécommande GIT</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin dans le serveur</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pré-configuration</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commande de pré-configuration ou chemin vers un script sur votre machine locale</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post-installation</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commandes post-installation ou chemin vers un script sur la machine hôte</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pré-déploiement local</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action de pré-déploiement</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post-déploiement</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action post-déploiement</font></font></td>
      <td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></td>
      <td>&nbsp;</td>
    </tr>
  </tbody>
</table>

<h2 id="considerations"><a href="#considerations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considérations</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Toutes les options de ligne de commande passées lors de l'utilisation de la déclaration d'application JSON seront supprimées.</font></font></p>

<h3 id="multiple-json"><a href="#multiple-json"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON multiple</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez démarrer autant de déclarations d'application JSON que vous le souhaitez.</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>node-app-1.json
<span class="o">{</span>
  <span class="s2">"name"</span> : <span class="s2">"node-app-1"</span>,
  <span class="s2">"script"</span> : <span class="s2">"app.js"</span>,
  <span class="s2">"cwd"</span> : <span class="s2">"/srv/node-app-1/current"</span>
<span class="o">}</span><font></font>
<font></font>
<span class="nv">$ </span><span class="nb">cat </span>node-app-2.json
<span class="o">{</span>
  <span class="s2">"name"</span> : <span class="s2">"node-app-2"</span>,
  <span class="s2">"script"</span> : <span class="s2">"app2.js"</span>,
  <span class="s2">"cwd"</span> : <span class="s2">"/srv/node-app-2/current"</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start node-app-1.json<font></font>
pm2 start node-app-2.json<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se traduira par deux applications lancées:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps aux | grep node-app<font></font>
root  14735  5.8  1.1  752476  83932 ? Sl 00:08 0:00 pm2: node-app-1<font></font>
root  24271  0.0  0.3  696428  24208 ? Sl 17:36 0:00 pm2: node-app-2<font></font>
</code></pre></div></div>

<h3 id="cwd"><a href="#cwd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CWD</font></font></a></h3>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">cwd:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> votre déclaration JSON n'a pas besoin de résider avec votre script. </font><font style="vertical-align: inherit;">Si vous souhaitez conserver le (s) JSON (s) dans un emplacement autre que votre script (par exemple </font></font><code class="language-plaintext highlighter-rouge">/etc/pm2/conf.d/node-app.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), vous devrez utiliser la </font></font><code class="language-plaintext highlighter-rouge">cwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctionnalité
 (Remarque, cela peut être très utile pour les structures de répertoires
 de style capistrano qui utilisent des liens symboliques). </font><font style="vertical-align: inherit;">Les fichiers peuvent être soit relatifs au </font></font><code class="language-plaintext highlighter-rouge">cwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">répertoire, soit absolus (voir l'exemple ci-dessous).</font></font></p>

<h3 id="clijson-options"><a href="#clijson-options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options CLI / JSON</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toutes
 les clés peuvent être utilisées dans un fichier configuré JSON, mais 
resteront presque les mêmes sur la ligne de commande, par exemple:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exec_mode         -&gt; --execute-command<font></font>
max_restarts      -&gt; --max-restarts<font></font>
force             -&gt; --force<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser des guillemets pour créer un ESC, par exemple:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$pm2</span> start test.js <span class="nt">--node-args</span> <span class="s2">"port=3001 sitename='first pm2 app'"</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L' </font></font><code class="language-plaintext highlighter-rouge">nodeArgs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">argument sera analysé comme</font></font></p>

<pre><code class="language-JSON">[<font></font>
  "port=3001",<font></font>
  "sitename=first pm2 app"<font></font>
]<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais non</font></font></p>

<pre><code class="language-JSON">[<font></font>
  "port=3001",<font></font>
  "sitename='first",<font></font>
  "pm2",<font></font>
  "app'"<font></font>
]<font></font>
</code></pre>

<h3 id="disabling-logs"><a href="#disabling-logs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactivation des journaux</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez passer </font></font><code class="language-plaintext highlighter-rouge">/dev/null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à error_file ou out_file pour désactiver l'enregistrement des journaux. </font><font style="vertical-align: inherit;">Note: PM2 départ </font></font><code class="language-plaintext highlighter-rouge">2.4.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="language-plaintext highlighter-rouge">/dev/null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logs désactiver indépendamment de la plate - </font><font style="vertical-align: inherit;">forme.</font></font></p>

<h3 id="logs-suffix"><a href="#logs-suffix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suffixe des journaux</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez désactiver les suffixes d'ID automatiques sur les journaux (par exemple </font></font><code class="language-plaintext highlighter-rouge">app-name-ID.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) en activant l'option</font></font><code class="language-plaintext highlighter-rouge">merge_logs: true</code></p>

<h3 id="environment-definition"><a href="#environment-definition"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définition de l'environnement</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devrez utiliser </font></font><code class="language-plaintext highlighter-rouge">--env &lt;envname&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour dire à pm2 d'utiliser l'environnement spécifique défini dans un fichier de processus:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"apps"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"worker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"./worker.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"watch"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"NODE_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"development"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"env_production"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nl">"NODE_ENV"</span><span class="p">:</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"api-app"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"./api.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instances"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exec_mode"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"cluster"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet exemple, vous exécuterez </font></font><code class="language-plaintext highlighter-rouge">pm2 start ecosystem.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et il démarrera votre application avec l'environnement par défaut (en développement donc). </font><font style="vertical-align: inherit;">Ensuite, vous utilisez </font></font><code class="language-plaintext highlighter-rouge">pm2 start ecosystem.json --env production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et il utilisera l'attribut </font></font><code class="language-plaintext highlighter-rouge">env_&lt;name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">où le nom est </font></font><code class="language-plaintext highlighter-rouge">production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici, donc il démarrera votre application avec </font></font><code class="language-plaintext highlighter-rouge">NODE_ENV=production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h3 id="special-ext_type"><code class="language-plaintext highlighter-rouge">ext_type</code><a href="#special-ext_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spécial </font></font></a></h3>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">min_uptime La valeur de </font></font><code class="language-plaintext highlighter-rouge">min_uptime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut être:
    </font></font><ul>
      <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le nombre,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
par exemple, </font></font><code class="language-plaintext highlighter-rouge">"min_uptime": 3000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifie 3000 millisecondes.</font></font></li>
      <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par 
conséquent, nous faisons court et facile à configurer: </font></font><code class="language-plaintext highlighter-rouge">h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="language-plaintext highlighter-rouge">m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, par exemple: des </font></font><code class="language-plaintext highlighter-rouge">"min_uptime": "1h"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moyens d' </font><font style="vertical-align: inherit;">une heure, </font></font><code class="language-plaintext highlighter-rouge">"min_uptime": "5m"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifie cinq minutes et des </font></font><code class="language-plaintext highlighter-rouge">"min_uptime": "10s"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moyens dix secondes (ceux - </font><font style="vertical-align: inherit;">ci seront transformées en millisecondes).</font></font></li>
    </ul>
  </li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_memory_restart La valeur de </font></font><code class="language-plaintext highlighter-rouge">max_memory_restart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut être:
    </font></font><ul>
      <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le nombre,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
  par exemple, </font></font><code class="language-plaintext highlighter-rouge">"max_memory_restart": 1024</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifie 1024 octets ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAS BITS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
      <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Par 
  conséquent, nous faisons court et facile à configurer: </font></font><code class="language-plaintext highlighter-rouge">G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="language-plaintext highlighter-rouge">M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">K</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, par exemple: des </font></font><code class="language-plaintext highlighter-rouge">"max_memory_restart": "1G"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moyens d' </font><font style="vertical-align: inherit;">un giga - </font><font style="vertical-align: inherit;">octet, </font></font><code class="language-plaintext highlighter-rouge">"max_memory_restart": "5M"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifie cinq méga - </font><font style="vertical-align: inherit;">octets et des </font></font><code class="language-plaintext highlighter-rouge">"max_memory_restart": "10K"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moyens dix kilo - </font><font style="vertical-align: inherit;">octets (ceux - </font><font style="vertical-align: inherit;">ci seront transformés en octet (s)).</font></font></li>
    </ul>
  </li>
  <li>
    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valeurs facultatives Par exemple, </font></font><code class="language-plaintext highlighter-rouge">exec_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut prendre </font></font><code class="language-plaintext highlighter-rouge">cluster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code class="language-plaintext highlighter-rouge">cluster_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ou </font></font><code class="language-plaintext highlighter-rouge">fork</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code class="language-plaintext highlighter-rouge">fork_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) comme valeurs possibles.</font></font></p>
  </li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choses à savoir
    </font></font><ul>
      <li><code class="language-plaintext highlighter-rouge">"instances": 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signifie que PM2 lancera le maximum de processus possible en fonction du nombre de CPU (mode cluster)</font></font></li>
      <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réseau
 </font></font><code class="language-plaintext highlighter-rouge">args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code class="language-plaintext highlighter-rouge">node_args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">ignore_watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pourrait être le </font><font style="vertical-align: inherit;">type de </font></font><code class="language-plaintext highlighter-rouge">Array</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(par exemple </font></font><code class="language-plaintext highlighter-rouge">"args": ["--toto=heya coco", "-d", "1"]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) , </font><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(par exemple </font></font><code class="language-plaintext highlighter-rouge">"args": "--to='heya coco' -d 1"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></li>
    </ul>
  </li>
</ul>

<h2 id="cluster-mode-1"><a href="#cluster-mode-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode de cluster</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode cluster</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 permet aux applications Node.js en réseau (serveur http (s) / tcp / 
udp) d'être mises à l'échelle sur tous les processeurs disponibles, sans
 aucune modification de code. </font><font style="vertical-align: inherit;">Cela
 augmente considérablement les performances et la fiabilité de vos 
applications, en fonction du nombre de processeurs disponibles. </font><font style="vertical-align: inherit;">Sous le capot, cela utilise le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://nodejs.org/api/cluster.html&amp;usg=ALkJrhg_EQYXwbnjJtXpBz3r8RzB5lDBhg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module de cluster</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Node.js de </font><font style="vertical-align: inherit;">sorte que les processus enfants de l'application mise à l'échelle puissent partager automatiquement les ports du serveur. </font><font style="vertical-align: inherit;" class="">Pour en savoir plus, consultez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://nodejs.org/api/cluster.html&amp;usg=ALkJrhg_EQYXwbnjJtXpBz3r8RzB5lDBhg#cluster_how_it_works"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Comment cela fonctionne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> dans la documentation officielle Node.js sur le module de cluster.</font></font></p>

<p><img src="translate_c_data/kTAowsL.png" alt="http://i.imgur.com/kTAowsL.png"></p>

<h2 id="usage"><a href="#usage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usage</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour activer le </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode cluster</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , passez simplement le -i</font></font><instances><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> option:</font></font></instances></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">-i</span> max
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signifie que PM2 détectera automatiquement le nombre de processeurs disponibles et exécutera autant de processus que possible</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier js / yaml / json</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">script</span>    <span class="p">:</span> <span class="dl">"</span><span class="s2">api.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">instances</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">max</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">exec_mode</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">cluster</span><span class="dl">"</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REMARQUE</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : vous devez définir exec_mode sur </font></font><code class="language-plaintext highlighter-rouge">cluster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour que PM2 sache que vous souhaitez équilibrer la charge entre chaque instance,</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, pour démarrer le fichier de processus:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start processes.json
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L' </font><font style="vertical-align: inherit;">option </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-i</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instances</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut être:</font></font></p>
<ul>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 / max</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour diffuser l'application sur tous les processeurs</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour diffuser l'application sur tous les processeurs - 1</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour diffuser l'application sur </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plusieurs</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processeurs</font></font></li>
</ul>

<h2 id="reload"><a href="#reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recharger</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par opposition à </font></font><code class="language-plaintext highlighter-rouge">restart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui tue et redémarre le processus, </font></font><code class="language-plaintext highlighter-rouge">reload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réalise un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temps d'arrêt de 0 seconde</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour recharger une application:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 reload &lt;app_name&gt;
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 reload process.json<font></font>
pm2 reload process.json <span class="nt">--only</span> api
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si
 le système de rechargement n'a pas réussi à recharger votre 
application, un délai d'expiration reviendra à un redémarrage classique.</font></font></p>

<h2 id="graceful-shutdown"><a href="#graceful-shutdown"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrêt gracieux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans
 un environnement de production, vous devrez peut-être attendre que les 
requêtes restantes soient traitées ou fermer toutes les connexions avant
 de quitter l'application. </font><font style="vertical-align: inherit;">Sur le </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contexte de rechargement PM2,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 cela peut se traduire par un rechargement très long ou un rechargement 
qui ne fonctionne pas (secours pour redémarrer) ce qui signifie que 
votre application a toujours des connexions ouvertes en sortie. </font><font style="vertical-align: inherit;">Vous
 devrez peut-être également fermer toutes les connexions aux bases de 
données, effacer les files d'attente de données ou autre.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Pour arrêter correctement une application, vous pouvez attraper le </font><font style="vertical-align: inherit;" class="">signal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">SIGINT</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> (le premier signal envoyé à la sortie par PM2) et exécuter des actions pour attendre / effacer tous ces états:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">SIGINT</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">db</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="nx">err</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">);</span>
   <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonctionnalité d' </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw"><font style="vertical-align: inherit;">arrêt</font></a><font style="vertical-align: inherit;"> progressif.</font></font></p>

<h2 id="statelessify-your-application"><a href="#statelessify-your-application"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apatride votre candidature</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous que votre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/specifics/&amp;usg=ALkJrhiypzqIb7DRdJsBuYem9TBKamJ76A#stateless-apps"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application est sans état,</font></font></strong></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ce qui signifie qu'aucune donnée locale n'est stockée dans le 
processus, par exemple les sessions / connexions websocket, la mémoire 
de session et autres. </font><font style="vertical-align: inherit;">Utilisez Redis, Mongo ou d'autres bases de données pour partager des états entre les processus.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Une autre ressource sur la façon d'écrire une application sans état efficace et prête pour la production est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://12factor.net/&amp;usg=ALkJrhhOzsXOBNjQnu2uIuS2Ka0DFU1ocA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">le manifeste de l'application Twelve Factor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class=""> .</font></font></p>

<h2 id="contributingdevelopment-mode"><a href="#contributingdevelopment-mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode contribution / développement</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est très simple de jouer avec PM2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 <span class="nb">kill</span>   <span class="c"># kill the current pm2</span><font></font>
git clone my_pm2_fork.git<font></font>
<span class="nb">cd </span>pm2/
<span class="nv">DEBUG</span><span class="o">=</span><span class="k">*</span> ./bin/pm2 <span class="nt">--no-daemon</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque fois que vous modifiez le code, assurez-vous de tuer et de redémarrer PM2 pour que les modifications prennent effet.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEBUG = ”*“</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Permet d'afficher tous les journaux de débogage possibles dans ~ / .pm2 / pm2.log</font></font></p>

<h2 id="install-pm2-development"><a href="#install-pm2-development"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer le développement PM2</font></font></a></h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>https://github.com/Unitech/pm2#development <span class="nt">-g</span>
</code></pre></div></div>

<h2 id="launch-the-tests"><a href="#launch-the-tests"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancer les tests</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maître: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://travis-ci.org/Unitech/pm2&amp;usg=ALkJrhgZluN7pYAglUNoxl79Db8swCxk7g"><img src="translate_c_data/master.svg" alt="État de la construction"></a></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dev: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://travis-ci.org/Unitech/pm2&amp;usg=ALkJrhgZluN7pYAglUNoxl79Db8swCxk7g"><img src="translate_c_data/development.svg" alt="État de la construction"></a></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essayez simplement les tests avant d'utiliser PM2 sur votre serveur de production:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/Unitech/pm2.git
<span class="nb">cd </span>pm2<font></font>
npm <span class="nb">install</span>  <span class="c"># Or do NODE_ENV=development npm install if some packages are missing</span>
npm <span class="nb">test</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si un test ne fonctionne pas correctement, veuillez signaler les problèmes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues%3Fstate%3Dopen&amp;usg=ALkJrhiIn_7eze1A7WxI8i9kBEIEwHw_Xw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous devez également vous assurer que vous disposez de toutes les dépendances nécessaires. </font><font style="vertical-align: inherit;">Pour Ubuntu:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential
<span class="c"># nvm is a Node.js version manager - https://github.com/creationix/nvm</span>
wget <span class="nt">-qO-</span> https://raw.github.com/creationix/nvm/master/install.sh | sh<font></font>
nvm <span class="nb">install </span>4<font></font>
nvm use 4<font></font>
</code></pre></div></div>

<h2 id="getting-started"><a href="#getting-started"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commencer</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 intègre un système de déploiement simple et puissant avec suivi des révisions. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://keymetrics.io/2014/06/25/ecosystem-json-deploy-and-iterate-faster/&amp;usg=ALkJrhjZS3w_BFlyWB--qEh-j9PcJyeEnQ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre tutoriel étape par étape ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veuillez lire les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w#considerations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">considérations pour utiliser le déploiement PM2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="simple-deploy"><a href="#simple-deploy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déploiement simple</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En fait, il vous suffit d'ajouter un attribut «deploy» à écosystème.json. </font><font style="vertical-align: inherit;">Voici un strict minimum pour déployer une application:</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">process.json:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
   <span class="dl">"</span><span class="s2">apps</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[{</span>
      <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">HTTP-API</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">script</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">http.js</span><span class="dl">"</span>
   <span class="p">}],</span>
   <span class="dl">"</span><span class="s2">deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
     <span class="c1">// "production" is the environment name</span>
     <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
       <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ubuntu</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">192.168.0.13</span><span class="dl">"</span><span class="p">],</span>
       <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">origin/master</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">repo</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">git@github.com:Username/repository.git</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">/var/www/my-repository</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">post-deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">npm install; grunt dist</span><span class="dl">"</span>
      <span class="p">},</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ bin / bash:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Setup deployment at remote location</span>
<span class="nv">$ </span>pm2 deploy production setup<font></font>
<font></font>
<span class="c"># Update remote version</span>
<span class="nv">$ </span>pm2 deploy production update<font></font>
<font></font>
<span class="c"># Revert to -1 deployment</span>
<span class="nv">$ </span>pm2 deploy production revert 1<font></font>
<font></font>
<span class="c"># execute command on remote machines</span>
<span class="nv">$ </span>pm2 deploy production <span class="nb">exec</span> <span class="s2">"pm2 reload all"</span>
</code></pre></div></div>

<h2 id="complete-tutorial"><a href="#complete-tutorial"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel complet</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1- Générez un exemple de fichier écosystème.json qui répertorie les processus et l'environnement de déploiement.</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 ecosystem
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le dossier actuel, un </font></font><code class="language-plaintext highlighter-rouge">ecosystem.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier sera créé. </font><font style="vertical-align: inherit;">Il contient ceci:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="c1">// Applications part</span>
  <span class="dl">"</span><span class="s2">apps</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span>      <span class="p">:</span> <span class="dl">"</span><span class="s2">API</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">script</span><span class="dl">"</span>    <span class="p">:</span> <span class="dl">"</span><span class="s2">app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">env</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">COMMON_VARIABLE</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="c1">// Environment variables injected when starting with --env production</span>
    <span class="c1">// http://pm2.keymetrics.io/docs/usage/application-declaration/#switching-to-different-environments</span>
    <span class="dl">"</span><span class="s2">env_production</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span>      <span class="p">:</span> <span class="dl">"</span><span class="s2">WEB</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">script</span><span class="dl">"</span>    <span class="p">:</span> <span class="dl">"</span><span class="s2">web.js</span><span class="dl">"</span>
  <span class="p">}],</span>
  <span class="c1">// Deployment part</span>
  <span class="c1">// Here you describe each environment</span>
  <span class="dl">"</span><span class="s2">deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Multi host is possible, just by passing IPs/hostname as an array</span>
      <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">212.83.163.1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">212.83.163.2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">212.83.163.3</span><span class="dl">"</span><span class="p">],</span>
      <span class="c1">// Branch</span>
      <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">origin/master</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Git repository to clone</span>
      <span class="dl">"</span><span class="s2">repo</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">git@github.com:repo.git</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Path of the application on target servers</span>
      <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">/var/www/production</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Can be used to give options in the format used in the configura-</span>
      <span class="c1">// tion file.  This is useful for specifying options for which there</span>
      <span class="c1">// is no separate command-line flag, see 'man ssh'</span>
      <span class="c1">// can be either a single string or an array of strings</span>
      <span class="dl">"</span><span class="s2">ssh_options</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">StrictHostKeyChecking=no</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// To prepare the host by installing required software (eg: git)</span>
      <span class="c1">// even before the setup process starts</span>
      <span class="c1">// can be multiple commands separated by the character ";"</span>
      <span class="c1">// or path to a script on your local machine</span>
      <span class="dl">"</span><span class="s2">pre-setup</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">apt-get install git</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Commands / path to a script on the host machine</span>
      <span class="c1">// This will be executed on the host after cloning the repository</span>
      <span class="c1">// eg: placing configurations in the shared dir etc</span>
      <span class="dl">"</span><span class="s2">post-setup</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ls -la</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Commands to execute locally (on the same machine you deploy things)</span>
      <span class="c1">// Can be multiple commands separated by the character ";"</span>
      <span class="dl">"</span><span class="s2">pre-deploy-local</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">echo 'This is a local executed command'</span><span class="dl">"</span>
      <span class="c1">// Commands to be executed on the server after the repo has been cloned</span>
      <span class="dl">"</span><span class="s2">post-deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">npm install &amp;&amp; pm2 startOrRestart ecosystem.json --env production</span><span class="dl">"</span>
      <span class="c1">// Environment variables that must be injected in all applications on this env</span>
      <span class="dl">"</span><span class="s2">env</span><span class="dl">"</span>  <span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">staging</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">212.83.163.1</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">origin/master</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">repo</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">git@github.com:repo.git</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">/var/www/development</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">ssh_options</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">StrictHostKeyChecking=no</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PasswordAuthentication=no</span><span class="dl">"</span><span class="p">],</span>
      <span class="dl">"</span><span class="s2">post-deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">pm2 startOrRestart ecosystem.json --env dev</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">env</span><span class="dl">"</span>  <span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">staging</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modifiez le fichier selon vos besoins.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2- Assurez-vous que vous avez la clé publique ssh sur votre machine locale</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa<font></font>
ssh-copy-id node@myserver.com<font></font>
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous rencontrez des erreurs, veuillez vous référer à la section de dépannage ci-dessous.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3- Initialisez maintenant le dossier distant avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 deploy &lt;configuration_file&gt; &lt;environment&gt; setup
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 deploy ecosystem.json production setup
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette commande créera les dossiers sur votre serveur distant.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4- Déployez votre code</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 deploy ecosystem.json production
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant, votre code sera rempli, installé et démarré avec PM2.</font></font></p>

<h2 id="deployment-options"><a href="#deployment-options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de déploiement</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Affichez l'aide au déploiement via </font></font><code class="language-plaintext highlighter-rouge">pm2 deploy help</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 deploy &lt;configuration_file&gt; &lt;environment&gt; &lt;command&gt;<font></font>
<font></font>
  Commands:<font></font>
    setup                run remote setup commands<font></font>
    update               update deploy to the latest release<font></font>
    revert [n]           revert to [n]th last deployment or 1<font></font>
    curr[ent]            output current release commit<font></font>
    prev[ious]           output previous release commit<font></font>
    exec|run &lt;cmd&gt;       execute the given &lt;cmd&gt;<font></font>
    list                 list previous deploy commits<font></font>
    [ref]                deploy to [ref], the "ref" setting, or latest tag<font></font>
</code></pre></div></div>

<h2 id="use-different-set-of-env-variables"><a href="#use-different-set-of-env-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser un ensemble différent de variables d'environnement</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l' </font></font><code class="language-plaintext highlighter-rouge">post-deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attribut, vous avez peut-être remarqué la commande </font></font><code class="language-plaintext highlighter-rouge">pm2 startOrRestart ecosystem.json --env production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;" class="">Le </font></font><code class="language-plaintext highlighter-rouge">--env &lt;environment_name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">permet d'injecter différents ensembles de variables d'environnement.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg#switching-to-different-environments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="related-commands"><a href="#related-commands"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commandes associées</font></font></a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 startOrRestart all.json            # Invoke restart on all apps in JSON<font></font>
pm2 startOrReload all.json             # Invoke reload<font></font>
</code></pre></div></div>

<h2 id="multi-host-deployment"><a href="#multi-host-deployment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déploiement multi-hôte</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour déployer sur plusieurs hôtes en même temps, il vous suffit de déclarer chaque hôte d'un tableau sous l'attribut </font></font><code class="language-plaintext highlighter-rouge">host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">[...]</span>
  <span class="dl">"</span><span class="s2">deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">,</span>
      <span class="c1">// Multi host in a js array</span>
      <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">212.83.163.1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">212.83.163.2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">212.83.163.3</span><span class="dl">"</span><span class="p">],</span>
      <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">origin/master</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">repo</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">git@github.com:repo.git</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">/var/www/production</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">pre-setup</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">echo 'commands or local script path to be run on the host before the setup process starts'</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">post-setup</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">echo 'commands or a script path to be run on the host after cloning the repo'</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">post-deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">pm2 startOrRestart ecosystem.json --env production</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">pre-deploy-local</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">echo 'This is a local executed command'</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">[...]</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="using-ssh-keys"><a href="#using-ssh-keys"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation des clés SSH</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il vous suffit d'ajouter l'attribut «clé» avec le chemin d'accès à la clé publique, voir l'exemple ci-dessous:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">key</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">/path/to/some.pem</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// path to the public key to authenticate</span>
      <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">node</span><span class="dl">"</span><span class="p">,</span>              <span class="c1">// user used to authenticate</span>
      <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">212.83.163.1</span><span class="dl">"</span><span class="p">,</span>      <span class="c1">// where to connect</span>
      <span class="dl">"</span><span class="s2">ref</span><span class="dl">"</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">origin/master</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">repo</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">git@github.com:repo.git</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">/var/www/production</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">post-deploy</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">pm2 startOrRestart ecosystem.json --env production</span><span class="dl">"</span>
    <span class="p">},</span>
</code></pre></div></div>

<h2 id="force-deployment"><a href="#force-deployment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déploiement de force</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez recevoir ce message:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--&gt; Deploying to dev environment<font></font>
--&gt; on host 192.168.1.XX<font></font>
<font></font>
  push your changes before deploying<font></font>
<font></font>
Deploy failed<font></font>
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela
 signifie que vous avez des modifications dans votre système local qui 
ne sont pas poussées dans votre référentiel git, et puisque le script de
 déploiement obtient la mise à jour via, </font></font><code class="language-plaintext highlighter-rouge">git pull</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elles ne seront pas sur votre serveur. </font><font style="vertical-align: inherit;">Si vous souhaitez déployer sans pousser de données, vous pouvez ajouter l' </font></font><code class="language-plaintext highlighter-rouge">--force</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 deploy ecosystem.json production <span class="nt">--force</span>
</code></pre></div></div>

<h2 id="considerations-1"><a href="#considerations-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considérations</font></font></a></h2>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez utiliser l'option </font></font><code class="language-plaintext highlighter-rouge">--force</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour ignorer la détection des modifications locales</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous voudrez peut-être valider votre dossier node_modules ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/622&amp;usg=ALkJrhgQvsoqjOCLpGfD3tRg2rqN84B-Iw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 622</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ou ajouter la </font></font><code class="language-plaintext highlighter-rouge">npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande à la </font></font><code class="language-plaintext highlighter-rouge">post-deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section:</font></font><code class="language-plaintext highlighter-rouge">"post-deploy" : "npm install &amp;&amp; pm2 startOrRestart ecosystem.json --env production"</code></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifiez que votre serveur distant a l'autorisation de git cloner le référentiel</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous
 pouvez déclarer des variables d'environnement spécifiques en fonction 
de l'environnement dans lequel vous souhaitez déployer le code. </font><font style="vertical-align: inherit;">Par
 exemple, pour déclarer des variables pour l'environnement de 
production, ajoutez «env_production»: {} et déclarez les variables.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut, PM2 utilisera </font></font><code class="language-plaintext highlighter-rouge">ecosystem.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ainsi, vous pouvez sauter le</font></font><configuration_file><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> options si tel est le cas</font></font></configuration_file></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez intégrer les sections «applications» et «déployer» dans le package.json</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il déploie votre code via ssh, vous n'avez besoin d'aucune dépendance</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les processus sont initialisés / démarrés automatiquement en fonction du nom de l'application dans </font></font><code class="language-plaintext highlighter-rouge">ecosystem.json</code></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le référentiel PM2-deploy peut être trouvé ici: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2-deploy&amp;usg=ALkJrhjytjJ9ud61ro6U7QDrshWqU2NexA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-deploy</font></font></a></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WINDOWS</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : voir le point ci-dessous (à la fin)</font></font></li>
</ul>

<h2 id="troubleshooting"><a href="#troubleshooting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dépannage</font></font></a></h2>
<h5 id="ssh-clone-errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreurs de clonage SSH</font></font></h5>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la plupart des cas, ces erreurs seront causées par le fait de </font></font><code class="language-plaintext highlighter-rouge">pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne pas avoir les bonnes clés pour cloner votre référentiel. </font><font style="vertical-align: inherit;">Vous devez vérifier à chaque étape que les clés sont disponibles.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étape 1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si vous êtes certain que vos clés fonctionnent correctement, essayez d'abord de les exécuter </font></font><code class="language-plaintext highlighter-rouge">git clone your_repo.git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le serveur cible. </font><font style="vertical-align: inherit;">Si cela réussit, passez aux étapes suivantes. </font><font style="vertical-align: inherit;">En cas d'échec, assurez-vous que vos clés sont stockées à la fois sur le serveur et sur votre compte git.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étape 2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par défaut </font></font><code class="language-plaintext highlighter-rouge">ssh-copy-id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copie le identiy par défaut, généralement nommé </font></font><code class="language-plaintext highlighter-rouge">id_rsa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si ce n'est pas la clé appropriée:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id <span class="nt">-i</span> path/to/my/key your_username@server.com
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela ajoute votre clé publique au </font></font><code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étape 3</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si vous obtenez l'erreur suivante:</font></font></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--&gt; Deploying to production environment<font></font>
--&gt; on host mysite.com<font></font>
  ○ hook pre-setup<font></font>
  ○ running setup<font></font>
  ○ cloning git@github.com:user/repo.git<font></font>
Cloning into '/var/www/app/source'...<font></font>
Permission denied (publickey).<font></font>
fatal: Could not read from remote repository.<font></font>
<font></font>
Please make sure you have the correct access rights and that the repository exists.<font></font>
<font></font>
**Failed to clone**<font></font>
<font></font>
Deploy failed<font></font>
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">… Vous pouvez créer un fichier de configuration ssh. </font><font style="vertical-align: inherit;">C'est un moyen sûr de s'assurer que les bonnes clés ssh sont utilisées pour tout référentiel donné que vous essayez de cloner. </font><font style="vertical-align: inherit;">Voir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://gist.github.com/Protosac/c3fb459b1a942f161f23556f61a67d66&amp;usg=ALkJrhhgpajVaMuMOdDJ-FPedS5voC0FtA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet exemple</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ~/.ssh/config<font></font>
Host alias<font></font>
    HostName myserver.com<font></font>
    User username<font></font>
    IdentityFile ~/.ssh/mykey<font></font>
# Usage: `ssh alias`<font></font>
# Alternative: `ssh -i ~/.ssh/mykey username@myserver.com`<font></font>
<font></font>
Host deployment<font></font>
    HostName github.com<font></font>
    User username<font></font>
    IdentityFile ~/.ssh/github_rsa<font></font>
# Usage:<font></font>
# git@deployment:username/anyrepo.git<font></font>
# This is for cloning any repo that uses that IdentityFile. This is a good way to make sure that your remote cloning commands use the appropriate key<font></font>
</code></pre></div></div>

<h2 id="windows-consideration"><a href="#windows-consideration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Considération Windows</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour
 exécuter le script de déploiement sous Windows, vous devez utiliser un 
shell unix comme bash, nous vous recommandons donc d'installer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://git-scm.com/download/win&amp;usg=ALkJrhjx02_D0rTkBl9_eRf8yxJirhKB7g"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git bash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://babun.github.io/&amp;usg=ALkJrhh4lEtpQalKlDdXncJfy4CJI0R6OA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Babun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou   </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://cygwin.com/install.html&amp;usg=ALkJrhj6XRduGff7qtaOoj-Yyz6nsUjbXA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cygwin</font></font></a></p>

<h2 id="contributing"><a href="#contributing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contribuant</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le module est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2-deploy&amp;usg=ALkJrhjytjJ9ud61ro6U7QDrshWqU2NexA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Unitech/pm2-deploy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
N'hésitez pas à PR pour tout changement ou correctif.</font></font></p>

<center style="margin-top: 28px; margin-bottom: 23px">
<img src="translate_c_data/docker_logo.png" title="Docker PM2 Node.js">
</center>

<h2 id="docker-integration"><a href="#docker-integration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intégration Docker</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous utilisez des conteneurs? </font><font style="vertical-align: inherit;">Nous vous soutenons. </font><font style="vertical-align: inherit;">Commencez dès aujourd'hui à utiliser </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-runtime</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un compagnon idéal pour tirer le meilleur parti de Node.js dans un environnement de production.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'objectif de pm2-runtime est d'encapsuler vos applications dans un environnement de production Node.js approprié. </font><font style="vertical-align: inherit;">Il résout les problèmes majeurs lors de l'exécution d'applications Node.js dans un conteneur tel que:</font></font></p>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Deuxième processus de secours pour une fiabilité d'application élevée</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôle de flux de processus</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillance automatique des applications pour le garder toujours sain d'esprit et performant</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise en charge automatique de la découverte et de la résolution de la carte source</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De
 plus, l'utilisation de PM2 comme couche entre le conteneur et 
l'application apporte de puissantes fonctionnalités PM2 telles que le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier de déclaration d'application</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/log-management/&amp;usg=ALkJrhirkW9n84pp0d2p7YRjqZlHIxXrBw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">système de journaux personnalisable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et d'autres fonctionnalités intéressantes pour gérer votre application Node.js dans un environnement de production.</font></font></p>

<h2 id="use-pm2-inside-containers"><a href="#use-pm2-inside-containers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser PM2 à l'intérieur des conteneurs</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans votre Dockerfile, ajoutez cette ligne pour installer PM2:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RUN npm install pm2 -g
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remplacez ensuite le </font></font><code class="language-plaintext highlighter-rouge">node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">binaire par</font></font><code class="language-plaintext highlighter-rouge">pm2-runtime</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["node", "app.js"]
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["pm2-runtime", "app.js"]
</code></pre></div></div>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous êtes maintenant prêt! </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Votre application Node.js est maintenant encapsulée dans un environnement de production Node.js approprié.</font></font></p>

<h3 id="starting-a-configuration-file"><a href="#starting-a-configuration-file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrer un fichier de configuration</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au
 lieu d'exécuter votre application Node.js brute avec PM2, vous pouvez 
la déclarer dans un fichier de configuration (ou fichier de processus) 
et définir certaines variables de configuration, comme l'activation du 
mode cluster.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créons un fichier écosystème.config.js avec ce contenu:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">exec_mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">cluster</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">instances</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">worker.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">worker</span><span class="dl">'</span>
<span class="p">}]</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toutes les options disponibles sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg#attributes-available"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">répertoriées ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez alors remplacer la </font><font style="vertical-align: inherit;">directive </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par ceci:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["pm2-runtime", "process.yml"]
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour diviser chaque processus dans son propre Docker, vous pouvez utiliser l'option –only [app-name]:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["pm2-runtime", "process.yml", "--only", "APP"]
</code></pre></div></div>

<h3 id="logging-format-option"><a href="#logging-format-option"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option de format de journalisation</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous souhaitez modifier le format de sortie du journal, vous pouvez sélectionner l'une de ces options:</font></font></p>

<ul>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–Json</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : affichera les journaux au format JSON (logstash)</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–Format</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : affichera les journaux au format = style</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–Raw</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : affichera les journaux tels </font><strong><font style="vertical-align: inherit;">quels</font></strong></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour utiliser l'un de ces indicateurs, il vous suffit de les transmettre à pm2-runtime:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["pm2-runtime", "--json", "process.yml"]
</code></pre></div></div>

<h3 id="enabling-graceful-shutdown"><a href="#enabling-graceful-shutdown"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activation de l'arrêt progressif</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque
 le conteneur reçoit un signal d'arrêt, PM2 transmet ce signal à votre 
application permettant de fermer toutes les connexions à la base de 
données, d'attendre que toutes les requêtes aient été traitées ou que 
tout autre traitement final soit terminé avant un arrêt progressif 
réussi.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attraper un signal d'arrêt est simple. </font><font style="vertical-align: inherit;">Vous
 devez ajouter un écouteur dans vos applications Node.js et exécuter 
tout ce qui est nécessaire avant d'arrêter l'application:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">SIGINT</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">db</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="nx">err</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">);</span>
   <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut, PM2 attend 1600 ms avant d'envoyer un signal SIGKILL final. </font><font style="vertical-align: inherit;">Vous pouvez modifier ce délai en définissant l' </font></font><code class="language-plaintext highlighter-rouge">kill_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option dans le fichier de configuration de votre application.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la gestion de l'état des applications </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://localhost:4000/docs/usage/signals-clean-restart/&amp;usg=ALkJrhiJ7MRp_yE1cJ_ek6SdBQP4TPIyrw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a></p>

<h3 id="development-environment"><a href="#development-environment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environnement de développement</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous
 pouvez demander aux développeurs de programmer à l'intérieur d'un 
conteneur pour conserver un environnement cohérent entre le 
développement, le test et la production.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le remplacement de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-runtime</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-dev activera</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les fonctionnalités de surveillance et de redémarrage. </font><font style="vertical-align: inherit;">Ceci
 est assez intéressant dans un conteneur de développement lorsque les 
fichiers hôtes sont exposés au conteneur sous forme de VOLUME.</font></font></p>

<h3 id="using-pm2io"><a href="#using-pm2io"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de PM2.io</font></font></a></h3>

<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://keymetrics.io/&amp;usg=ALkJrhiMvWfcH0Zx_N19ge_fR2LN6OhrbA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keymetrics.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 est un service de surveillance construit au-dessus de PM2 qui permet de
 surveiller et de gérer facilement les applications (logs, redémarrage, 
surveillance des exceptions…). </font><font style="vertical-align: inherit;">Une fois que vous avez créé un bucket sur Keymetrics, vous obtiendrez une clé publique et une clé secrète.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour activer la surveillance de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keymetrics</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec </font><strong><font style="vertical-align: inherit;">pm2-runtime</font></strong><font style="vertical-align: inherit;"> , vous pouvez utiliser l'option CLI </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–public XXX</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–secret YYY</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou transmettre les variables d'environnement </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEYMETRICS_PUBLIC</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KEYMETRICS_SECRET</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple avec les options CLI via un Dockerfile:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CMD ["pm2-runtime", "--public", "XXX", "--secret", "YYY", "process.yml"]
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via des variables d'environnement:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENV PM2_PUBLIC_KEY=XXX<font></font>
ENV PM2_SECRET_KEY=YYY<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via la commande d'exécution Docker:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --net host -e "PM2_PUBLIC_KEY=XXX" -e "PM2_SECRET_KEY=XXX" &lt;...&gt;
</code></pre></div></div>

<h2 id="pm2-runtime-helper"><a href="#pm2-runtime-helper"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aide à l'exécution pm2</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici l'assistant d'exécution pm2:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; pm2-runtime -h<font></font>
<font></font>
  Usage: pm2-runtime app.js<font></font>
<font></font>
  pm2-runtime is a drop-in replacement node.js binary with some interesting production features<font></font>
<font></font>
  Options:<font></font>
<font></font>
    -V, --version              output the version number<font></font>
    -i --instances &lt;number&gt;    launch [number] of processes automatically load-balanced. Increase overall performances and performance stability.<font></font>
    --secret [key]             [MONITORING] keymetrics secret key<font></font>
    --public [key]             [MONITORING] keymetrics public key<font></font>
    --machine-name [name]      [MONITORING] keymetrics machine name<font></font>
    --raw                      raw log output<font></font>
    --json                     output logs in json format<font></font>
    --format                   output logs formated like key=val<font></font>
    --delay &lt;seconds&gt;          delay start of configuration file by &lt;seconds&gt;<font></font>
    --web [port]               launch process web api on [port] (default to 9615)<font></font>
    --only &lt;application-name&gt;  only act on one application of configuration<font></font>
    --no-auto-exit             do not exit if all processes are errored/stopped or 0 apps launched<font></font>
    --env [name]               inject env_[name] env variables in process config file<font></font>
    --watch                    watch and restart application on file change<font></font>
    --error &lt;path&gt;             error log file destination (default disabled)<font></font>
    --output &lt;path&gt;            output log file destination (default disabled)<font></font>
    -h, --help                 output usage information<font></font>
<font></font>
<font></font>
  Commands:<font></font>
<font></font>
    *<font></font>
    start &lt;app.js|json_file&gt;  start an application or json ecosystem file<font></font>
</code></pre></div></div>

<h2 id="when-starting-a-new-process"><a href="#when-starting-a-new-process"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors du démarrage d'un nouveau processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 injectera l'environnement dans cet ordre lors du </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">démarrage d'</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un nouveau processus:</font></font></p>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La CLI PM2 utilisera d'abord son environnement afin que l'environnement actuel de votre shell soit injecté.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 injectera alors l'environnement que vous pourrez configurer avec le fichier écosystème:</font></font></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myapp</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">watch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici, vous pouvez voir que PM2 remplacera l'environnement actuel à ajouter </font></font><code class="language-plaintext highlighter-rouge">NODE_ENV=development</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mais vous pouvez également définir différents environnements comme celui-ci:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myapp</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">watch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">PORT</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span>
        <span class="p">},</span>
        <span class="na">env_production</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">PORT</span><span class="dl">"</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ici, l'environnement par défaut est dans </font></font><code class="language-plaintext highlighter-rouge">env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais vous pouvez décider de l'utiliser </font></font><code class="language-plaintext highlighter-rouge">env_production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en utilisant </font></font><code class="language-plaintext highlighter-rouge">pm2 start ecosystem.config.js --env production</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous
 pouvez définir autant d'environnements que vous le souhaitez, 
rappelez-vous simplement que vous devez passer le nom de l'environnement
 (après </font></font><code class="language-plaintext highlighter-rouge">env_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) avec </font><font style="vertical-align: inherit;">lequel </font><font style="vertical-align: inherit;">vous souhaitez utiliser </font></font><code class="language-plaintext highlighter-rouge">--env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h2 id="specific-environment-variables"><a href="#specific-environment-variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variables d'environnement spécifiques</font></font></a></h2>

<h3 id="node_app_instance-pm2-25-minimum"><a href="#node_app_instance-pm2-25-minimum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NODE_APP_INSTANCE (PM2 2.5 minimum)</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a la </font></font><code class="language-plaintext highlighter-rouge">NODE_APP_INSTANCE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable
 d'environnement qui est utilisée pour faire la différence entre les 
processus, par exemple, vous pouvez vouloir exécuter un cronjob 
uniquement sur un processus, vous pouvez simplement vérifier si </font></font><code class="language-plaintext highlighter-rouge">process.env.NODE_APP_INSTANCE === '0'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Deux processus ne peuvent jamais avoir le même numéro, c'est toujours vrai après les </font><font style="vertical-align: inherit;">commandes </font></font><code class="language-plaintext highlighter-rouge">pm2 restart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">pm2 scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez avoir des problèmes avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/2045&amp;usg=ALkJrhi3jjXziNx95uAMG16pm4cp4fLRKA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-config</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec le </font></font><code class="language-plaintext highlighter-rouge">NODE_APP_INSTANCE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom, vous pouvez donc le renommer avec des </font></font><code class="language-plaintext highlighter-rouge">instance_var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myapp</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">watch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">instance_var</span><span class="p">:</span> <span class="dl">'</span><span class="s1">INSTANCE_ID</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">PORT</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span>
        <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans ce cas, la variable aura le même comportement mais sera dans </font></font><code class="language-plaintext highlighter-rouge">process.env.INSTANCE_ID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h4 id="increment_var-pm2-25-minimum"><a href="#increment_var-pm2-25-minimum"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">increment_var (PM2 2.5 minimum)</font></font></a></h4>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe une option pour demander à PM2 d'incrémenter une variable d'environnement pour chaque instance lancée, par exemple:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">myapp</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">instances</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">exec_mode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cluster</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">watch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">increment_var</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">PORT</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">PORT</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">NODE_ENV</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span>
        <span class="p">}</span>
      <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans cet exemple, si je cours </font></font><code class="language-plaintext highlighter-rouge">pm2 start ecosystem.config.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>
<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 verra que je veux incrémenter la </font></font><code class="language-plaintext highlighter-rouge">PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable pour chaque instance</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il verra que j'ai défini la valeur par défaut à </font></font><code class="language-plaintext highlighter-rouge">3000</code></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La première instance aura </font></font><code class="language-plaintext highlighter-rouge">process.env.PORT = 3000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et la seconde</font></font><code class="language-plaintext highlighter-rouge">process.env.PORT = 3001</code></li>
</ul>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REMARQUE</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Il s'incrémentera également lors de la mise à l'échelle en utilisant </font></font><code class="language-plaintext highlighter-rouge">pm2 scale myapp 4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, les deux nouvelles instances auront </font></font><code class="language-plaintext highlighter-rouge">3002</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">3003</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme </font></font><code class="language-plaintext highlighter-rouge">PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous voulez juste une nouvelle installation de PM2 sans configurer Node.Js, pm2 est disponible en tant que </font></font><code class="language-plaintext highlighter-rouge">.deb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package!</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est conçu pour fonctionner avec la dernière version de support à long terme d'ubuntu.</font></font></p>

<h2 id="installation-1"><a href="#installation-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></a></h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Add the PM2 repository signing key</span>
<span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> keyserver.ubuntu.com <span class="nt">--recv</span> D1EA2D4C<font></font>
<font></font>
<span class="c"># 2. Add the PM2 repository</span>
<span class="nb">echo</span> <span class="s2">"deb http://apt.pm2.io/ubuntu stable main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/pm2.list<font></font>
<font></font>
<span class="c"># 3. Update list of available packages</span>
<span class="nb">sudo </span>apt-get update<font></font>
<font></font>
<span class="c"># 4. Install PM2</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>pm2
</code></pre></div></div>

<h2 id="log-management"><a href="#log-management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion des journaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 vous permet de gérer facilement les logs de votre application. </font><font style="vertical-align: inherit;">Vous pouvez afficher les logs provenant de toutes vos applications en temps réel, les vider et les recharger. </font><font style="vertical-align: inherit;">Il
 existe également différentes manières de configurer la manière dont PM2
 gérera vos logs (séparés dans différents fichiers, fusionnés, avec 
horodatage…) sans rien modifier dans votre code.</font></font></p>

<h2 id="application-log-options"><a href="#application-log-options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options du journal des applications</font></font></a></h2>

<h3 id="cli-1"><a href="#cli-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de l'exécution, </font></font><code class="language-plaintext highlighter-rouge">pm2 start app.js [OPTIONS]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous pouvez transmettre l'une de ces options à la CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-l</span> <span class="nt">--log</span> <span class="o">[</span>path]              specify filepath to output both out and error logs
<span class="nt">-o</span> <span class="nt">--output</span> &lt;path&gt;           specify out log file
<span class="nt">-e</span> <span class="nt">--error</span> &lt;path&gt;            specify error log file
<span class="nt">--time</span>                       prefix logs with standard formated timestamp
<span class="nt">--log-date-format</span> &lt;format&gt;   prefix logs with custom formated timestamp
<span class="nt">--log-type</span> &lt;<span class="nb">type</span><span class="o">&gt;</span>            specify log output style <span class="o">(</span>raw by default, or json<span class="o">)</span>
<span class="nt">--merge-logs</span>                 when running mutiple process with same app name, <span class="k">do </span>not <span class="nb">split </span>file by <span class="nb">id</span>
</code></pre></div></div>

<h3 id="ecosystem"><a href="#ecosystem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écosystème</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers Ecosystem,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez passer toutes les mêmes options:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>modules.exports = [{<font></font>
  script: 'echo.js',<font></font>
  error_file: 'err.log',<font></font>
  out_file: 'out.log',<font></font>
  log_file: 'combined.log',<font></font>
  time: true<font></font>
}]<font></font>
</code></pre></div></div>

<h2 id="displaying-logs"><a href="#displaying-logs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Affichage des journaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Affichage des journaux d'un processus spécifié ou de tous les processus en temps réel:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Display option for pm2 logs command</span>
pm2 logs <span class="nt">-h</span><font></font>
<font></font>
<span class="c"># Display all apps logs</span><font></font>
pm2 logs<font></font>
<font></font>
<span class="c"># Display only `api` application logs</span><font></font>
pm2 logs api<font></font>
<font></font>
<span class="c"># Display X lines of api log file</span>
pm2 logs big-api <span class="nt">--lines</span> 1000
</code></pre></div></div>

<h2 id="logs-output"><a href="#logs-output"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortie des journaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également afficher les journaux dans différents formats:</font></font></p>

<h3 id="json-output"><a href="#json-output"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortie JSON</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journaux de sortie au format json avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 logs <span class="nt">--json</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour chaque ligne d'application, ces métadonnées seront imprimées:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"echo</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">                     </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">actual</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">`console.log`</span><span class="w">
   </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-02-06T14:51:38.896Z"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">timestamp</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message</span><span class="p">,</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">formated</span><span class="w">
   </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"out"</span><span class="p">,</span><span class="w">                           </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">logs</span><span class="p">,</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">`err`</span><span class="p">,</span><span class="w"> </span><span class="err">`out`</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">`PM</span><span class="mi">2</span><span class="err">`</span><span class="w">
   </span><span class="nl">"process_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">                         </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">process</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">PM</span><span class="mi">2</span><span class="w">
   </span><span class="nl">"app_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"one-echo"</span><span class="w">                   </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">application</span><span class="w"> </span><span class="err">name</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="formatted-output"><a href="#formatted-output"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortie formatée</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici une autre façon d'imprimer les journaux:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 logs <span class="nt">--format</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela produira:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>timestamp=2019-06-21-19:03:58-0700 app=stdout id=9 type=out message=ooo<font></font>
timestamp=2019-06-21-19:03:58-0700 app=stdout id=9 type=out message=ooo<font></font>
timestamp=2019-06-21-19:03:58-0700 app=stdout id=9 type=out message=ooo<font></font>
timestamp=2019-06-21-19:03:58-0700 app=stdout id=9 type=out message=ooo<font></font>
timestamp=2019-06-21-19:03:58-0700 app=log id=10 type=out message=out<font></font>
timestamp=2019-06-21-19:03:58-0700 app=log id=10 type=error message=err<font></font>
</code></pre></div></div>

<h2 id="flushing-logs"><a href="#flushing-logs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rinçage des journaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela videra tous les journaux d'application actuels gérés par PM2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 flush
</code></pre></div></div>

<h2 id="size-limited-log-rotation"><a href="#size-limited-log-rotation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotation des grumes limitée par taille</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également installer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/log-management/&amp;usg=ALkJrhiNbs9hZSssuCRYYsGaoI7jhf9YXw#pm2-logrotate-module"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-logrotate</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour faire pivoter et conserver automatiquement tous les fichiers journaux en utilisant un espace limité sur le disque.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour l'installer:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 <span class="nb">install </span>pm2-logrotate
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur pm2-logrotate </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/pm2-hive/pm2-logrotate&amp;usg=ALkJrhgjPvesrO2feoDgGmaVPJuXQvN5qQ#configure"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a></p>

<h2 id="reloading-all-logs"><a href="#reloading-all-logs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recharger tous les journaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le rechargement des journaux est particulièrement utile pour Logrotate ou tout autre système de journaux rotatifs. </font><font style="vertical-align: inherit;">Vous pouvez recharger les journaux en les envoyant </font></font><code class="language-plaintext highlighter-rouge">SIGUSR2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">au processus PM2. </font><font style="vertical-align: inherit;">Vous pouvez également recharger tous les journaux via la ligne de commande avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 reloadLogs
</code></pre></div></div>

<h3 id="disabling-log-suffix"><a href="#disabling-log-suffix"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactivation du suffixe de journal</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez l' </font></font><code class="language-plaintext highlighter-rouge">--merge-logs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option pour désactiver le suffixe automatique des fichiers journaux.</font></font></p>

<h3 id="disable-logging"><a href="#disable-logging"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactiver la journalisation</font></font></a></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{<font></font>
  "out_file": "/dev/null",<font></font>
  "error_file": "/dev/null"<font></font>
}<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez fournir </font></font><code class="language-plaintext highlighter-rouge">/dev/null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">NULL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en sortie de journaux (ne dépendant pas de la plate-forme, ils sont des chaînes codées).</font></font></p>

<h3 id="setting-up-a-native-logrotate"><a href="#setting-up-a-native-logrotate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer un logrotate natif</font></font></a></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>pm2 logrotate <span class="nt">-u</span> user
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela écrira une configuration logrotate de base </font></font><code class="language-plaintext highlighter-rouge">/etc/logrotate.d/pm2-user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui ressemblera à ceci:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/user/.pm2/pm2.log /home/user/.pm2/logs/*.log {<font></font>
        rotate 12<font></font>
        weekly<font></font>
        missingok<font></font>
        notifempty<font></font>
        compress<font></font>
        delaycompress<font></font>
        create 0640 user user<font></font>
}<font></font>
</code></pre></div></div>

<h2 id="max-memory-threshold-auto-reload"><a href="#max-memory-threshold-auto-reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recharge automatique du seuil de mémoire maximal</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2
 permet de recharger (repli automatique pour redémarrer si pas en 
cluster) une application basée sur une limite de mémoire / Veuillez 
noter que le worker interne PM2 (qui vérifie la mémoire), démarre toutes
 les 30 secondes, vous devrez donc peut-être attendre un peu avant votre
 Le processus est redémarré automatiquement après avoir atteint le seuil
 de mémoire.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start api.js <span class="nt">--max-memory-restart</span> 300M
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier de configuration (écosystème.config.js):</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports <span class="o">=</span> <span class="o">{</span>
  apps: <span class="o">[{</span>
    name: <span class="s1">'api'</span>,<font></font>
    script: <span class="s1">'api.js'</span>,<font></font>
    max_memory_restart: <span class="s1">'300M'</span>
  <span class="o">}]</span>
<span class="o">}</span>
</code></pre></div></div>

<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: les</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unités peuvent être K (ilobyte), M (egabyte), G (igabyte).</font></font></p>

<h2 id="monitoring-cpumemory"><a href="#monitoring-cpumemory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Surveillance du processeur / de la mémoire</font></font></a></h2>

<center>
<img src="translate_c_data/pm2-monit.png" title="Monit PM2">
</center>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 vous offre un moyen simple de surveiller l'utilisation des ressources de votre application. </font><font style="vertical-align: inherit;">Vous pouvez surveiller la mémoire et le processeur facilement et directement depuis votre terminal:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 monit
</code></pre></div></div>

<h2 id="pm2io"><a href="#pm2io"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2.io</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous gérez votre application Node.js avec PM2, nous vous invitons à essayer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.io/&amp;usg=ALkJrhgujPlYQc2dzmor3GRuIXGA9wPL2A"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il facilite plus que jamais la surveillance et la gestion des applications sur les serveurs.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N'hésitez pas à l'essayer:
 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://app.pm2.io/&amp;usg=ALkJrhgMmeeMBAk2VAJ9y1QKVeWEv1stJw#/register"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">découvrez le tableau de bord de surveillance pour PM2</font></font></a></p>

<h2 id="memory-threshold"><a href="#memory-threshold"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seuil de mémoire</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 permet de recharger (repli automatique pour redémarrer) une application en fonction d'une limite de mémoire. </font><font style="vertical-align: inherit;">Veuillez
 noter que le worker interne PM2 (qui vérifie la mémoire et les éléments
 associés), démarre toutes les 30 secondes, vous devrez donc peut-être 
attendre un peu avant que votre processus ne redémarre automatiquement 
après avoir atteint le seuil de mémoire.</font></font></p>

<h3 id="cli-2"><a href="#cli-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></a></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start big-array.js <span class="nt">--max-memory-restart</span> 20M
</code></pre></div></div>

<h3 id="via-ecosystem-file"><a href="#via-ecosystem-file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via un fichier d'écosystème</font></font></a></h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">max-mem</span><span class="dl">'</span><span class="p">,</span>
   <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">big-array.js</span><span class="dl">'</span><span class="p">,</span>
   <span class="na">max_memory_restart</span><span class="p">:</span> <span class="dl">'</span><span class="s1">100M</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="programmatic"><a href="#programmatic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmatique</font></font></a></h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">pm2</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span>
  <span class="na">name</span>               <span class="p">:</span> <span class="dl">"</span><span class="s2">max_mem</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">script</span>             <span class="p">:</span> <span class="dl">"</span><span class="s2">big-array.js</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">max_memory_restart</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">20M</span><span class="dl">"</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">proc</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Processing</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="units"><a href="#units"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unités</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les unités peuvent être K (ilobyte), M (egabyte), G (igabyte).</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>50M<font></font>
50K<font></font>
1G<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2
 peut être utilisé par programme, ce qui signifie que vous pouvez 
intégrer un gestionnaire de processus directement dans votre code, 
générer des processus, les maintenir en vie même si le script principal 
est quitté.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est également utile lorsque vous déployez une application Node.js </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/&amp;usg=ALkJrhjYgDvOZy4U3evk6_Atj2sm_c2cyg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans n'importe quel type de fournisseur de cloud / PaaS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="simple-example"><a href="#simple-example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple simple</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet exemple vous montre comment démarrer app.js avec certains attributs de configuration. </font><font style="vertical-align: inherit;">Les éléments passés pour démarrer sont les mêmes que ceux que vous pouvez déclarer dans un </font><font style="vertical-align: inherit;">fichier de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuration JS / JSON</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Si votre script ne se </font></font><code class="language-plaintext highlighter-rouge">pm2.disconnect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">termine </font><font style="vertical-align: inherit;">pas de lui-même, assurez-vous que vous l'avez appelé </font><font style="vertical-align: inherit;">à la fin.</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>pm2 <span class="nt">--save</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pm2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">pm2</span><span class="dl">'</span><span class="p">);</span><font></font>
<font></font>
<span class="nx">pm2</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
  <span class="p">}</span><font></font>
  <font></font>
  <span class="nx">pm2</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span>
    <span class="na">script</span>    <span class="p">:</span> <span class="dl">'</span><span class="s1">app.js</span><span class="dl">'</span><span class="p">,</span>         <span class="c1">// Script to be run</span>
    <span class="na">exec_mode</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">cluster</span><span class="dl">'</span><span class="p">,</span>        <span class="c1">// Allows your app to be clustered</span>
    <span class="na">instances</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>                <span class="c1">// Optional: Scales your app by 4</span>
    <span class="na">max_memory_restart</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">100M</span><span class="dl">'</span>   <span class="c1">// Optional: Restarts your app if it reaches 100Mo</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">apps</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pm2</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>   <span class="c1">// Disconnects from PM2</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="programmatic-api"><a href="#programmatic-api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API programmatique</font></font></a></h2>

<p><code class="language-plaintext highlighter-rouge">npm install pm2 --save</code></p>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.connect(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Soit se connecte à un démon pm2 en cours d'exécution («Dieu»), soit en lance et en démonise un. </font><font style="vertical-align: inherit;">Une fois lancé, le processus pm2 continuera à s'exécuter après la sortie du script.</font></font><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.connect(noDaemonMode, errback)</code></strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">noDaemonMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
 (Par défaut: false) Si true est passé pour le premier argument, pm2 ne 
sera pas exécuté en tant que démon et mourra à la fermeture du script 
associé. </font><font style="vertical-align: inherit;">Par défaut, pm2 reste actif après la fermeture de votre script. </font><font style="vertical-align: inherit;">Si
 pm2 est déjà en cours d'exécution, votre script sera lié au démon 
existant mais mourra une fois que votre processus sera terminé.</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">errback(error)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Appelé lorsque vous avez terminé de vous connecter ou de lancer le processus démon pm2.</font></font></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.start(options, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Démarre un script qui sera géré par pm2.</font></font><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.start(jsonConfigFile, errback)</code></strong><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.start(script, errback)</code></strong><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.start(script, options, errback)</code></strong><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.start(script, jsonConfigFile, errback)</code></strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le chemin du script à exécuter.</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">jsonConfigFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le chemin vers un fichier JSON qui peut contenir les mêmes options que le </font></font><code class="language-plaintext highlighter-rouge">options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètre.</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">errback(err,proc)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Une erreur appelée lorsque le </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a été démarré. </font><font style="vertical-align: inherit;">Le </font></font><code class="language-plaintext highlighter-rouge">proc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètre sera un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/soyuka/pm2-notify&amp;usg=ALkJrhi9zwgL4zhfR28UimeGmGmwDdg1eg#templating"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objet de processus pm2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Un objet avec les options suivantes (des descriptions supplémentaires de ces options sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhi8qrlcKoTYUwpzZsC5lOqsKvAx9Q#graceful-reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):
    </font></font><ul>
      <li><code class="language-plaintext highlighter-rouge">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-
 Un nom arbitraire qui peut être utilisé pour interagir avec (par 
exemple redémarrer) le processus plus tard dans d'autres commandes. </font><font style="vertical-align: inherit;">Par défaut, le nom du script sans son extension (par exemple </font></font><code class="language-plaintext highlighter-rouge">"testScript"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour </font></font><code class="language-plaintext highlighter-rouge">"testScript.js"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le chemin du script à exécuter.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Une chaîne ou un tableau de chaînes composé d'arguments à transmettre au script.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">interpreterArgs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Une chaîne ou un tableau de chaînes composé d'arguments avec lesquels appeler le processus d'interprétation. </font><font style="vertical-align: inherit;">Par exemple, «–harmonie» ou [»–harmonie», «- debug»]. </font><font style="vertical-align: inherit;">S'applique uniquement si </font></font><code class="language-plaintext highlighter-rouge">interpreter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est autre chose que «aucun» (son «nœud» par défaut).</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">cwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le répertoire de travail avec lequel démarrer le processus.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">"~/.pm2/logs/app_name-out.log"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le chemin vers un fichier auquel ajouter la sortie stdout. </font><font style="vertical-align: inherit;">Peut être le même fichier que </font></font><code class="language-plaintext highlighter-rouge">error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">"~/.pm2/logs/app_name-error.err"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le chemin vers un fichier auquel ajouter la sortie stderr. </font><font style="vertical-align: inherit;">Peut être le même fichier que </font></font><code class="language-plaintext highlighter-rouge">output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">logDateFormat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le format d'affichage des horodatages du journal (par exemple «AAAA-MM-JJ HH: mm Z»). </font><font style="vertical-align: inherit;">Le format est un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://momentjs.com/docs/&amp;usg=ALkJrhiadTR_d-22BmyjuJq6WTDQwqmVtg#/displaying/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format d'affichage de moment</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">pid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">"~/.pm2/pids/app_name-id.pid"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le chemin vers un fichier pour écrire le pid du processus démarré. </font><font style="vertical-align: inherit;">Le fichier sera écrasé. </font><font style="vertical-align: inherit;">Notez
 que le fichier n'est en aucun cas utilisé par pm2 et que l'utilisateur 
est donc libre de manipuler ou de supprimer ce fichier à tout moment. </font><font style="vertical-align: inherit;">Le fichier sera supprimé lorsque le processus sera arrêté ou le démon tué.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">minUptime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le temps de fonctionnement minimum du script avant qu'il ne soit considéré comme démarré avec succès.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">maxRestarts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le nombre maximum de fois consécutives qu'un script sera redémarré s'il se termine en moins de </font></font><code class="language-plaintext highlighter-rouge">min_uptime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">maxMemoryRestart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Si </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l 'utilisation de la mémoire de </font><font style="vertical-align: inherit;">définit et </font><font style="vertical-align: inherit;">va autour du nombre configuré, pm2 redémarre le </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Utilise
 des suffixes conviviaux: «K» pour les kilo-octets, «M» pour les 
mégaoctets, «G» pour les gigaoctets », etc. Par exemple,« 150M ».</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">killTimeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">1600</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le nombre de millisecondes à attendre après qu'une </font><font style="vertical-align: inherit;">commande </font></font><code class="language-plaintext highlighter-rouge">stop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">restart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">émette un </font></font><code class="language-plaintext highlighter-rouge">SIGINT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signal pour tuer le script de force avec un </font></font><code class="language-plaintext highlighter-rouge">SIGKILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signal.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">restartDelay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut </font></font><code class="language-plaintext highlighter-rouge">0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:) Nombre de millsecondes à attendre avant de redémarrer un script qui s'est arrêté.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">interpreter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">'node'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'interpréteur de votre script (par exemple «python», «ruby», «bash», etc.). </font><font style="vertical-align: inherit;">La valeur «aucun» exécutera le «script» en tant qu'exécutable binaire.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">execMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">'fork'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si défini sur 'cluster', activera le clustering (exécutant plusieurs instances de </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/cluster-mode/&amp;usg=ALkJrhjucD1URHOVOi1eTBHz550JWmArCQ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir ici pour plus de détails</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">instances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut:)</font></font><code class="language-plaintext highlighter-rouge">1</code></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Combien d'instances de </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer. </font><font style="vertical-align: inherit;">Uniquement pertinent dans </font></font><code class="language-plaintext highlighter-rouge">exec_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«cluster».</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">mergeLogs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- (Par défaut:) </font></font><code class="language-plaintext highlighter-rouge">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si true, fusionne les fichiers journaux de toutes les instances de </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans un journal stderr et un journal stdout. </font><font style="vertical-align: inherit;">S'applique uniquement en mode «cluster». </font><font style="vertical-align: inherit;">Par
 exemple, si vous avez 4 instances de 'test.js' démarrées via pm2, vous 
auriez normalement 4 fichiers journaux stdout et 4 fichiers journaux 
stderr, mais avec cette option définie sur true, vous n'auriez qu'un 
fichier stdout et un fichier stderr .</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Si défini sur </font></font><code class="language-plaintext highlighter-rouge">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, l'application sera redémarrée lors de la modification du </font></font><code class="language-plaintext highlighter-rouge">script</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">force</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><code class="language-plaintext highlighter-rouge">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par
 défaut:) Par défaut, pm2 ne démarrera un script que si ce script n'est 
pas déjà en cours d'exécution (un script est un chemin vers une 
application, pas le nom d'une application déjà en cours d'exécution). </font><font style="vertical-align: inherit;">Si </font></font><code class="language-plaintext highlighter-rouge">force</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est défini sur true, pm2 démarrera une nouvelle instance de ce script.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">autorestart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Par défaut </font></font><code class="language-plaintext highlighter-rouge">true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Si </font></font><code class="language-plaintext highlighter-rouge">false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pm2 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentera </font><em><font style="vertical-align: inherit;">pas</font></em><font style="vertical-align: inherit;"> de le redémarrer après une réussite ou un échec du processus.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">cron</code></li>
      <li><code class="language-plaintext highlighter-rouge">executeCommand</code></li>
      <li><code class="language-plaintext highlighter-rouge">write</code></li>
      <li><code class="language-plaintext highlighter-rouge">sourceMapSupport</code></li>
      <li><code class="language-plaintext highlighter-rouge">disableSourceMapSupport</code></li>
    </ul>
  </li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.disconnect()</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Se déconnecte du démon pm2.</font></font></p>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.stop(process, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Arrête un processus mais laisse les métadonnées du processus dans la liste de pm2. </font></font><em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir ici comment pm2 arrête un processus</font></font></a></em><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.restart(process, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Arrête et redémarre le processus. </font></font><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.delete(process, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Arrête le processus et le supprime de la liste de pm2. </font><font style="vertical-align: inherit;">Le processus ne sera plus accessible par son </font></font><code class="language-plaintext highlighter-rouge">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.reload(process, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Redémarrage progressif sans temps d'arrêt. </font><font style="vertical-align: inherit;">Au moins un processus continuera à s'exécuter à tout moment car chaque instance est redémarrée individuellement. </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fonctionne uniquement pour les scripts démarrés en mode cluster. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhi8qrlcKoTYUwpzZsC5lOqsKvAx9Q#reload-without-downtime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir ici pour plus de détails</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></em><br>
<strong><code class="language-plaintext highlighter-rouge">pm2.gracefulReload(process, options, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Envoie au processus un message d'arrêt avant de commencer </font></font><code class="language-plaintext highlighter-rouge">reload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhi8qrlcKoTYUwpzZsC5lOqsKvAx9Q#graceful-reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir ici pour plus de détails</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">process</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Peut être soit </font></font><code class="language-plaintext highlighter-rouge">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comme indiqué dans le </font></font><code class="language-plaintext highlighter-rouge">pm2.start</code> <code class="language-plaintext highlighter-rouge">options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, un identifiant de processus, soit la chaîne «all» pour indiquer que tous les scripts doivent être redémarrés.</font></font></li>
  <li><code class="language-plaintext highlighter-rouge">options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - (Facultatif) Un objet avec les options suivantes:
    </font></font><ul>
      <li><code class="language-plaintext highlighter-rouge">updateEnv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - (Par défaut: false) Si true est passé, pm2 rechargera son 
environnement à partir de process.env avant de recharger votre 
processus.</font></font></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">errback(err, proc)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.killDaemon(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Tue le démon pm2 (identique à </font></font><code class="language-plaintext highlighter-rouge">pm2 kill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Notez que lorsque le démon est tué, tous ses processus sont également tués. </font><font style="vertical-align: inherit;">Notez également que vous devez toujours vous déconnecter explicitement du démon même après l'avoir tué.</font></font></p>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.describe(process,errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Renvoie diverses informations sur un processus: par exemple quels fichiers stdout / stderr et pid sont utilisés.</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, processDescription)</code></li>
  <li><code class="language-plaintext highlighter-rouge">processDescription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Un objet avec des informations sur le processus. </font><font style="vertical-align: inherit;">Contient les propriétés:
    </font></font><ul>
      <li><code class="language-plaintext highlighter-rouge">name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le nom donné dans la </font></font><code class="language-plaintext highlighter-rouge">start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande d' </font><font style="vertical-align: inherit;">origine </font><font style="vertical-align: inherit;">.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">pid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le pid du processus.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">pm_id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le pid pour le </font></font><code class="language-plaintext highlighter-rouge">pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processus du démon de Dieu.</font></font></li>
      <li><code class="language-plaintext highlighter-rouge">monit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Un objet contenant:
        </font></font><ul>
          <li><code class="language-plaintext highlighter-rouge">memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le nombre d'octets que le processus utilise.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">cpu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le pourcentage de CPU actuellement utilisé par le processus.</font></font></li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">pm2_env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- La liste des variables de chemin dans l'environnement du processus. </font><font style="vertical-align: inherit;">Ces variables comprennent:
        </font></font><ul>
          <li><code class="language-plaintext highlighter-rouge">pm_cwd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le répertoire de travail du processus.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">pm_out_log_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le chemin du fichier journal stdout.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">pm_err_log_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le chemin du fichier journal stderr.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">exec_interpreter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - L'interprète utilisé.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">pm_uptime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - La disponibilité du processus.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">unstable_restarts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le nombre de redémarrages instables que le processus a traversés.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">restart_time</code></li>
          <li><code class="language-plaintext highlighter-rouge">status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - «en ligne», «arrêt», «arrêté», «lancement», «erreur» ou «statut de lancement unique»</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">instances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le nombre d'instances en cours d'exécution.</font></font></li>
          <li><code class="language-plaintext highlighter-rouge">pm_exec_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Le chemin du script exécuté dans ce processus.</font></font></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.list(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Obtient la liste des processus en cours d'exécution gérés par pm2.</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, processDescriptionList)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le </font></font><code class="language-plaintext highlighter-rouge">processDescriptionList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètre contiendra une liste d' </font></font><code class="language-plaintext highlighter-rouge">processDescription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objets comme défini sous </font></font><code class="language-plaintext highlighter-rouge">pm2.describe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.dump(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Ecrit la liste des processus dans un fichier json au chemin de la 
variable d'environnement DUMP_FILE_PATH («~ / .pm2 / dump.pm2» par 
défaut).</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.flush(process,errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Vide les journaux.</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.dump(errback)</code></strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.reloadLogs(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fait pivoter</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les fichiers journaux. </font><font style="vertical-align: inherit;">Le nouveau fichier journal aura un numéro plus élevé (le format par défaut étant </font></font><code class="language-plaintext highlighter-rouge">${process.name}-${out|err}-${number}.log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.launchBus(errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ouvre un bus de messages.</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, bus)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Le </font></font><code class="language-plaintext highlighter-rouge">bus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera un </font><font style="vertical-align: inherit;">objet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/tj/axon&amp;usg=ALkJrhhVq_zDgP7YfrnIOwtgk_VDGwLE_w#pubemitter--subemitter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Axon Sub Emitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisé pour écouter et envoyer des événements.</font></font></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.sendSignalToProcessName(signal, process, errback)</code></strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">pm2.startup(platform, errback)</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Enregistre le script en tant que processus qui démarrera au démarrage de la machine. </font><font style="vertical-align: inherit;">La plate-forme peut actuellement être: «ubuntu», «centos», «redhat», «gentoo», «systemd», «darwin» ou «amazon». </font><font style="vertical-align: inherit;">La liste des processus actuels sera sauvegardée et sauvegardée pour résurrection au redémarrage.</font></font></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">errback(err, result)</code></li>
</ul>

<h2 id="send-message-to-process"><a href="#send-message-to-process"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envoyer un message pour traiter</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponible en PM2 0.15.11&gt;</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-call.js:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">pm2</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">pm2</span><span class="p">.</span><span class="nx">sendDataToProcessId</span><span class="p">({</span>
    <span class="na">type</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">process:msg</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span> <span class="p">:</span> <span class="p">{</span>
      <span class="na">some</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">hello</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="na">id</span>   <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// id of procces from "pm2 list" command or from pm2.list(errback) method</span>
    <span class="na">topic</span><span class="p">:</span> <span class="dl">'</span><span class="s1">some topic</span><span class="dl">'</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">});</span>
<span class="p">});</span><font></font>
<font></font>
<span class="nx">pm2</span><span class="p">.</span><span class="nx">launchBus</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">bus</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">pm2_bus</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">process:msg</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">packet</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">packet</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">success</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">packet</span><span class="p">.</span><span class="nx">process</span><span class="p">.</span><span class="nx">pm_id</span><span class="p">.</span><span class="nx">should</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="nx">proc1</span><span class="p">.</span><span class="nx">pm2_env</span><span class="p">.</span><span class="nx">pm_id</span><span class="p">);</span>
    <span class="nx">done</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-app.js:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">packet</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
    <span class="na">type</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">process:msg</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">data</span> <span class="p">:</span> <span class="p">{</span>
     <span class="na">success</span> <span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
 <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2
 est livré avec un outil de développement pratique qui vous permet de 
démarrer une application et de la redémarrer lors d'un changement de 
fichier:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Start your application in development mode</span>
<span class="c"># it print the logs and restart on file change too</span><font></font>
<font></font>
<span class="c"># Two way of running your application :</span><font></font>
pm2-dev start my-app.js<font></font>
<font></font>
<span class="c"># or</span><font></font>
<font></font>
pm2-dev my-app.js<font></font>
</code></pre></div></div>

<h2 id="process-actions"><a href="#process-actions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions de processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En branchant les actions de processus sur votre code, vous pourrez les déclencher via la CLI PM2.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous tout d'abord d'avoir ajouté la bibliothèque pmx à votre code:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @pm2/io
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puis dans votre code:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pmx</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">);</span><font></font>
<font></font>
<span class="nx">pmx</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">reply</span><span class="p">({</span> <span class="na">answer</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">world</span><span class="dl">'</span> <span class="p">});</span>
<span class="p">});</span><font></font>
<font></font>
<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Keep application online</span>
<span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrez l'application avec PM2. </font><font style="vertical-align: inherit;">Pour déclencher des actions de processus, utilisez la commande:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 trigger &lt;application-name&gt; &lt;action-name&gt;
</code></pre></div></div>

<p><img src="translate_c_data/processactions-trigger.png" alt="actions de processus"></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également répertorier toutes les actions de processus disponibles:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 show &lt;application-name&gt;
</code></pre></div></div>

<p><img src="translate_c_data/processactions.png" alt="actions de processus"></p>

<h3 id="passing-a-parameter"><a href="#passing-a-parameter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passer un paramètre</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour passer un paramètre à la fonction distante, ajoutez simplement l' </font></font><code class="language-plaintext highlighter-rouge">param</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attribut au rappel:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">pmx</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">);</span><font></font>
<font></font>
<span class="nx">pmx</span><span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="dl">'</span><span class="s1">world</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">,</span> <span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">param</span><span class="p">);</span>
  <span class="nx">reply</span><span class="p">({</span><span class="na">success</span> <span class="p">:</span> <span class="nx">param</span><span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redémarrez votre application et appelez cette fonction de processus avec PM2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 trigger &lt;application-name&gt; &lt;action-name&gt; <span class="o">[</span>parameter]
</code></pre></div></div>

<h2 id="managing-applications-states"><a href="#managing-applications-states"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gérer les états des applications</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 est un gestionnaire de processus. </font><font style="vertical-align: inherit;">Il gère les états de vos applications afin que vous puissiez démarrer, arrêter, redémarrer et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer des</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processus.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancer un processus:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--name</span> <span class="s2">"my-api"</span>
pm2 start web.js <span class="nt">--name</span> <span class="s2">"web-interface"</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disons maintenant que vous devez arrêter l'interface Web:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 stop web-interface
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme vous pouvez le voir, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le processus n'a pas disparu</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il est toujours là mais en </font></font><code class="language-plaintext highlighter-rouge">stopped</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">état.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour le redémarrer, faites simplement:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 restart web-interface
</code></pre></div></div>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB:
 à partir de PM2 2.1.x, les redémarrages sont immuables, ce qui signifie
 que les changements d'environnement ne changeront pas votre processus, 
voir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/environment/&amp;usg=ALkJrhhILTtT4h7ASbNA0KQM5nr7S3tcEg#while-restarting-reloading-a-process"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">–update-env</font></font></a></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous souhaitez maintenant </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supprimer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l'application de la liste des processus PM2. </font><font style="vertical-align: inherit;">Il vous suffit de saisir les commandes suivantes:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 delete web-interface
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuis PM2 </font></font><code class="language-plaintext highlighter-rouge">2.4.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,
 vous pouvez également redémarrer / supprimer / arrêter / recharger des 
applications via regex (celle-ci ne fera que redémarrer </font></font><code class="language-plaintext highlighter-rouge">http-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">http-2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais pas </font></font><code class="language-plaintext highlighter-rouge">http-3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 restart /http-[1,2]/
</code></pre></div></div>

<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque:
 les expressions régulières sont définies par le début et la fin de «/» 
et elles sont testées par rapport au nom de l'application uniquement 
(pas l'ID de processus).</font></font></em></p>

<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également déclarer des options via le fichier de configuration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="process-listing"><a href="#process-listing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste des processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour lister tous les processus en cours:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 list
<span class="c"># Or</span>
pm2 <span class="o">[</span>list|ls|l|status]
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour obtenir plus de détails sur un processus spécifique:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 show 0
</code></pre></div></div>

<h3 id="process-sorting"><a href="#process-sorting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tri des processus</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour trier tous les processus en cours:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 list <span class="nt">--sort</span> name:desc
<span class="c"># Or</span>
pm2 list <span class="nt">--sort</span> <span class="o">[</span>name|id|pid|memory|cpu|status|uptime][:asc|desc]
</code></pre></div></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut, le champ de tri est «nom» et l'ordre est «asc».</font></font></p>

<h2 id="start-any-process-type"><a href="#start-any-process-type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrez n'importe quel type de processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour les scripts dans d'autres langues:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start echo.pl <span class="nt">--interpreter</span><span class="o">=</span>perl<font></font>
<font></font>
pm2 start echo.coffee<font></font>
pm2 start echo.php<font></font>
pm2 start echo.py<font></font>
pm2 start echo.sh<font></font>
pm2 start echo.rb<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'interpréteur est défini par défaut avec cette équivalence:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">".sh"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".py"</span><span class="p">:</span><span class="w"> </span><span class="s2">"python"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".rb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".coffee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"coffee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".php"</span><span class="p">:</span><span class="w"> </span><span class="s2">"php"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".pl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"perl"</span><span class="p">,</span><span class="w">
  </span><span class="nl">".js"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"node"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="binary-code-execution"><a href="#binary-code-execution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exécution de code binaire</font></font></a></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start ./binary-app
</code></pre></div></div>

<h3 id="process-configuration"><a href="#process-configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration des processus</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour exécuter un interpréteur non JS, vous devez définir </font></font><code class="language-plaintext highlighter-rouge">exec_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur </font></font><code class="language-plaintext highlighter-rouge">fork_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">exec_interpreter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur l'interpréteur de votre choix. </font><font style="vertical-align: inherit;">Par exemple:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"apps"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"bash-worker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"./a-bash-script"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exec_interpreter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bash"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exec_mode"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"fork_mode"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby-worker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"./some-ruby-script"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exec_interpreter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ruby"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"exec_mode"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"fork_mode"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="max-memory-restart"><a href="#max-memory-restart"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redémarrage de la mémoire maximale</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 permet de redémarrer une application en fonction d'une limite de mémoire.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notez
 que les options de redémarrage de la mémoire maximale sont gracieuses 
(si votre application prend en charge les actions gracieuses bien sûr).</font></font></p>

<h3 id="cli-3"><a href="#cli-3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></a></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start big-array.js <span class="nt">--max-memory-restart</span> 20M
</code></pre></div></div>

<h3 id="json"><a href="#json"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></a></h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"max_mem"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"big-array.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max_memory_restart"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"20M"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="programmatic-1"><a href="#programmatic-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmatique</font></font></a></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2.start({<font></font>
  name               : "max_mem",<font></font>
  script             : "big-array.js",<font></font>
  max_memory_restart : "20M"<font></font>
}, function(err, proc) {<font></font>
  // Processing<font></font>
});<font></font>
</code></pre></div></div>

<h3 id="units-1"><a href="#units-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unités</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les unités peuvent être K (ilobyte), M (egabyte), G (igabyte).</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>50M<font></font>
50K<font></font>
1G<font></font>
</code></pre></div></div>

<h2 id="process-metrics"><a href="#process-metrics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Métriques de processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En
 connectant des métriques de processus à votre code, vous serez en 
mesure de surveiller les valeurs dans le code, en temps réel.</font></font></p>

<h2 id="install"><a href="#install"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez la </font></font><code class="language-plaintext highlighter-rouge">@pm2/io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliothèque dans votre application avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @pm2/io <span class="nt">--save</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour plus d'informations sur le </font></font><code class="language-plaintext highlighter-rouge">@pm2/io</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module, </font><font style="vertical-align: inherit;">consultez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/keymetrics/pm2-io-apm&amp;usg=ALkJrhiVNA-0OBHDtOdwdoBcapP4Js9syg#table-of-contents"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la documentation du dépôt</font></font></a></p>

<h2 id="using-pm2io-for-metrics"><a href="#using-pm2io-for-metrics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de @ pm2 / io pour les métriques</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici un exemple de base sur la façon d'utiliser la bibliothèque @ pm2 / io pour créer une </font><font style="vertical-align: inherit;">métrique de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requêtes par minute</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">)</span><font></font>
<font></font>
<span class="kd">var</span> <span class="nx">meter</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">meter</span><span class="p">({</span>
  <span class="na">name</span>      <span class="p">:</span> <span class="dl">'</span><span class="s1">req/min</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">samples</span>   <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">timeframe</span> <span class="p">:</span> <span class="mi">60</span>
<span class="p">})</span><font></font>
<font></font>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">meter</span><span class="p">.</span><span class="nx">mark</span><span class="p">()</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">})</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">6001</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="monitoring-metrics"><a href="#monitoring-metrics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesures de surveillance</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une fois que vous avez démarré l'application avec </font></font><code class="language-plaintext highlighter-rouge">pm2 start app.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pour afficher la </font></font><code class="language-plaintext highlighter-rouge">req/min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">métrique, vous pouvez utiliser:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 monit
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et cochez la case "Statistiques personnalisées":</font></font></p>

<p><img src="translate_c_data/WHDEvHg.png" title="métriques personnalisées" width="300"></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous pouvez vérifier les métriques avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 show &lt;application-name&gt;
</code></pre></div></div>

<p><img src="translate_c_data/processmetrics.png" alt="métriques de processus"></p>

<h2 id="metrics-helper-available"><a href="#metrics-helper-available"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aide aux métriques disponible</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, vous pouvez programmer vos propres métriques pour suivre les informations importantes. </font><font style="vertical-align: inherit;">4 sondes différentes sont disponibles:</font></font></p>

<ul>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des métriques simples</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : des valeurs qui peuvent être lues instantanément
    </font></font><ul>
      <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par exemple. </font><font style="vertical-align: inherit;">Surveiller la valeur de la variable</font></font></li>
    </ul>
  </li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compteur</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : choses qui incrémentent ou décrémentent
    </font></font><ul>
      <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par exemple. </font><font style="vertical-align: inherit;">Téléchargements en cours de traitement, utilisateur connecté</font></font></li>
    </ul>
  </li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compteur</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : choses qui sont mesurées comme événements / intervalle
    </font></font><ul>
      <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par exemple. </font><font style="vertical-align: inherit;">Demande par minute pour un serveur http</font></font></li>
    </ul>
  </li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Histogramme</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 : conserve un réservoir de valeurs statistiquement pertinentes biaisé 
vers les 5 dernières minutes pour explorer leur distribution
    </font></font><ul>
      <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par exemple. </font><font style="vertical-align: inherit;">Surveiller le moyen d'exécution d'une requête dans la base de données</font></font></li>
    </ul>
  </li>
</ul>

<h3 id="simple-metric-simple-value-reporting"><a href="#simple-metric-simple-value-reporting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Métrique simple: rapport de valeur simple</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela permet d'exposer des valeurs qui peuvent être lues instantanément.</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">)</span><font></font>
<font></font>
<span class="c1">// Here the value function will be called each second to get the value</span>
<span class="kd">var</span> <span class="nx">metric</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">metric</span><span class="p">({</span>
  <span class="na">name</span>    <span class="p">:</span> <span class="dl">'</span><span class="s1">Realtime user</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span>   <span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">users</span><span class="p">).</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">})</span><font></font>
<font></font>
<span class="c1">// Here we are going to call valvar.set() to set the new value</span>
<span class="kd">var</span> <span class="nx">valvar</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">metric</span><span class="p">({</span>
  <span class="na">name</span>    <span class="p">:</span> <span class="dl">'</span><span class="s1">Realtime Value</span><span class="dl">'</span>
<span class="p">})</span><font></font>
<font></font>
<span class="nx">valvar</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="counter-sequential-value-change"><a href="#counter-sequential-value-change"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compteur: changement de valeur séquentiel</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valeurs qui incrémentent ou décrémentent.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple pour compter les requêtes Http actives:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">)</span><font></font>
<font></font>
<span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">counter</span><span class="p">({</span>
  <span class="na">name</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Active requests</span><span class="dl">'</span>
<span class="p">})</span><font></font>
<font></font>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">counter</span><span class="p">.</span><span class="nx">inc</span><span class="p">()</span><font></font>
<font></font>
  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Decrement the counter, counter will eq 0                                                                                                                                                                      </span>
    <span class="nx">counter</span><span class="p">.</span><span class="nx">dec</span><span class="p">()</span>
  <span class="p">})</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">})</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">6001</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="meter-average-calculated-values"><a href="#meter-average-calculated-values"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compteur: valeurs calculées moyennes</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valeurs mesurées en tant qu'événements / intervalle.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple pour compter le nombre de requêtes par minute:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">)</span><font></font>
<font></font>
<span class="kd">var</span> <span class="nx">meter</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">meter</span><span class="p">({</span>
  <span class="na">name</span>      <span class="p">:</span> <span class="dl">'</span><span class="s1">req/min</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">samples</span>   <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">timeframe</span> <span class="p">:</span> <span class="mi">60</span>
<span class="p">})</span><font></font>
<font></font>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">meter</span><span class="p">.</span><span class="nx">mark</span><span class="p">()</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/plain</span><span class="dl">'</span><span class="p">})</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">()</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">6001</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="options"><a href="#options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options</font></font></a></h4>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> option d' </font><strong><font style="vertical-align: inherit;">échantillons</font></strong><font style="vertical-align: inherit;"> est l'unité de taux. </font><font style="vertical-align: inherit;">La valeur par défaut est </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seconde.
</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> option de </font><strong><font style="vertical-align: inherit;">période</font></strong><font style="vertical-align: inherit;"> est la période sur laquelle les événements seront analysés. </font><font style="vertical-align: inherit;">La valeur par défaut est de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secondes.</font></font></p>

<h3 id="histogram"><a href="#histogram"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Histogramme</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conserve
 un réservoir de valeurs statistiquement pertinentes biaisé vers les 5 
dernières minutes pour explorer leur distribution.</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@pm2/io</span><span class="dl">'</span><span class="p">)</span><font></font>
<font></font>
<span class="kd">var</span> <span class="nx">histogram</span> <span class="o">=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">histogram</span><span class="p">({</span>
  <span class="na">name</span>        <span class="p">:</span> <span class="dl">'</span><span class="s1">latency</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">measurement</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">mean</span><span class="dl">'</span>
<span class="p">})</span><font></font>
<font></font>
<span class="kd">var</span> <span class="nx">latency</span> <span class="o">=</span> <span class="mi">0</span><font></font>
<font></font>
<span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">latency</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
  <span class="nx">histogram</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">latency</span><span class="p">)</span>
<span class="p">},</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="exponential-backoff-restart-delay"><a href="#exponential-backoff-restart-delay"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Délai de redémarrage de l'interruption exponentielle</font></font></a></h2>

<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponible en PM2&gt; = 3,2</font></font></em></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un
 nouveau mode de redémarrage a été implémenté sur PM2 Runtime, 
permettant à votre application de redémarrer de manière plus 
intelligente. </font><font style="vertical-align: inherit;">Au lieu de 
redémarrer votre application comme un fou lorsque des exceptions se 
produisent (par exemple, la base de données est en panne), le </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redémarrage exponentiel de l'interruption</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 augmentera progressivement le temps entre les redémarrages, réduisant 
la pression sur votre base de données ou votre fournisseur externe ... 
Assez simple à utiliser:</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI:</font></font></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start app.js <span class="nt">--exp-backoff-restart-delay</span><span class="o">=</span>100
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via le fichier écosystème.config.js:</font></font></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">exp_backoff_restart_delay</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}]</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsqu'une application plante de manière inattendue et que l'option </font></font><code class="language-plaintext highlighter-rouge">--exp-backoff-restart-delay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est activée, vous pourrez voir un nouvel état de l'application en </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attente de redémarrage</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En exécutant, </font></font><code class="language-plaintext highlighter-rouge">pm2 logs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous verrez également le délai de redémarrage être incrémenté:</font></font></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PM2      | App [throw:0] will restart in 100ms<font></font>
PM2      | App [throw:0] exited with code [1] via signal [SIGINT]<font></font>
PM2      | App [throw:0] will restart in 150ms<font></font>
PM2      | App [throw:0] exited with code [1] via signal [SIGINT]<font></font>
PM2      | App [throw:0] will restart in 225ms<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme
 vous pouvez le voir, le délai de redémarrage entre les redémarrages 
augmentera selon une moyenne mobile exponentielle, jusqu'à atteindre le 
maximum de 15000 ms entre les redémarrages.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque
 l'application reviendra alors en mode stable (temps de disponibilité 
sans redémarrage de plus de 30 secondes), le délai de redémarrage sera 
automatiquement réinitialisé à 0 ms.</font></font></p>

<h2 id="fixed-restart-delay"><a href="#fixed-restart-delay"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Délai de redémarrage fixe</font></font></a></h2>

<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponible en PM2&gt; = 0,9</font></font></em></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également utiliser </font></font><code class="language-plaintext highlighter-rouge">restart_delay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour définir un délai fixe entre les redémarrages:</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI:</font></font></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start app.js <span class="nt">--restart-delay</span><span class="o">=</span>3000
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via le fichier écosystème.config.js:</font></font></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">restart_delay</span><span class="p">:</span> <span class="mi">3000</span>
<span class="p">}]</span>
</code></pre></div></div>

<h2 id="memory-based-reload-strategy"><a href="#memory-based-reload-strategy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stratégie de rechargement basée sur la mémoire</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caisse </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.io/doc/en/runtime/features/memory-limit/&amp;usg=ALkJrhgMcFSfIXlKLWW0gsvBZ7yWAHwMSA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://pm2.io/doc/en/runtime/features/memory-limit/</font></font></a></p>

<h2 id="0-second-downtime-reload"><a href="#0-second-downtime-reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 seconde de rechargement de temps d'arrêt</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérifiez le mode cluster pour obtenir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/doc/en/runtime/guide/load-balancing/&amp;usg=ALkJrhi6PniHZ9rZjxHGt0JsCYDTPc3Rbw#0-seconds-downtime-reload"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce comportement</font></font></a></p>

<h2 id="no-auto-restart"><a href="#no-auto-restart"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas de redémarrage automatique</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ceci
 est utile dans le cas où nous souhaitons exécuter des scripts uniques 
et ne voulons pas que le gestionnaire de processus redémarre notre 
script au cas où il serait terminé.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le
 simple fait d'exécuter ces scripts à partir de bash mettrait fin au 
script au cas où la session ssh serait terminée et le script ne devrait 
pas être redémarré une fois son exécution terminée.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le PM2 est parfait pour de tels cas, offrant une surveillance et une journalisation robustes</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 start app.js <span class="nt">--no-autorestart</span>
</code></pre></div></div>

<h2 id="serve-static-file-over-http"><a href="#serve-static-file-over-http"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servir le fichier statique sur http</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 peut servir de fichier statique très facilement avec la </font></font><code class="language-plaintext highlighter-rouge">pm2 serve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonction.</font></font></p>

<h2 id="cli-4"><a href="#cli-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servez vos fichiers statiques (comme une application frontale) sur http avec une simple commande:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 serve &lt;path&gt; &lt;port&gt;
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le dossier actuel sera utilisé si vous ne précisez pas </font></font><code class="language-plaintext highlighter-rouge">&lt;path&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pour le port celui par défaut </font></font><code class="language-plaintext highlighter-rouge">8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vous pouvez utiliser les mêmes options qu'une application normale comme </font></font><code class="language-plaintext highlighter-rouge">--name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">--watch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h2 id="process-file"><a href="#process-file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier de processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez déclarer dans un fichier de processus que vous souhaitez qu'un répertoire spécial soit diffusé, pour ce faire:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">serve</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">PM2_SERVE_PATH</span><span class="p">:</span> <span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">PM2_SERVE_PORT</span><span class="p">:</span> <span class="mi">8080</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il vous suffit d'ajouter </font></font><code class="language-plaintext highlighter-rouge">PM2_SERVE_PATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">PM2_SERVE_PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aux variables d'env pour spécifier le chemin et le port, la valeur par défaut est la même que la CLI.</font></font></p>

<h2 id="serving-spa-redirect-all-to-indexhtml"><a href="#serving-spa-redirect-all-to-indexhtml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serving SPA: redirigez tout vers index.html</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Pour rediriger automatiquement toutes les requêtes vers le fichier index.html, utilisez l' </font></font><code class="language-plaintext highlighter-rouge">--spa</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">option:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 serve <span class="nt">--spa</span>
</code></pre></div></div>

<h3 id="protect-access-with-password"><a href="#protect-access-with-password"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protégez l'accès avec un mot de passe</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Pour protéger basiquement l'accès aux fichiers exposés, vous pouvez utiliser </font></font><code class="language-plaintext highlighter-rouge">--basic-auth-username</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">et </font></font><code class="language-plaintext highlighter-rouge">--basic-auth-password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 serve <span class="nt">--basic-auth-username</span> &lt;username&gt; <span class="nt">--basic-auth-password</span> &lt;password&gt;
</code></pre></div></div>

<h2 id="cli-completion"><a href="#cli-completion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achèvement de la CLI</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tab-complétion pour PM2:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 completion <span class="nb">install</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Ou ajoutez manuellement le script d'achèvement à votre fichier ~ / .bashrc ou ~ / .zshrc:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 completion <span class="o">&gt;&gt;</span> ~/.bashrc <span class="c"># or ~/.zshrc</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puis source votre fichier .bashrc ou .zshrc pour la session en cours:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bashrc <span class="c"># or ~/.zshrc</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez ajouter l'achèvement pm2 à votre session actuelle de cette façon:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span> &lt;<span class="o">(</span>pm2 completion<span class="o">)</span>
</code></pre></div></div>

<h2 id="graceful-stop"><a href="#graceful-stop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrêt gracieux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour permettre des processus de redémarrage / rechargement / arrêt progressifs, assurez-vous d'intercepter le </font><font style="vertical-align: inherit;">signal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIGINT</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 et d'effacer tout ce qui est nécessaire (comme les connexions à la base
 de données, le traitement des travaux…) avant de laisser votre 
application se fermer.</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">SIGINT</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">db</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="nx">err</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span><span class="p">);</span>
   <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maintenant </font></font><code class="language-plaintext highlighter-rouge">pm2 reload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deviendra un gracefulReload.</font></font></p>

<h3 id="configure-the-kill-timeout"><a href="#configure-the-kill-timeout"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer le délai d'expiration</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via CLI, cela allongera le délai à 3000 ms:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--kill-timeout</span> 3000
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier d'écosystème</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">kill_timeout</span> <span class="p">:</span> <span class="mi">3000</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="graceful-start"><a href="#graceful-start"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Début gracieux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parfois,
 vous devrez peut-être attendre que votre application ait établi des 
connexions avec vos bases de données / caches / workers / peu importe. </font><font style="vertical-align: inherit;">PM2 doit attendre avant de considérer votre demande comme </font></font><code class="language-plaintext highlighter-rouge">online</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pour ce faire, vous devez fournir </font></font><code class="language-plaintext highlighter-rouge">--wait-ready</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à la CLI ou fournir </font></font><code class="language-plaintext highlighter-rouge">wait_ready: true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans un fichier de processus. </font><font style="vertical-align: inherit;">Cela obligera PM2 à écouter cet événement. </font><font style="vertical-align: inherit;">Dans votre candidature, vous devrez ajouter le </font></font><code class="language-plaintext highlighter-rouge">process.send('ready');</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moment où vous souhaitez que votre candidature soit considérée comme prête.</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">'</span><span class="s1">hey</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})</span>
<span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Listening on port </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">address</span><span class="p">().</span><span class="nx">port</span><span class="p">);</span>
  <span class="c1">// Here we send the ready signal to PM2</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">ready</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puis lancez l'application:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--wait-ready</span>
</code></pre></div></div>

<h3 id="configure-the-ready-timeout"><a href="#configure-the-ready-timeout"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer le délai d'attente</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par défaut, PM2 attend 3000 ms pour le </font></font><code class="language-plaintext highlighter-rouge">ready</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signal.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via CLI, cela allongera le délai à 3000 ms:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--wait-ready</span> <span class="nt">--listen-timeout</span> 3000
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">déclaration JSON</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"apps"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"app.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"listen_timeout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="graceful-start-using-httpserverlisten"><code class="language-plaintext highlighter-rouge">http.Server.listen</code><a href="#graceful-start-using-httpserverlisten"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation gracieuse </font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe toujours le système par défaut qui se connecte à </font></font><code class="language-plaintext highlighter-rouge">http.Server.listen</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">method. </font><font style="vertical-align: inherit;">Lorsque votre serveur http accepte une connexion, il indique automatiquement que votre application est prête. </font><font style="vertical-align: inherit;">Vous pouvez augmenter le temps d'attente PM2 à l'écoute en utilisant la même variable que </font></font><code class="language-plaintext highlighter-rouge">--wait-ready</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le démarrage </font><font style="vertical-align: inherit;">progressif </font><font style="vertical-align: inherit;">: </font></font><code class="language-plaintext highlighter-rouge">listen_timeout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entrée dans le fichier de processus ou </font></font><code class="language-plaintext highlighter-rouge">--listen-timeout=XXXX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via CLI.</font></font></p>

<h2 id="explanation-signals-flow"><a href="#explanation-signals-flow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explication: Flux de signaux</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsqu'un processus est arrêté / redémarré par PM2, certains signaux système sont envoyés à votre processus dans un ordre donné.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout d'abord, un </font><font style="vertical-align: inherit;">signal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIGINT</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est envoyé à vos processus, signal que vous pouvez attraper pour savoir que votre processus va être arrêté. </font><font style="vertical-align: inherit;">Si votre application ne se ferme pas d'elle-même avant 1.6s </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/signals-clean-restart/&amp;usg=ALkJrhjjpd1SPRI8F8f5k50i_nEkwIs2kw#customize-exit-delay"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">personnalisable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ),</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> elle recevra un </font><font style="vertical-align: inherit;">signal </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIGKILL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour forcer la sortie du processus.</font></font></p>

<h2 id="windows-graceful-stop"><a href="#windows-graceful-stop"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arrêt gracieux de Windows</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque les signaux ne sont pas disponibles, votre processus est tué. </font><font style="vertical-align: inherit;">Dans ce cas, vous devez utiliser </font></font><code class="language-plaintext highlighter-rouge">--shutdown-with-message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via CLI ou </font></font><code class="language-plaintext highlighter-rouge">shutdown_with_message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans Ecosystem File et écouter les </font></font><code class="language-plaintext highlighter-rouge">shutdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événements.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via CLI:</font></font></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--shutdown-with-message</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgqYzUAHOZ4eGbGJjCpBLP7L3ZISg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier d'écosystème</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"apps"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"app.js"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shutdown_with_message"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écoutez les </font></font><code class="language-plaintext highlighter-rouge">shutdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">événements</font></font></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">shutdown</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Closing all connections...</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Finished closing connections</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1500</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous utilisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://babeljs.io/&amp;usg=ALkJrhjC1nS2smEIjdu-0JhNM05DN4YQBw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BabelJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://www.typescriptlang.org/&amp;usg=ALkJrhjTfiShe-tviKT1XKwjTSf4W3COcg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapuscrit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou tout autre Javascript que </font><font style="vertical-align: inherit;">vous avez </font><font style="vertical-align: inherit;">peut - </font><font style="vertical-align: inherit;">être remarqué sur- </font><font style="vertical-align: inherit;">ensemble que lorsqu'une exception se produit, le stacktrace n'a pas de </font><font style="vertical-align: inherit;">sens du tout. </font><font style="vertical-align: inherit;">Pour obtenir des informations intéressantes, vous devez générer des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/&amp;usg=ALkJrhjo3nP7W7V2V2U1AdJrrvvKxBk20Q"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichiers de carte source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une fois ces fichiers de carte source générés, PM2 les détecte automatiquement et vous aide à inspecter les erreurs.</font></font></p>

<h2 id="source-map"><a href="#source-map"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carte source</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depuis la version 1.0.2, PM2 embarque un mécanisme de prise en charge de la carte source javascript.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 détecte automatiquement les fichiers de carte source javascript</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si le fichier que vous démarrez (disons app.js) a son équivalence de carte (par exemple app.js.map).</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si
 vous avez une disposition différente, vous pouvez forcer la prise en 
charge de la carte source en démarrant votre application:</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via CLI:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--source-map-support</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou via un fichier JSON:</font></font></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
   <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">babel-app</span><span class="dl">'</span><span class="p">,</span>
   <span class="na">script</span><span class="p">:</span> <span class="dl">'</span><span class="s1">app.js</span><span class="dl">'</span><span class="p">,</span>
   <span class="na">source_map_support</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="inspect-exceptions"><a href="#inspect-exceptions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspecter les exceptions</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les exceptions sont enregistrées dans le fichier journal des erreurs de votre application.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour vérifier vos journaux afin de détecter des exceptions, il vous suffit de taper:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 logs main
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinon, utilisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://keymetrics.io/&amp;usg=ALkJrhiMvWfcH0Zx_N19ge_fR2LN6OhrbA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keymetrics.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour avoir une liste propre et des notifications de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://docs.keymetrics.io/docs/pages/issues/&amp;usg=ALkJrhhjXWpG86wPPbYKRE-Yi4etlTxAaw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nouvelles alertes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h3 id="disable-source-map-support"><a href="#disable-source-map-support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactiver la prise en charge de la carte source</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous ne souhaitez pas que PM2 prenne automatiquement en charge la carte source javascript, vous pouvez utiliser l'option </font></font><code class="language-plaintext highlighter-rouge">--disable-source-map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela peut être fait à la fois via CLI et via un fichier JSON.</font></font></p>

<h2 id="listening-on-port-80-wo-root"><a href="#listening-on-port-80-wo-root"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Écoute sur le port 80 sans racine</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est une règle générale que vous ne devez pas exécuter node en tant que root. </font><font style="vertical-align: inherit;">Cependant,
 seul root peut se lier aux ports inférieurs à 1024. C'est là 
qu'intervient authbind. Authbind permet aux utilisateurs non root de se 
lier aux ports inférieurs à 1024. Remplacez </font></font><code class="language-plaintext highlighter-rouge">%user%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par l'utilisateur qui sera en cours d'exécution </font></font><code class="language-plaintext highlighter-rouge">pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>authbind
<span class="nb">sudo touch</span> /etc/authbind/byport/80
<span class="nb">sudo chown</span> %user% /etc/authbind/byport/80
<span class="nb">sudo chmod </span>755 /etc/authbind/byport/80
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devez également ajouter un alias à l'utilisateur qui exécute le </font></font><code class="language-plaintext highlighter-rouge">pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profil, par exemple </font></font><code class="language-plaintext highlighter-rouge">~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(notez que vous devrez exécuter </font></font><code class="language-plaintext highlighter-rouge">source ~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code class="language-plaintext highlighter-rouge">source ~/.zshrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">immédiatement après):</font></font></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gi">+alias pm2='authbind --deep pm2'
</span></code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, assurez-vous qu'il </font></font><code class="language-plaintext highlighter-rouge">pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est mis à jour avec </font></font><code class="language-plaintext highlighter-rouge">authbind</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>authbind <span class="nt">--deep</span> pm2 update
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou simplement </font></font><code class="language-plaintext highlighter-rouge">pm2 update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si vous avez ajouté l'alias à votre profil d'utilisateur.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez maintenant démarrer des applications utilisant PM2 qui peuvent se lier au port 80 sans être root!</font></font></p>

<h2 id="multiple-pm2-on-the-same-server"><a href="#multiple-pm2-on-the-same-server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plusieurs PM2 sur le même serveur</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le
 client et le démon communiquent via des fichiers socket disponibles 
dans $ HOME / .pm2 / pub.sock et $ HOME / .pm2 / rpc.sock.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez démarrer plusieurs instances PM2 en modifiant la </font></font><code class="language-plaintext highlighter-rouge">PM2_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable d'environnement.</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PM2_HOME</span><span class="o">=</span><span class="s1">'.pm2'</span> pm2 start echo.js <span class="nt">--name</span><span class="o">=</span><span class="s2">"echo-node-1"</span>
<span class="nv">PM2_HOME</span><span class="o">=</span><span class="s1">'.pm3'</span> pm2 start echo.js <span class="nt">--name</span><span class="o">=</span><span class="s2">"echo-node-2"</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela démarrera deux instances PM2 différentes. </font><font style="vertical-align: inherit;">Pour répertorier les processus gérés par chaque instance, procédez comme suit:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">PM2_HOME</span><span class="o">=</span><span class="s1">'.pm2'</span> pm2 list
<span class="nv">PM2_HOME</span><span class="o">=</span><span class="s1">'.pm3'</span> pm2 list
</code></pre></div></div>

<h2 id="launch-pm2-in-no-deamon"><a href="#launch-pm2-in-no-deamon"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancez PM2 sans démon</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous de tuer toute instance PM2 avant de démarrer PM2 en mode sans démon ( </font></font><code class="language-plaintext highlighter-rouge">pm2 kill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancer PM2 sans se démoniser:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--no-daemon</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe également la CLI </font></font><code class="language-plaintext highlighter-rouge">pm2-runtime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installée par défaut lors de l'installation de PM2, qui est un remplacement instantané du binaire Node.js.</font></font></p>

<h2 id="stateless-apps"><a href="#stateless-apps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Applications sans état</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En règle générale, votre application de production doit être sans état. </font><font style="vertical-align: inherit;">Toutes
 les données, états, session websocket, données de session, doivent être
 partagés via n'importe quel type de base de données ou de système PUB /
 SUB.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Sinon, votre application sera difficile à mettre à l'échelle sur le même serveur et sur plusieurs serveurs.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par exemple, vous pouvez utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/visionmedia/connect-redis&amp;usg=ALkJrhgJJQscyfLFNiFn_59XpVWGY4Frcw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connect-redis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour partager des sessions.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Nous vous recommandons également de suivre la convention des 12 facteurs: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://12factor.net/&amp;usg=ALkJrhirJkUa7fQqf8AGyDHpBjXH7ddWHA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">http://12factor.net/</font></font></a></p>

<h2 id="setup-pm2-on-a-server"><a href="#setup-pm2-on-a-server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer pm2 sur un serveur</font></font></a></h2>

<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.digitalocean.com/community/articles/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps&amp;usg=ALkJrhiq7o2j1lqMIPhRwLJU2QrmVM_coA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment utiliser pm2 pour configurer un environnement de production Node.js sur un VPS Ubuntu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="log-and-pid-files"><a href="#log-and-pid-files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichiers journaux et PID</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Par défaut, les journaux (erreur et sortie), les fichiers pid, les vidages et les journaux PM2 se trouvent dans </font></font><code class="language-plaintext highlighter-rouge">~/.pm2/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.pm2/<font></font>
├── dump.pm2<font></font>
├── custom_options.sh<font></font>
├── pm2.log<font></font>
├── pm2.pid<font></font>
├── logs<font></font>
└── pids<font></font>
</code></pre></div></div>

<h2 id="enabling-harmony-es6"><a href="#enabling-harmony-es6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activation de Harmony ES6</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L' </font></font><code class="language-plaintext highlighter-rouge">--node-args</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option permet l'ajout d'arguments à l'interpréteur de nœuds. </font><font style="vertical-align: inherit;">Pour activer l'harmonie pour un processus, tapez la commande suivante:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start my_app.js <span class="nt">--node-args</span><span class="o">=</span><span class="s2">"--harmony"</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et dans une déclaration JSON:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[{</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ES6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"script"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"es6.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"node_args"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"--harmony"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre></div></div>

<h2 id="coffeescript"><a href="#coffeescript"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoffeeScript</font></font></a></h2>

<h3 id="coffeescript-v1"><a href="#coffeescript-v1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoffeeScript v1</font></font></a></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 <span class="nb">install </span>coffee-script <font></font>
pm2 start app.coffee<font></font>
</code></pre></div></div>

<h3 id="coffeescript-v2"><a href="#coffeescript-v2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoffeeScript v2</font></font></a></h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 <span class="nb">install </span>coffeescript<font></font>
pm2 start app.coffee<font></font>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout!</font></font></p>

<h2 id="piping-json"><a href="#piping-json"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tuyauterie JSON</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pull-demandes:</font></font></p>
<ul>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/pull/273&amp;usg=ALkJrhgjuaI3fmBO5UKv1bojdnBAs0GDyg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 273</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/pull/279&amp;usg=ALkJrhhlnvTOkchst1inTlZBVXnwXeii-Q"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 279</font></font></a></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span><font></font>
<font></font>
<span class="nb">read</span> <span class="nt">-d</span> <span class="s1">''</span> my_json <span class="o">&lt;&lt;</span><span class="no">_EOF_</span><span class="sh">
[{
    "name"       : "app1",
    "script"     : "/home/projects/pm2_nodetest/app.js",
    "instances"  : "4",
    "error_file" : "./logz/child-err.log",
    "out_file"   : "./logz/child-out.log",
    "pid_file"   : "./logz/child.pid",
    "exec_mode"  : "cluster_mode",
    "port"       : 4200
}]
</span><span class="no">_EOF_

</span><span class="nb">echo</span> <span class="nv">$my_json</span> | pm2 start -
</code></pre></div></div>

<h2 id="process-title"><a href="#process-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titre du processus</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez spécifier la variable env </font></font><code class="language-plaintext highlighter-rouge">PROCESS_FILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lors du démarrage d'une application avec PM2, elle sera définie comme un titre de processus. </font><font style="vertical-align: inherit;">C'est très utile lorsque vous essayez d'obtenir des données spécifiques du processus, par exemple, vous pouvez utiliser </font></font><code class="language-plaintext highlighter-rouge">ps -fC name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h2 id="transpilers"><a href="#transpilers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transpileurs</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reportez-vous au </font><font style="vertical-align: inherit;">didacticiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://pm2.keymetrics.io/docs/tutorials/using-transpilers-with-pm2&amp;usg=ALkJrhgaoglM2LxqJ5knDTC_oZk1fKwu7g"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation des transpileurs avec PM2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="user-tips-from-issues"><a href="#user-tips-from-issues"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conseils d'utilisation des problèmes</font></font></a></h2>

<ul>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/289&amp;usg=ALkJrhjpP_0tjB4F7Z04ig5h7cccoBrljw#issuecomment-42900019"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vagrant et pm2 # 289</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/322&amp;usg=ALkJrhigY3oDiY-e091AAY5PREkEZjHAcg#issuecomment-46792733"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Démarrez la même application sur différents ports # 322</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/88&amp;usg=ALkJrhjq1STO6g9R8wdLuXVIazgXJtg5UQ#issuecomment-49106686"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Utilisation d'ansible avec pm2</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/496&amp;usg=ALkJrhgne4itAl7XT6_nUAxXbE5ZWzcZzg#issuecomment-49323861"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaîne Cron comme argument</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/issues/141&amp;usg=ALkJrhjnsBnuNSr8CfnTSQd0NRcBIxpevw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Redémarrer lorsque le processus atteint une quantité de mémoire spécifique</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/PM2/issues/637&amp;usg=ALkJrhgSh9lxhIgND0nJBfw6O5Qz6Z_PcQ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">Séances persistantes et discussion socket.io</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/PM2/issues/837&amp;usg=ALkJrhgqsXbt44ap7FrchGPNIAy4QlXaTg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EACCESS - Comprendre les droits d'utilisateur / root pm2</font></font></a></li>
</ul>

<h2 id="external-resources-and-articles"><a href="#external-resources-and-articles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ressources externes et articles</font></font></a></h2>

<ul>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://futurestud.io/tutorials/pm2-utility-overview-installation&amp;usg=ALkJrhiRsGHUnsOCrbkg4csn-cMZDkYfow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2 - Présentation et installation de l'utilitaire</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-16-04&amp;usg=ALkJrhhaP5o5RnyRBXiQnzLNO5_5X6PIug"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment configurer une application Node.js pour la production sur Ubuntu 16.04</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://hackernoon.com/tutorial-creating-and-managing-a-node-js-server-on-aws-part-2-5fbdea95f8a1&amp;usg=ALkJrhhqOwyoHdEvrWyQOgHY_Gcf78VH9g"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutoriel: Création et gestion d'un serveur Node.js sur AWS, partie 2</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://devo.ps/blog/goodbye-node-forever-hello-pm2/&amp;usg=ALkJrhjLuswNDkztycziSrjIkpgrSia92A"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au revoir noeud pour toujours, bonjour pm2</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.howtoforge.com/tutorial/how-to-deploy-nodejs-applications-with-pm2-and-nginx-on-ubuntu/&amp;usg=ALkJrhiCdGLWfr7iPoWLxV-ymX-BqwPQ6A"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.howtoforge.com/tutorial/how-to-deploy-nodejs-applications-with-pm2-and-nginx-on-ubuntu/</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://serversforhackers.com/editions/2014/11/04/pm2/&amp;usg=ALkJrhh-m6NkSMb-4FTS6vAfDcHRVT2zCQ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://serversforhackers.com/editions/2014/11/04/pm2/</font></font></a></li>
  <li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://www.allaboutghost.com/keep-ghost-running-with-pm2/&amp;usg=ALkJrhgyDUtmRjMi0VANsADcJSktZenSOQ"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.allaboutghost.com/keep-ghost-running-with-pm2/</font></font></a></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://blog.ponyfoo.com/2013/09/19/deploying-node-apps-to-aws-using-grunt</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.allaboutghost.com/keep-ghost-running-with-pm2/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://bioselemental.com/keeping-ghost-alive-with-pm2/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://blog.chyld.net/installing-ghost-on-ubuntu-13-10-aws-ec2-instance-with-pm2/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://blog.marvinroger.fr/gerer-ses-applications-node-en-production-pm2/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.codersgrid.com/2013/06/29/pm2-process-manager-for-node-js/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.z-car.com/blog/programming/how-to-rotate-logs-using-pm2-process-manager-for-node-js</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://yosoftware.com/blog/7-tips-for-a-node-js/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.exponential.io/blog/nodeday-2014-moving-a-large-developer-workforce-to-nodejs</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://blog.rapsli.ch/posts/2013/2013-10-17-node-monitor-pm2.html</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://coderwall.com/p/igdqyw</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://revdancatt.com/2013/09/17/node-day-1-getting-the-server-installing-node-and-pm2/</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://medium.com/tech-talk/e7c0b0e5ce3c</font></font></li>
</ul>

<h2 id="startup-script-generator"><a href="#startup-script-generator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Générateur de script de démarrage</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2
 peut générer des scripts de démarrage et les configurer afin de 
conserver votre liste de processus intacte lors des redémarrages de 
machine prévus ou inattendus.</font></font></p>

<h2 id="init-systems-supported"><a href="#init-systems-supported"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Systèmes init pris en charge</font></font></a></h2>

<ul>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Ubuntu&gt; = 16, CentOS&gt; = 7, Arch, Debian&gt; = 7</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parvenu</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Ubuntu &lt;= 14</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lancement</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Darwin, MacOSx</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openrc</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Gentoo Linux, Arch Linux</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rcd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : FreeBSD</font></font></li>
  <li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">systemv</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Centos 6, Amazon Linux</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces systèmes d'initialisation sont automatiquement détectés par PM2 avec la </font></font><code class="language-plaintext highlighter-rouge">pm2 startup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande.</font></font></p>

<h2 id="generating-a-startup-script"><a href="#generating-a-startup-script"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Générer un script de démarrage</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour obtenir le script de démarrage configuré automatiquement pour votre machine, vous devez taper cette commande:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Detect available init system, generate configuration and enable startup system</span><font></font>
pm2 startup<font></font>
</code></pre></div></div>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne passez pas sudo à cette commande! </font><font style="vertical-align: inherit;">Il imprimera la commande exacte que vous devrez copier / coller dans votre terminal</font></font></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple:</font></font></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 startup
<span class="o">[</span>PM2] You have to run this <span class="nb">command </span>as root. Execute the following <span class="nb">command</span>:
      <span class="nb">sudo </span>su <span class="nt">-c</span> <span class="s2">"env PATH=</span><span class="nv">$PATH</span><span class="s2">:/home/unitech/.nvm/versions/node/v4.3/bin pm2 startup &lt;distribution&gt; -u &lt;user&gt; --hp &lt;home-path&gt;
</span></code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il vous suffit de copier / coller la ligne que PM2 vous donne et le script de démarrage sera configuré pour votre OS.</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REMARQUE 1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : lors de la mise à niveau vers la version plus récente de Node.js, mettez à jour le script de démarrage PM2! </font><font style="vertical-align: inherit;">Utilisez d' </font></font><code class="language-plaintext highlighter-rouge">pm2 unstartup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abord puis à </font></font><code class="language-plaintext highlighter-rouge">pm2 startup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nouveau</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REMARQUE 2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Vous pouvez personnaliser le nom du service via l' </font></font><code class="language-plaintext highlighter-rouge">--service-name &lt;name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/pull/3213&amp;usg=ALkJrhjCqAyXcMcQpLwBgVWVf7xPZ0ooNw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 3213</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></p>

<h2 id="saving-current-process-list"><a href="#saving-current-process-list"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enregistrement de la liste des processus actuels</font></font></a></h2>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Important</font></font></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une
 fois que vous avez lancé toutes les applications que vous souhaitez 
gérer, vous devez enregistrer la liste que vous souhaitez réapparaître 
au redémarrage de la machine avec:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 save
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il enregistrera la liste des processus avec les environnements correspondants dans le fichier de vidage </font></font><code class="language-plaintext highlighter-rouge">$PM2_HOME/.pm2/dump.pm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<h3 id="manually-resurrect-processes"><a href="#manually-resurrect-processes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ressusciter manuellement les processus</font></font></a></h3>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela ramène les processus précédemment enregistrés (via pm2 save):</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 resurrect
</code></pre></div></div>

<h2 id="disabling-startup-system"><a href="#disabling-startup-system"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactivation du système de démarrage</font></font></a></h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 unstartup
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code de ligne précédent permet à PM2 de détecter votre plateforme. </font><font style="vertical-align: inherit;">Vous pouvez également utiliser vous-même un autre système d'initialisation spécifié en utilisant:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 unstartup
</code></pre></div></div>

<h2 id="updating-startup-script"><a href="#updating-startup-script"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour du script de démarrage</font></font></a></h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 unstartup
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensuite</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 startup
</code></pre></div></div>

<h2 id="user-permissions"><a href="#user-permissions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autorisations utilisateur</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disons que vous voulez que le script de démarrage soit exécuté sous un autre utilisateur.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changez simplement l' </font></font><code class="language-plaintext highlighter-rouge">-u &lt;username&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">option et le </font></font><code class="language-plaintext highlighter-rouge">--hp &lt;user_home&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 startup ubuntu <span class="nt">-u</span> www <span class="nt">--hp</span> /home/ubuntu
</code></pre></div></div>

<h2 id="specifying-the-init-system"><a href="#specifying-the-init-system"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spécification du système init</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous
 pouvez spécifier la plate-forme que vous utilisez vous-même si vous le 
souhaitez (où la plate-forme peut être l'une des plates-formes citées 
ci-dessus):</font></font></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 startup [ubuntu | ubuntu14 | ubuntu12 | centos | centos6 | arch | oracle | amazon | macos | darwin | freebsd | systemd | systemv | upstart | launchd | rcd | openrc]
</code></pre></div></div>

<h2 id="systemd-installation-checking"><a href="#systemd-installation-checking"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérification de l'installation SystemD</font></font></a></h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check if pm2-&lt;USER&gt; service has been added</span>
<span class="nv">$ </span>systemctl list-units
<span class="c"># Check logs</span>
<span class="nv">$ </span>journalctl <span class="nt">-u</span> pm2-&lt;USER&gt;
<span class="c"># Cat systemd configuration file</span>
<span class="nv">$ </span>systemctl <span class="nb">cat </span>pm2-&lt;USER&gt;
<span class="c"># Analyze startup</span>
<span class="nv">$ </span>systemd-analyze plot <span class="o">&gt;</span> output.svg
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour attendre efficacement que la machine soit en ligne pour l'exécution de PM2:</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]<font></font>
Wants=network-online.target<font></font>
After=network.target network-online.target<font></font>
<font></font>
[....]<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target network-online.target<font></font>
</code></pre></div></div>

<h2 id="windows-consideration-1"><a href="#windows-consideration-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise en compte de Windows</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe des bibliothèques externes pour générer un script de démarrage compatible Windows, veuillez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.npmjs.com/package/pm2-windows-service&amp;usg=ALkJrhiSO2G5ASSZo7w8QAS1D2O3Mf1C1Q"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vérifier pm2-windows-service</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.npmjs.com/package/pm2-windows-startup&amp;usg=ALkJrhiCsFsy3BIUu6urvtv3jg7g1mFx3g"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-windows-startup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour tirer le meilleur parti de PM2 et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.io/&amp;usg=ALkJrhgujPlYQc2dzmor3GRuIXGA9wPL2A"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PM2.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , veuillez vous assurer que votre version PM2 est à jour.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez trouver le journal des modifications ici: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/Unitech/pm2/releases&amp;usg=ALkJrhjtZ_1T_lAZTKZeVF8RgHDveycF8g"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Unitech/pm2/releases</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="updating-pm2-1"><a href="#updating-pm2-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour de PM2</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mise à jour de PM2 est extrêmement rapide (moins de quelques secondes) et transparente.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous d'abord que vous avez correctement enregistré tous vos processus:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 save
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, installez la dernière version PM2 de NPM:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>pm2 <span class="nt">-g</span>
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et enfin, mettez à jour le processus PM2 en mémoire:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 update
</code></pre></div></div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout, vous avez maintenant un système PM2 frais et à jour!</font></font></p>

<h2 id="updating-startup-script-1"><a href="#updating-startup-script-1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour du script de démarrage</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous mettez à niveau votre version de Node.js, le chemin binaire du nœud changera. </font><font style="vertical-align: inherit;">Pour mettre à jour le script de démarrage PM2, exécutez:</font></font></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pm2 unstartup
<span class="nv">$ </span>pm2 startup
</code></pre></div></div>

<h2 id="using-pm2keymetrics-in-aws-elastic-beanstalk"><a href="#using-pm2keymetrics-in-aws-elastic-beanstalk"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de PM2 / Keymetrics dans AWS Elastic Beanstalk</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette page vous guidera étape par étape dans l'intégration PM2 / Keymetrics dans un environnement Beanstalk. </font><font style="vertical-align: inherit;">Nous vous recommandons d'utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3.html&amp;usg=ALkJrhix5Z62ywe5RITlzoLGx5exQ3VSLA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eb cli</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour un déploiement plus facile.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons créé un référentiel pour des tests faciles: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/keymetrics/pm2-ebs-demo&amp;usg=ALkJrhgKJR8e6EXgI-nRU8IzbZJ26MpqtA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pm2-ebs-demo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p>

<h2 id="setup-beanstalk"><a href="#setup-beanstalk"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer Beanstalk</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accédez au répertoire de votre application et utilisez </font></font><code class="language-plaintext highlighter-rouge">eb init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour configurer Beanstalk.</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons nous assurer que Beanstalk essaiera de lancer votre application en utilisant </font></font><code class="language-plaintext highlighter-rouge">npm start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;" class="">Pour ce faire, ajoutez un fichier de configuration qui définit la commande de nœud sur «npm start» dans le dossier .ebextension:</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">./.ebextensions/nodecommand.config</font></font></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>option_settings:<font></font>
  - namespace: aws:elasticbeanstalk:container:nodejs<font></font>
    option_name: NodeCommand<font></font>
    value: "npm start"<font></font>
</code></pre></div></div>

<h2 id="integrate-pm2"><a href="#integrate-pm2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intégrer PM2</font></font></a></h2>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le
 moyen le plus simple et le moins invasif de surveiller votre 
application à l'aide de PM2 est de l'exiger en tant que module npm. </font><font style="vertical-align: inherit;">Nous allons simplement changer la </font></font><code class="language-plaintext highlighter-rouge">package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">structure pour laisser pm2 démarrer l'application. </font><font style="vertical-align: inherit;">Ajoutez simplement pm2 à vos dépendances d'application: 
</font></font><code class="language-plaintext highlighter-rouge">npm install pm2 --save</code></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous devrons changer les scripts de démarrage. </font><font style="vertical-align: inherit;">Nous appelons PM2 depuis le dossier node_modules:</font></font></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"./node_modules/pm2/bin/pm2-runtime app.js"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"poststart"</span><span class="p">:</span><span class="w">  </span><span class="s2">"node ./node_modules/pm2/bin/pm2 logs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personnalisez le </font></font><code class="language-plaintext highlighter-rouge">"start"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script en fonction de vos besoins.</font></font></li>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le </font></font><code class="language-plaintext highlighter-rouge">"poststart"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script est optionnel, mais permet une simple vérification des journaux directement sur le tableau de bord AWS.</font></font></li>
</ul>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est tout! </font><font style="vertical-align: inherit;" class="">Exécutez </font></font><code class="language-plaintext highlighter-rouge">eb deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;" class="">pour obtenir une instance PM2 sur vos instances ElasticBeanstalk avec une surcharge minimale.</font></font></p>

<h2 id="integrate-pm2-with-keymetrics"><a href="#integrate-pm2-with-keymetrics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intégrez PM2 avec Keymetrics</font></font></a></h2>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons transmettre deux variables à PM2 depuis l'environnement pour le lier à Keymetrics: </font></font><code class="language-plaintext highlighter-rouge">KEYMETRICS_PUBLIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code class="language-plaintext highlighter-rouge">KEYMETRICS_SECRET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>

<ul>
  <li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors de la création de l'environnement à partir du cli:
</font></font><code class="language-plaintext highlighter-rouge">eb create --envvars KEYMETRICS_PUBLIC=XXXXX,KEYMETRICS_SECRET=XXXXXX
</code></li>
  <li>You can also add those variables in the AWS dashboard in the Software Configuration options.</li>
</ul>

<p>Then follow-up the pm2 integration procedure, and pm2 will auto-link the application at start.</p>

<h2 id="using-pm2-on-cloud-providers"><a href="#using-pm2-on-cloud-providers">Using PM2 on Cloud Providers</a></h2>

<p>You might find yourself in a situation in which you do not have access to the CLI to start your Node.js applications.</p>

<p>In such a situation, pm2 must be added as a dependency and must be called with the start script.</p>

<h2 id="prepare-your-app"><a href="#prepare-your-app">Prepare your app</a></h2>

<h3 id="set-your-ecosystem-file"><a href="#set-your-ecosystem-file">Set your ecosystem file</a></h3>

<p>Generate an <code class="language-plaintext highlighter-rouge">ecosystem.config.js</code> template with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 init
</code></pre></div></div>

<p>Modify the ecosystem file to match your needs:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">env</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">development</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">env_production</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">NODE_ENV</span><span class="p">:</span> <span class="dl">"</span><span class="s2">production</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p class="tip">Learn more about ecosystem file <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/application-declaration/&amp;usg=ALkJrhgLOPyGgN5hfoMh30YrKCeO6IeQwg">here</a>.</p>

<h3 id="add-pm2-as-a-module"><a href="#add-pm2-as-a-module">Add PM2 as a module</a></h3>

<p>Add pm2 as a dependency to your projet.</p>

<p>With npm:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>pm2
</code></pre></div></div>

<p>With yarn:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add pm2
</code></pre></div></div>

<h3 id="start-script-in-packagejson"><a href="#start-script-in-packagejson">Start script in package.json</a></h3>

<p>In your <code class="language-plaintext highlighter-rouge">package.json</code>, modify your <code class="language-plaintext highlighter-rouge">start</code> script like the following:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pm2-runtime start ecosystem.config.js --env production"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="deploy-your-app"><a href="#deploy-your-app">Deploy your app</a></h2>

<p>You can now deploy your application in your cloud providers like you would have done for a regular node.js app.</p>

<h2 id="auto-restart-apps-on-file-change"><a href="#auto-restart-apps-on-file-change">Auto restart apps on file change</a></h2>

<p>PM2 can automatically restart your application when a file is modified in the current directory or its subdirectories:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 start app.js <span class="nt">--watch</span>
</code></pre></div></div>

<p>If <code class="language-plaintext highlighter-rouge">--watch</code> is enabled, stopping it won’t stop watching:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pm2 stop 0</code> will not stop watching</li>
  <li><code class="language-plaintext highlighter-rouge">pm2 stop 0 --watch</code> will stop watching</li>
</ul>

<p>Restart with <code class="language-plaintext highlighter-rouge">--watch</code> will toggle the <code class="language-plaintext highlighter-rouge">watch</code> parameter.</p>

<p>To watch specific paths, please use a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/doc/en/runtime/guide/ecosystem-file/&amp;usg=ALkJrhh0HnXbYAQ7j0FH2M53iD361xiGjA">Ecosystem File</a>, <code class="language-plaintext highlighter-rouge">watch</code> can take a string or an array of paths. Default is <code class="language-plaintext highlighter-rouge">true</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">apps</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">script</span><span class="p">:</span> <span class="dl">"</span><span class="s2">app.js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">watch</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">server</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">client</span><span class="dl">"</span><span class="p">],</span>
    <span class="c1">// Delay between restart</span>
    <span class="na">watch_delay</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="na">ignore_watch</span> <span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">client/img</span><span class="dl">"</span><span class="p">],</span>
    <span class="na">watch_options</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">followSymlinks</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Notes:</p>

<p><code class="language-plaintext highlighter-rouge">watch_options</code> is an object that will replace options given to chokidar. Please refer to <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/paulmillr/chokidar&amp;usg=ALkJrhiJALJOTO1yg7ILkbSaZwPjGVFszQ#api">chokidar documentation</a> for the definition.</p>

<p>PM2 is giving chokidar these Default options:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var watch_options = {<font></font>
  persistent    : true,<font></font>
  ignoreInitial : true<font></font>
}<font></font>
</code></pre></div></div>


            <a class="edit-page-button" target="_blank" href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://github.com/pm2-hive/pm2-hive.github.io/tree/master/docs/full.md&amp;usg=ALkJrhhi9Up3hCJHRowVoc19dA9fbnVUdg" title="Modifier la page">
              <i class="fa fa-2x fa-github" aria-hidden="true"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
              Contribuez à cette page
            </font></font></a>

            <div id="disqus_thread"><iframe id="dsq-app9490" name="dsq-app9490" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" sandbox="allow-forms allow-popups allow-same-origin allow-scripts" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 586px !important;" src="translate_c_data/a_002.html" width="100%" frameborder="0"></iframe><iframe id="dsq-app9487" name="dsq-app9487" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 394px !important;" src="translate_c_data/a_002.html" horizontalscrolling="no" verticalscrolling="no" width="100%" frameborder="0"></iframe></div>
            <script type="text/javascript">
              /* * * CONFIGURATION VARIABLES * * */
              var disqus_shortname = 'pm2';

              /* * * DON'T EDIT BELOW THIS LINE * * */
              (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href=https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://disqus.com/%3Fref_noscript&amp;usg=ALkJrhg6bfA8Wp_om2ZSbWfP-56Uah7_2g rel=nofollow>comments powered by Disqus.</a></noscript>
            </article>
          </div>
        </div>
      </section>
    </main>
    <footer>
  <div class="section-background">
    <div class="section-wrapper">
      <div class="hexagon hexagon-10"></div>
      <div class="hexagon hexagon-11"></div>
    </div>
  </div>
  <div class="section-wrapper">
    <nav class="main-nav">
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/&amp;usg=ALkJrhgSSTYquOkZbLSJzJqi-5Qldab2sg" title="Aller à la page d'accueil" class="logo-link">
        <img alt="Logo PM2" src="translate_c_data/logo.png">
      </a>
      <div class="doc-links">
        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/quick-start/&amp;usg=ALkJrhizG1wBySkC_o81puNYwIXUNlYixA" title="Aller au démarrage rapide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Démarrage rapide
        </font></font></a>
        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/&amp;usg=ALkJrhgKpyqLa5MTjhVUGSPCJtEnD9oT1w" title="Aller à la documentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Documentation
        </font></font></a>
        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/docs/usage/use-pm2-with-cloud-providers/&amp;usg=ALkJrhjYgDvOZy4U3evk6_Atj2sm_c2cyg" title="Aller aux intégrations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Intégrations
        </font></font></a>
      </div>
      <div class="button-border">
        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://id.keymetrics.io/api/oauth/register&amp;usg=ALkJrhgTnPjY2avaxkvTOvWVObVrjm4v1w" title="Commencer" class="button accent-border border-corners big inner-shadows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Commencer
        </font></font></a>
      </div>
    </nav>
    <div class="below-nav">
      <div class="copyright"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">© 2019 PM2. </font><font style="vertical-align: inherit;">Tous les droits sont réservés.</font></font></div>
      <div>
        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/assets/terms_conditions.pdf&amp;usg=ALkJrhg-OSI3M9h1cl1zcGprHnOm5TiBeA" title="Conditions d'utilisation ouvertes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conditions d'utilisation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        //
         </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;hl=fr&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=auto&amp;sp=nmt4&amp;tl=fr&amp;u=https://pm2.keymetrics.io/assets/privacy_policy.pdf&amp;usg=ALkJrhhcz_3QO98WrbX1_VG-tPSMIfCLaw" title="Politique de confidentialité ouverte"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique de confidentialité</font></font></a>
      </div>
    </div>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51734350-5', 'auto');
  ga('require', 'linkid');
  ga('send', 'pageview');
</script>


    <script src="translate_c_data/docsearch.js"></script>
    <script>
      docsearch({
        apiKey: '1d274d1e258b11c96ef6cfc32455be56',
        indexName: 'keymetrics',
        inputSelector: '.search-field input',
      });
    </script>
    <script src="translate_c_data/docs.js"></script>
    <script src="translate_c_data/menu.js"></script>
  

<script>_addload(function(){_setupIW('com');_csi('en','fr','https://pm2.keymetrics.io/docs/usage/pm2-doc-single-page/');});</script><script type="text/javascript">function gtElInit() {var lib = new google.translate.TranslateService();lib.translatePage('en', 'fr', function () {});}</script><script type="text/javascript" src="translate_c_data/element.js"></script><div id="goog-gt-tt" class="goog-tooltip skiptranslate" dir="ltr" style="visibility: hidden; left: 737px; top: 2714px; display: none;"><div style="padding: 8px;"><div><div class="logo"><img src="translate_c_data/translate_24dp.png" alt="Google Traduction" width="20" height="20"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Texte d'origine</h1></div><div class="middle" style="padding: 8px;"><div class="original-text">Instead of  you can pass:</div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Proposer une meilleure traduction</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none; opacity: 0;"></div></div><iframe style="display: none;"></iframe><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><span><div style="display: none; z-index: 2147483647;" class="gmnoprint"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_n.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_n.png"><img style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_w.png"><img style="position: absolute; left: 0px; top: 0px; width: 8px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_e.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_s.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 8px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_s.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iws_c.png"><div class="SPRITE_iws_nw" style="overflow: hidden;"></div><div class="SPRITE_iws_ne" style="overflow: hidden;"></div><div class="SPRITE_iws_sw" style="overflow: hidden;"></div><div class="SPRITE_iws_se" style="overflow: hidden;"></div><div class="SPRITE_iws_tap" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_l" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_u" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ul" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_rd" style="overflow: hidden;"></div><div class="SPRITE_iws_tap_ld" style="overflow: hidden;"></div><div class="SPRITE_iws_tab_dl" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_dr" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_l" style="overflow: hidden; display: none;"></div><div class="SPRITE_iws_tab_r" style="overflow: hidden; display: none;"></div></div></span><div id="google-infowindow" class="notranslate"><div style="display: none; z-index: 2147483647;" class="gmnoprint"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_n.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_n.png"><img style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_w.png"><img style="position: absolute; left: 0px; top: 0px; width: 6px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_e.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_s0.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 6px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_s0.png"><img style="position: absolute; left: 0px; top: 0px; width: 628px; height: 598px; user-select: none; border: 0px none; padding: 0px; margin: 0px;" src="translate_c_data/iw_c.png"><div class="SPRITE_iw_nw" style="overflow: hidden;"></div><div class="SPRITE_iw_ne" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_l" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_u" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ul" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_rd" style="overflow: hidden;"></div><div class="SPRITE_iw_xtap_ld" style="overflow: hidden;"></div><div class="SPRITE_iw_sw0" style="overflow: hidden;"></div><div class="SPRITE_iw_se0" style="overflow: hidden;"></div><div class="SPRITE_close" style="overflow: hidden; z-index: 10000; cursor: pointer; visibility: visible;"></div><div class="SPRITE_maximize" style="overflow: hidden; z-index: 10000; visibility: hidden; cursor: pointer; display: none;"></div><div class="SPRITE_restore" style="overflow: hidden; z-index: 10001; visibility: hidden; cursor: pointer; display: none;"></div></div></div><div style="display: none;"><iframe sandbox="" id="google-feedback-frame" name="FEEDBACK_TARGET_IFRAME_NAME"></iframe></div></body></html>