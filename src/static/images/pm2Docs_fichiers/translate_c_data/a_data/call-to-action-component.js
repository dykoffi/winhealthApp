/*! 20201021-14_b2-PR-30972-DEV-77372-cta-all-placements-in-lazy-module-847e364815b-SNAPSHOT 2020-10-21 */

!function(){const t={ctaButtonHeight:24,ctaAnchorWidth:72,ctaAnchorMarginTop:5,ctaAnchorMarginRight:5,ctaAnchorMarginLeft:10},e=t.ctaButtonHeight+t.ctaAnchorMarginTop,a=t.ctaAnchorWidth+t.ctaAnchorMarginRight+t.ctaAnchorMarginLeft;class n{constructor(t,e){this.rbox=t,this.itemContainer=e,this.labelsBox=e.labelsBox,this.actionText=e.video_data["cta-text"],n.styleInjected||n.injectCallToActionStyle()}static injectCallToActionStyle(){const e=`${t.ctaButtonHeight}px`,a=`${t.ctaAnchorWidth}px`,i=`${t.ctaAnchorMarginTop}px`,o=`${t.ctaAnchorMarginRight}px`,l=`${t.ctaAnchorMarginLeft}px`;TRC.dom.injectStyle(`a.tbl-cta-style { width: 100%; } a.tbl-cta-style span.video-label-box.label-box-cta { display: -ms-flexbox; -ms-flex-pack: justify; -ms-flex-wrap: wrap; display: flex; justify-content: space-between; flex-wrap: wrap; } a.tbl-cta-style span.label-flex-cta-item { flex-basis: 100%; } a.tbl-cta-style span.branding-flex-cta-item { -ms-flex: 0 1 1px; -ms-flex-order: 1; order: 1; flex-basis: 1px; margin-top: 5px; } a.tbl-cta-style span.branding-flex-cta-non-ie { flex-grow: 1; } a.tbl-cta-style a.cta-anchor { margin: ${i} ${o} 0px ${l}; padding: 0; width: ${a}; vertical-align: top; box-sizing: content-box; align-self: start; order: 2; flex-shrink: 0; } a.tbl-cta-style a.cta-anchor button.cta-button { margin: 0; height: ${e}; font-size: 11px; line-height: 13.2px; border-radius: 4px; border-width: 1px; border-style: solid; text-transform: capitalize; letter-spacing: normal; box-sizing: border-box; font-weight: 400; cursor: pointer; outline: none; padding: 1px 4px; width: 100%; min-width: 1px; opacity: 1; } a.tbl-cta-style a.cta-anchor button.cta-button:hover { background-color: transparent; letter-spacing: normal; }`,null),n.styleInjected=!0}static adjustLabelBoxesHeight(t){const{boxes:e}=t,a=n.getMaxLabelBoxHeightInPlacement(e,t);n.setItemsLabelBoxNewHeight(a,t)}static setItemsLabelBoxNewHeight(t,e){const{boxes:a}=e;t>0&&a.forEach(a=>{let n;e.shouldAdjustAllItemsHeight?n=t:a.hasCallToAction&&(n=a.labelBoxFixedHeight),a.labelsBox.style.height=`${n}px`})}static getMaxLabelBoxHeightInPlacement(t,e){let a=0;return t.forEach(t=>{let i;(e.shouldAdjustAllItemsHeight||t.hasCallToAction)&&((i=n.getLabelBoxFixedHeight(e,t.labelsBox))>0&&t.hasCallToAction&&(t.labelBoxFixedHeight=i),a=Math.max(i,a))}),e.cachedLabelsBoxClientHeight=void 0,a}static getLabelBoxFixedHeight(t,a){const{branding:n}=a;let i;if(!n)return 0;if(t.isFeedCard&&t.isResponsive)return 0;i=t.shouldAdjustAllItemsHeight?t.cachedLabelsBoxClientHeight=t.cachedLabelsBoxClientHeight||a.clientHeight:a.clientHeight;const o=n.clientHeight;return i-o+Math.max(e,o)}renderCTAButton(){const t=this.createCtaAnchorElement();this.addCtaToDom(t)}addCtaToDom(t){const e=this.labelsBox["video-title"];this.itemContainer.link&&TRC.dom.addClass(this.itemContainer.link,"tbl-cta-style"),TRC.dom.addClass(this.labelsBox,"label-box-cta"),TRC.dom.addClass(e,"label-flex-cta-item"),this.updateBrandingStyling(),this.labelsBox.appendChild(t)}updateBrandingStyling(){const{branding:t}=this.labelsBox;if(t){TRC.Browser.ie||TRC.dom.addClass(t,"branding-flex-cta-non-ie"),TRC.dom.addClass(t,"branding-flex-cta-item");const e=parseInt(document.trcGetCurrentStyle(this.labelsBox,"width"),10);t.style.maxWidth=`${e-a}px`}}createCtaAnchorElement(){const{rbox:t}=this,e=TRC.dom.createHTMLElement("a",{className:"cta-anchor",target:t.getLinkTarget(t.getProviderType(this.itemContainer.video_data),t.linkTargetConf,t.defaultLinkTarget),href:this.createAnchorHref()});return e.ctaButton=this.createCtaButton(),e.appendChild(e.ctaButton),e}createCtaButton(){return TRC.dom.createHTMLElement("button",{type:"button",className:"cta-button",innerText:this.actionText})}createAnchorHref(){const{link:t,rbox:e}=this.itemContainer,a=e.shiftRedirOnclick?t.logger_url:e.attachHeatMapDataToLink(t.logger_url,null);return`${a}&cta=true`}}TRC.CallToActionComponent=n}();