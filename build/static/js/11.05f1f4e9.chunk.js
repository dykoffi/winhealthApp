(this.webpackJsonpwin_health=this.webpackJsonpwin_health||[]).push([[11],{101:function(e,t,a){"use strict";var n=a(211);var l=a(210);function r(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},138:function(e,t){},158:function(e,t,a){"use strict";var n=a(52),l=a(0),r=a.n(l),c=a(8),s=a.n(c),i=a(70),o=a.n(i),u=new(a(15).a),m=function(){u.get("user")&&u.get("currentPage")&&(u.remove("user",{path:"/"}),u.remove("currentPage",{path:"/"}),window.location="/connexion")},d=a(775),p=a(421),f=a(779),E=a(224),h=a.n(E),v=a(222),b=a.n(v),g=a(223),N=a.n(g),O=function(e){var t=e.toggleFullscreen,a=e.title,c=e.fullscreen,s=e.user;o.a.locale("fr");var i=Object(l.useState)(o()().format("ddd DD MMMM YYYY - HH : mm : ss")),u=Object(n.a)(i,2),E=u[0],v=u[1],g=r.a.useState(null),O=Object(n.a)(g,2),x=O[0],j=O[1],y=function(){j(null)};return Object(l.useEffect)((function(){var e=setInterval((function(){v(o()().format("ddd DD MMMM YYYY - HH : mm : ss"))}),1e3);return function(){clearInterval(e)}}),[]),r.a.createElement("div",{className:"row p-1"},r.a.createElement("div",{className:"col-3"},r.a.createElement("small",{className:"font-weight-bold"},a)),r.a.createElement("div",{className:"col-6 text-center"},r.a.createElement("small",null,E)),r.a.createElement("div",{className:"col-3 text-center"},r.a.createElement(d.a,{size:"small",onClick:t},c?r.a.createElement(N.a,null):r.a.createElement(b.a,null)),r.a.createElement(d.a,{"aria-controls":"simple-menu","aria-haspopup":"true",size:"small",onClick:function(e){j(e.currentTarget)}},r.a.createElement(h.a,null)),r.a.createElement(p.a,{elevation:1,id:"simple-menu",anchorEl:x,keepMounted:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},open:Boolean(x),onClose:y},r.a.createElement(f.a,{style:{fontSize:"13px"},onClick:y},"Notification"),r.a.createElement(f.a,{style:{fontSize:"13px"},onClick:m},"D\xe9connexion")),r.a.createElement("small",null,s)))};O.prototype={toggleFullscreen:s.a.func.isRequired,fullscreen:s.a.bool.isRequired,title:s.a.string.isRequired};t.a=O},47:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n=a(137),l=a.n(n),r={timeout:1e3,url:"http://".concat("localhost:8000"),local:"http://".concat("localhost",":3000")},c=l()("http://localhost:8000")},736:function(e,t,a){"use strict";a.r(t);var n=a(52),l=a(0),r=a.n(l),c=a(48),s=a(15),i=a(1),o=[{title:"Administration",icon:"action-dashboard",desc:"Toutes les taches de l'administrateur",links:[{id:1,label:"Accueil",path:"/admin"},{id:1,label:"Utilisateurs",path:"/admin/users"},{id:2,label:"Services",path:"/admin/services"},{id:3,label:"Profils",path:"/admin/profils"},{id:4,label:"Logs",path:"/admin/logs"}]}],u=a(87),m=a(90),d=a(50),p={visible:!1},f=function(){return{type:"DISABLE_MODAL",text:"Voir le modal",visible:!1}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE_MODAL":case"DISABLE_MODAL":return Object(d.a)(Object(d.a)({},e),{},{visible:t.visible});default:return e}},h=a(56),v=a.n(h),b=a(59),g=a(53),N=a.n(g),O=a(70),x=a.n(O),j=a(47),y=new s.a,A={listProfil:[],loading:!1,aucun:!1},w=function(e){return{type:"LIST_PROFIL_SUCCESS",text:"lister tous les profils",loading:!1,aucun:!1,list:e}},L=function(e){return{type:"LIST_PROFIL_VIDE",text:"lister tous les profils",list:e,aucun:!0,loading:!1}};function S(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LIST_PROFIL_LOADING",text:"lister tous les profils",list:[],loading:!0,aucun:!1}),N.a.get("".concat(j.a.url,"/admin/list/").concat(e,"/profils")).then((function(e){return e.data.rows})).then((function(e){0!==e.length?a(w(e)):a(L(e))})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_PROFIL_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{loading:t.loading,aucun:t.aucun,listProfil:t.list});case"LIST_PROFIL_VIDE":return Object(d.a)(Object(d.a)({},e),{},{listProfil:t.list,aucun:t.aucun,loading:t.loading});case"LIST_PROFIL_LOADING":return Object(d.a)(Object(d.a)({},e),{},{aucun:t.aucun,loading:t.loading,listProfil:t.list});default:return e}},U=a(101),P={currentProfil:null,loadingProfil:!1,modal:!1},k=new s.a,C=function(e){return{type:"MODAL_DELETE",modal:e}};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_PROFIL_SUCCESS":case"DELETE_PROFIL":return Object(d.a)(Object(d.a)({},e),{},{currentProfil:t.currentProfil,loadingProfil:t.loadingProfil});case"LOADING_PROFIL":return Object(d.a)(Object(d.a)({},e),{},{loadingProfil:t.loadingProfil});case"MODAL_DELETE":return Object(d.a)(Object(d.a)({},e),{},{modal:t.modal});default:return e}},I={listApps:[],appActive:null,nomApp:null};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_APPS":return Object(d.a)(Object(d.a)({},e),{},{listApps:t.listApps});case"APP_ACTIVE":return Object(d.a)(Object(d.a)({},e),{},{appActive:t.appActive,nomApp:t.nomApp});default:return e}},D=Object(u.c)({modalReducer:E,listReducer:R,detailsReducer:_,appReducer:T}),M=Object(u.d)(D,Object(u.a)(m.a)),G={listApps:[],currentApp:null},q=function(e){return{type:"SET_LIST_APPS",listApps:e}};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIST_APPS":return Object(d.a)(Object(d.a)({},e),{},{listApps:t.listApps});case"SET_APP_ACTIVE":return Object(d.a)(Object(d.a)({},e),{},{currentApp:t.currentApp});default:return e}},F={listLogs:[],typeLogs:null,loading:!1},Y=function(e){return{type:"SET_LIST_LOGS",listLogs:e,loading:!1}};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIST_LOGS":return Object(d.a)(Object(d.a)({},e),{},{listLogs:t.listLogs,loading:t.loading});case"SET_TYPE_LOGS":return Object(d.a)(Object(d.a)({},e),{},{typeLogs:t.typeLog});case"LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:t.loading});default:return e}},B=Object(u.c)({appReducer:V,listLogsReducer:z}),W=Object(u.d)(B,Object(u.a)(m.a)),H={visible:!1},J=function(){return{type:"DISABLE_MODAL",text:"Cache le modal",visible:!1}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE_MODAL":case"DISABLE_MODAL":return Object(d.a)(Object(d.a)({},e),{},{visible:t.visible});default:return e}},K=new s.a,Q={listUser:[],loading:!1,aucun:!1},Z=function(e){return{type:"LIST_USER_SUCCESS",text:"lister tous les users",loading:!1,aucun:!1,list:e}},$=function(e){return{type:"LIST_USER_VIDE",text:"lister tous les users",list:e,aucun:!0,loading:!1}};function ee(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LIST_USER_LOADING",text:"lister tous les users",list:[],loading:!0,aucun:!1}),N.a.get("".concat(j.a.url,"/admin/list/").concat(e,"/users")).then((function(e){return e.data.rows})).then((function(e){0!==e.length?a(Z(e)):a($(e))})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_USER_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{loading:t.loading,aucun:t.aucun,listUser:t.list});case"LIST_USER_VIDE":return Object(d.a)(Object(d.a)({},e),{},{listUser:t.list,aucun:t.aucun,loading:t.loading});case"LIST_USER_LOADING":return Object(d.a)(Object(d.a)({},e),{},{aucun:t.aucun,loading:t.loading,listUser:t.list});default:return e}},ae={currentUser:null,loadingUser:!1,modal:!1},ne=new s.a,le=function(e){return{type:"MODAL_DELETE",modal:e}};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER_SUCCESS":case"DELETE_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.currentUser,loadingUser:t.loadingUser});case"LOADING_USER":return Object(d.a)(Object(d.a)({},e),{},{loadingUser:t.loadingUser});case"MODAL_DELETE":return Object(d.a)(Object(d.a)({},e),{},{modal:t.modal});default:return e}},ce={listApps:[],appActive:null,nomApp:null};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_APPS":return Object(d.a)(Object(d.a)({},e),{},{listApps:t.listApps});case"APP_ACTIVE":return Object(d.a)(Object(d.a)({},e),{},{appActive:t.appActive,nomApp:t.nomApp});default:return e}},ie=Object(u.c)({modalReducer:X,listReducer:te,detailsReducer:re,appReducer:se}),oe=Object(u.d)(ie,Object(u.a)(m.a)),ue=a(17),me=a(8),de=a.n(me),pe=function(e){var t=e.title,a=e.details,n=e.icon,l=e.link,c=e.textColor,s=void 0===c?"white-text":c,i=e.bgColor;return r.a.createElement(ue.b,{to:l},r.a.createElement("div",{className:"row Verticalcard white mt-3",style:{marginLeft:"0.05cm"}},r.a.createElement("div",{className:"col-12 d-flex align-items-center ".concat(s," ").concat(i," flex-column")},n&&r.a.createElement("i",{style:{fontSize:"13px"},className:"mdi-".concat(n," mdi-3x ").concat(s," ").concat(i," ")}),r.a.createElement("small",{className:"".concat(s," ").concat(i," px-2"),style:{fontSize:"12px",zIndex:10,fontWeight:"bold"}},t)),r.a.createElement("div",{className:"col-12 pl-3 pb-2 text-center text-secondary"},r.a.createElement("div",null,r.a.createElement("small",{style:{fontSize:"12px"}},a)))))};pe.prototype={title:de.a.string.isRequired,details:de.a.string.isRequired,icon:de.a.string.isRequired,textColor:de.a.string.isRequired,bgColor:de.a.string.isRequired,link:de.a.string};var fe=pe,Ee=function(e){var t=e.sendTitle;return Object(l.useEffect)((function(){t("Accueil")})),r.a.createElement("div",{className:"Accueil row p-3"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Utilisateurs",details:"Creer, modifier, supprimer et attribuer des droits aux utilisateurs",icon:"social-group",bgColor:"white",textColor:"blue-text",link:"/admin/users"})),r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Profil",details:"Creer, modifier et supprimer des profils avec des droits int\xe9gr\xe9s",icon:"action-verified-user",bgColor:"white",textColor:"green-text",link:"/admin/profils"})),r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Services",details:"Creer et deployer des services \xe0 la vol\xe9e et sans rechargement",icon:"action-wallet-travel",bgColor:"white",textColor:"purple-text",link:"/admin/services"})),r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Logs",details:"Consulter les fichiers journaux g\xe9n\xe9r\xe9s par tous les utilisateurs du syst\xe8me",icon:"action-description",bgColor:"white",textColor:"orange-text",link:"/admin/logs"})),r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Com",details:"Partager des informations avec tous les utilisateurs du syst\xe8me (indisponible)",icon:"hardware-headset-mic",bgColor:"white",textColor:"red-text"})),r.a.createElement("div",{className:"col-2 d-flex"},r.a.createElement(fe,{title:"Settings",details:"R\xe9gler et param\xe9trer tous les modules du syst\xe8me (indisponible)",icon:"action-settings",bgColor:"white",textColor:"grey-text darken-4"})))))},he=function(e){var t=e.icon,a=e.title,n=e.details,l=e.click;return r.a.createElement("div",{className:"row white item border-bottom border-light",onClick:function(){return l()}},r.a.createElement("div",{className:"col-2 d-flex align-items-center"},r.a.createElement("i",{className:"mdi-".concat(t," mdi-2x text-secondary"),style:{opacity:.5}})),r.a.createElement("div",{className:"col-8 d-flex flex-column justify-content-center p-2"},r.a.createElement("small",{className:"text-secondary"},a),r.a.createElement("small",{className:"grey-text"},n)),r.a.createElement("div",{className:"col-2 d-flex align-items-center"},r.a.createElement("i",{className:"mdi-navigation-chevron-right text-secondary"})))};he.prototype={icon:de.a.string,title:de.a.string.isRequired,details:de.a.string,click:de.a.func.isRequired};var ve=he,be=a(16),ge=function(e){var t=e.text;return r.a.createElement("div",{className:"text-secondary text-center"},r.a.createElement("small",{className:"text-center"},t))};ge.prototype={text:de.a.string.isRequired};var Ne=ge,Oe=Object(c.b)((function(e){var t=e.listReducer,a=t.listUser,n=t.loading,l=t.aucun,r=e.appReducer;return{listUser:a,loading:n,aucun:l,listApps:r.listApps,appActive:r.appActive}}),{thunkListUser:ee,thunklistApps:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N()({url:"/admin/list/apps/",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){t({type:"LIST_APPS",listApps:e})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},thunkSearchListUser:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"LIST_USER_LOADING",text:"lister tous les users",list:[],loading:!0,aucun:!1}),0===t.trim().length?N.a.get("".concat(j.a.url,"/admin/list/").concat(e,"/users")).then((function(e){return e.data.rows})).then((function(e){0!==e.length?n(Z(e)):n($(e))})).catch((function(e){console.log(e)})):N.a.get("".concat(j.a.url,"/admin/search/").concat(e,"/user/").concat(t)).then((function(e){return e.data.rows})).then((function(e){0!==e.length?n(Z(e)):n($(e))})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},thunkDetailsUser:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LOADING_USER",loadingUser:!0}),N()({url:"/admin/details/user/".concat(e),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){var t;a((t=e,{type:"CURRENT_USER_SUCCESS",currentUser:Object(U.a)(t),loadingUser:!1}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},activeApp:function(e,t){return{type:"APP_ACTIVE",appActive:e,nomApp:t}}})((function(e){var t=e.thunkDetailsUser,a=e.thunkListUser,n=e.thunklistApps,c=e.thunkSearchListUser,s=e.activeApp,i=e.appActive,o=e.listApps,u=e.listUser,m=e.loading,d=e.aucun;return Object(l.useEffect)((function(){n(),a(i)}),[n,a,i]),r.a.createElement("div",{className:"row white Verticalist "},r.a.createElement("input",{onChange:function(e){c(i,e.target.value)},type:"text",placeholder:"Rechercher un utilisateur",className:"col-12 p-2 white bordertrans"}),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row chooseApp text-center"},o.map((function(e,t){var a=e.nomapp,n=e.codeapp;return r.a.createElement("div",{key:t,className:"col-sm m-1 ".concat(i===n&&"active"),onClick:function(){s(n,a)}},r.a.createElement("small",null,a))})))),r.a.createElement("div",{className:"col-12 text-center"},m&&r.a.createElement(be.a,null),d&&r.a.createElement(Ne,{text:"Aucun utilisateur"}),!d&&!m&&r.a.createElement(Ne,{text:"".concat(u.length," utilisateur(s)")})),r.a.createElement("div",{className:"col-12 items ombre",style:{height:"60vh",overflowY:"scroll",scrollbarWidth:"none"}},u.map((function(e,a){var n=e.nomuser,l=e.prenomsuser,c=e.mailuser,s=e.iduser;return r.a.createElement(ve,{icon:"social-person",title:n+" "+l,details:c,key:a,click:function(){return t(s)}})}))))})),xe=function(e){var t=e.close,a=e.confirm,n=e.text,l=e.titre;return r.a.createElement("div",{className:"Modal row"},r.a.createElement("div",{className:"col-12 p-3 white text-light text-dark",style:{opacity:.95}},r.a.createElement("h6",null,l),r.a.createElement("small",null,n),r.a.createElement("div",{className:"row d-flex justify-content-end pr-3 pt-2"},r.a.createElement("button",{onClick:t,className:"btn btn-secondary rounded-0"},r.a.createElement("small",null,"Annuler")),r.a.createElement("button",{onClick:a,className:"btn btn-info rounded-0"},r.a.createElement("small",null,"Continuer")))))};xe.prototype={titre:de.a.string.isRequired,close:de.a.func.isRequired,confirm:de.a.func.isRequired,text:de.a.string.isRequired};var je=xe,ye=function(e){var t=e.titre,a=e.close,n=e.confirm,l=e.text;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"Information col-12 d-flex justify-content-center align-items-start"},r.a.createElement("div",{className:"col-3 text-left mt-2"},r.a.createElement(je,{titre:t,confirm:n,close:a,text:l}))))};ye.prototype={titre:de.a.string.isRequired,close:de.a.func.isRequired,confirm:de.a.func.isRequired,text:de.a.string.isRequired};var Ae=ye,we=Object(c.b)((function(e){var t=e.detailsReducer;return{currentUser:t.currentUser,loadingUser:t.loadingUser,modal:t.modal}}),{thunkDeleteUser:function(e){var t=ne.get("user",{paht:"/"}),a=t.mailUser,n=t.codeapp;return function(){var t=Object(b.a)(v.a.mark((function t(l){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l({type:"LOADING_USER",loadingUser:!0}),N()({url:"/admin/delete/".concat(n,"/user/").concat(e),baseURL:j.a.url,method:"GET",params:{userMail:a,app:n}}).then((function(){l({type:"DELETE_USER",currentUser:null,loadingUser:!1}),oe.dispatch(ee(oe.getState().appReducer.appActive)),l(le(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:le})((function(e){var t=e.currentUser,a=e.loadingUser,n=e.modal,l=e.setModal,c=e.thunkDeleteUser;return r.a.createElement("div",{className:"row DetailsUser"},t&&t[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-8 d-flex flex-column"},r.a.createElement("div",null,r.a.createElement("small",null,"Nom :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].nomuser)),r.a.createElement("div",null,r.a.createElement("small",null,"Prenoms :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].prenomsuser)),r.a.createElement("div",null,r.a.createElement("small",null,"Contact :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].contactuser)),r.a.createElement("div",null,r.a.createElement("small",null,"Mail :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].mailuser)),r.a.createElement("div",null,r.a.createElement("small",null,"Module :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].nomapp)),r.a.createElement("div",null,r.a.createElement("small",null,"Poste :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].posteuser)),r.a.createElement("div",null,r.a.createElement("small",null,"Profil :"),r.a.createElement("small",{className:"font-weight-bold ml-2"},t[0].labelprofil))),r.a.createElement("div",{className:"col-4 text-center d-flex align-items-center"},r.a.createElement("i",{className:"mdi-social-person mdi-5x text-info"})),r.a.createElement("div",{className:"col-12",style:{height:"50vh",overflowY:"scroll",scrollbarWidth:"none"}},r.a.createElement("div",{className:"row p-4"},r.a.createElement("table",{className:"table table-sm table-borderless table-striped col-12"},r.a.createElement("thead",{className:""},r.a.createElement("tr",{className:"row"},r.a.createElement("th",{className:"col-1"},r.a.createElement("small",null,"N\xb0")),r.a.createElement("th",{className:"col-2"},r.a.createElement("small",null,"code")),r.a.createElement("th",{className:"col-9"},r.a.createElement("small",null,"droit")))),r.a.createElement("tbody",null,t.map((function(e,t){var a=e.labeldroit,n=e.codedroit;return r.a.createElement("tr",{className:"row",key:t},r.a.createElement("td",{className:"col-1"},r.a.createElement("small",null,t)),r.a.createElement("td",{className:"col-2"},r.a.createElement("small",null,n)),r.a.createElement("td",{className:"col-9"},r.a.createElement("small",null,a)))}))))))):r.a.createElement("div",{className:"d-flex align-items-center justify-content-center grey-text lighten-3 col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("i",{className:"mdi-editor-format-align-left mdi-3x col-12 text-center"}),r.a.createElement("small",{className:"text-center col-12"},"Aucun Utilisateur selectionn\xe9"))),a&&r.a.createElement("div",{className:"d-flex align-items-center justify-content-center col-12"},r.a.createElement(be.a,null)),t&&t[0]&&!a&&r.a.createElement("div",{className:"d-flex align-items-center justify-content-center col-12 text-info"},r.a.createElement("small",{onClick:function(){return l(!0)},style:{cursor:"pointer"}},"Supprimer cet utillisateur")),n&&t&&r.a.createElement(Ae,{text:"L'utilisateur '".concat(t[0].nomuser," ").concat(t[0].prenomsuser,"'  ne pourrat plus se connecter apres cette suppression. Voulez vous continuer ?"),close:function(){return l(!1)},titre:"Information",confirm:function(){return c(t[0].iduser)}}))}));function Le(e,t,a,n,l){var r,c,s=l;return!0===e&&(s+="0123456789"),!0===t&&(s+="abcdefghijklmnopqrstuvwxyz"),!0===a&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),!0===n&&(s+="!@#%&*()-_=+;,./?"),s.charAt((r=0,c=s.length,Math.floor(Math.random()*(c-r))+r))}var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],i=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],o=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],u="";e>0&&(u+=Le(a,n,l,r,t));for(var m=1;m<e;++m)u+=Le(c,s,i,o,t);return u},Re=function(e){var t=e.text,a=e.click,n=e.selected;return r.a.createElement("div",{className:"row Check p-1 ".concat(n&&"checked"),onClick:function(){return a()}},r.a.createElement("div",{className:"col-1 p-1 justify-content-center case"},r.a.createElement("div",{className:"p-2 bg-light"})),r.a.createElement("div",{className:"col-10 d-flex align-items-center"},r.a.createElement("span",{className:"font-weight-normal "},t)))};Re.prototype={text:de.a.string.isRequired,click:de.a.func.isRequired,selected:de.a.bool.isRequired};var Ue=Re,Pe=Object(c.b)((function(e){var t=e.appReducer;return{appActive:t.appActive,nomApp:t.nomApp}}),{disableModal:J,thunkUpdateListUser:function(e,t,a,n,l,r,c,s){var i=K.get("user",{paht:"/"}),o=i.mailuser,u=i.codeapp;return function(){var i=Object(b.a)(v.a.mark((function i(m){return v.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:N()({method:"post",url:"/admin/add/".concat(e,"/user"),baseURL:j.a.url,params:{userMail:o,app:u},data:{nomUser:t,prenomsUser:a,contactUser:n,mailUser:l,posteUser:r,profilUser:c,passUser:s,codeApp:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(){m({type:"LIST_USER_LOADING",text:"lister tous les users",list:[],loading:!0,aucun:!1}),N()({url:"/admin/list/".concat(e,"/users"),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){0!==e.length?m(Z(e)):m($(e))})).then((function(){m({type:"DISABLE_MODAL",text:"Cache le modal",visible:!1})})).catch((function(e){console.log(e)}))}));case 1:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}})((function(e){var t=e.disableModal,a=e.appActive,c=e.nomApp,s=e.thunkUpdateListUser,i=Object(l.useState)([]),o=Object(n.a)(i,2),u=o[0],m=o[1],d=Object(l.useState)(null),p=Object(n.a)(d,2),f=p[0],E=p[1],h=Object(l.useState)(null),v=Object(n.a)(h,2),b=v[0],g=v[1],O=Object(l.useState)(null),x=Object(n.a)(O,2),y=x[0],A=x[1],w=Object(l.useState)(""),L=Object(n.a)(w,2),S=L[0],R=L[1],U=Object(l.useState)(""),P=Object(n.a)(U,2),k=P[0],C=P[1],_=Object(l.useState)(""),I=Object(n.a)(_,2),T=I[0],D=I[1],M=Object(l.useState)(""),G=Object(n.a)(M,2),q=G[0],V=G[1],F=Object(l.useState)(""),Y=Object(n.a)(F,2),z=Y[0],B=Y[1],W=Object(l.useState)(Se(5)),H=Object(n.a)(W,1)[0];return Object(l.useEffect)((function(){g(!0),N()({url:"/admin/list/".concat(a,"/profils"),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){g(!1),0===e.length?A(!0):m(e)}))}),[a]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 FormAddUser Modal d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"row d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"col-5 white"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-5 p-3 text-left"},r.a.createElement("small",null,"Informations de l'utilisateur"),r.a.createElement("input",{type:"text",className:"col-12 mt-2 p-1 rounded",placeholder:"Nom",value:S,onChange:function(e){!function(e){var t=e.target.value;R(t)}(e)}}),r.a.createElement("input",{type:"text",className:"col-12 mt-2 p-1 rounded",placeholder:"Prenoms",value:k,onChange:function(e){!function(e){var t=e.target.value;C(t)}(e)}}),r.a.createElement("input",{type:"text",className:"col-12 mt-2 p-1 rounded",placeholder:"Contact",value:T,onChange:function(e){D(e.target.value)}}),r.a.createElement("input",{type:"text",className:"col-12 mt-2 p-1 rounded",placeholder:"Mail",value:q,onChange:function(e){V(e.target.value)}}),r.a.createElement("input",{type:"text",className:"col-12 mt-2 p-1 rounded",placeholder:"Poste",value:z,onChange:function(e){B(e.target.value)}}),r.a.createElement("hr",null),r.a.createElement("small",null,"Login :  ".concat(S[0]?S[0].toUpperCase()+"."+k.toLowerCase().split(" ")[0]:"")),r.a.createElement("br",null),r.a.createElement("small",null,"password :  ".concat(H))),r.a.createElement("div",{className:"col-6 p-3 text-left"},r.a.createElement("small",null,"Selectionner un profil de connexion ",c),r.a.createElement("div",{className:"row p-3 chooseProfil"},r.a.createElement("div",{className:'"col-12 p-3 '.concat(0===u.length&&"d-flex justify-content-center align-items-center"),style:{height:"50vh",overflowY:"scroll",scrollbarWidth:"none"}},b&&r.a.createElement(be.a,null),y?r.a.createElement(Ne,{text:"aucun profil d\xe9tect\xe9 pour ".concat(c)}):u.map((function(e,t){var n=e.labelprofil,l=e.idprofil;return r.a.createElement("div",{key:t,className:"col-12 ".concat(a===l&&"active")},r.a.createElement(Ue,{selected:f===l,text:n,key:l,click:function(){E(l)}}))}))))),r.a.createElement("div",{className:"col-12 d-flex justify-content-end pr-3 pb-3"},r.a.createElement("button",{className:"btn btn-secondary rounded-0",onClick:t},r.a.createElement("small",null,"Annuler")),r.a.createElement("button",{onClick:function(){s(a,S,k,T,q,z,f,H)},className:"btn btn-info rounded-0",disabled:0===S.trim().length||0===k.trim().length||0===z.trim().length||0===T.trim().length||0===q.trim().length||null===f},r.a.createElement("small",null,"Valider"))))))))})),ke=function(e){var t=e.nombre,a=e.titre,n=e.details,l=e.theme;return r.a.createElement("div",{className:"row p-2"},r.a.createElement("div",{className:"col-4 p-2 text-center align-items-center d-flex justify-content-center flex-column ".concat(l)},r.a.createElement("small",{className:"lead"},t),r.a.createElement("small",{className:""},a)),r.a.createElement("div",{className:"col-8 p-2"},r.a.createElement("small",null,n)))};ke.prototype={nombre:de.a.arrayOf[(de.a.string,de.a.number)],titre:de.a.string,details:de.a.string,theme:de.a.string};var Ce=ke,_e=Object(c.b)((function(e){return{listUser:e.listReducer.listUser,listApps:e.appReducer.listApps}}))((function(e){var t=e.listApps,a=e.listUser,c=Object(l.useState)(0),s=Object(n.a)(c,2),i=s[0],o=s[1];return Object(l.useEffect)((function(){N()({url:"/admin/list/users",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){o(e.length)}))}),[a.length]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:i,theme:"bg-info text-white rounded",titre:"User(s)",details:"L'ensemble de tous les utilisateur enregitr\xe9s dans le syst\xe8me"})),r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:t.length,theme:"white warning-text ombre rounded",titre:"App(s)",details:"Les appliations sont des modules compl\xe8tement ind\xe9pendants les uns des autres : GAP, DPI, PUI."})))})),Ie=Object(c.b)((function(e){return{modalVisible:e.modalReducer.visible,appActive:e.appReducer.appActive}}),{enableModal:function(){return{type:"ENABLE_MODAL",text:"Voir le modal",visible:!0}}})((function(e){var t=e.sendTitle,a=e.modalVisible,n=e.enableModal,c=e.appActive;return Object(l.useEffect)((function(){t("Utilisateurs")})),r.a.createElement("div",{className:"Users row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("section",{id:"user_list",className:"col-3 d-flex flex-column"},r.a.createElement(Oe,null),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn white text-info rounded-0 col-12",onClick:function(){return n()},title:c?"ajouter un utilisateur":"Veuillez choisir d'abord un module",disabled:null===c},r.a.createElement("small",null,"Ajouter un nouvel utilisateur")))),r.a.createElement("section",{className:"col-3 d-flex flex-column ml-3"},r.a.createElement(_e,null)),r.a.createElement("section",{id:"user_details",className:"col-4"},r.a.createElement(we,null)))),a&&r.a.createElement(Pe,null))})),Te=function(e){var t=e.sendTitle;return Object(l.useEffect)((function(){t("Services")})),r.a.createElement("div",{className:"Services row p-5 text-center d-flex flex-column justify-content-center align-items-center"},r.a.createElement("h6",{className:"lead"},"Page en consruction (12%)"),r.a.createElement(be.a,null))},De=Object(c.b)((function(e){var t=e.listReducer,a=t.listProfil,n=t.loading,l=t.aucun,r=e.appReducer;return{listProfil:a,loading:n,aucun:l,listApps:r.listApps,appActive:r.appActive}}),{thunkListProfil:S,thunklistApps:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N()({url:"/admin/list/apps/",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){t({type:"LIST_APPS",listApps:e})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},thunkSearchListProfil:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"LIST_PROFIL_LOADING",text:"lister tous les profils",list:[],loading:!0,aucun:!1}),0===t.trim().length?N.a.get("".concat(j.a.url,"/admin/list/").concat(e,"/profils")).then((function(e){return e.data.rows})).then((function(e){0!==e.length?n(w(e)):n(L(e))})).catch((function(e){console.log(e)})):N.a.get("".concat(j.a.url,"/admin/search/").concat(e,"/profil/").concat(t)).then((function(e){return e.data.rows})).then((function(e){0!==e.length?n(w(e)):n(L(e))})).catch((function(e){console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},thunkDetailsProfil:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"LOADING_PROFIL",loadingProfil:!0}),N()({url:"/admin/details/profil/".concat(e),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){var t;a((t=e,{type:"CURRENT_PROFIL_SUCCESS",currentProfil:Object(U.a)(t),loadingProfil:!1}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},activeApp:function(e,t){return{type:"APP_ACTIVE",appActive:e,nomApp:t}}})((function(e){var t=e.thunkDetailsProfil,a=e.thunkListProfil,n=e.thunklistApps,c=e.thunkSearchListProfil,s=e.activeApp,i=e.appActive,o=e.listApps,u=e.listProfil,m=e.loading,d=e.aucun;return Object(l.useEffect)((function(){n(),a(i)}),[n,a,i]),r.a.createElement("div",{className:"row white Verticalist "},r.a.createElement("input",{onChange:function(e){c(i,e.target.value)},type:"text",placeholder:"rechercher un profil",className:"col-12 p-2 white bordertrans"}),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row chooseApp text-center"},o.map((function(e,t){var a=e.nomapp,n=e.codeapp;return r.a.createElement("div",{key:t,className:"col-sm m-1 ".concat(i===n&&"active"),onClick:function(){s(n,a)}},r.a.createElement("small",null,a))})))),r.a.createElement("div",{className:"col-12 text-center"},m&&r.a.createElement(be.a,null),d&&r.a.createElement(Ne,{text:"Aucun profil"}),!d&&!m&&r.a.createElement(Ne,{text:"".concat(u.length," profil(s)")})),r.a.createElement("div",{className:"col-12 items ombre",style:{height:"60vh",overflowY:"scroll",scrollbarWidth:"none"}},u.map((function(e,a){var n=e.labelprofil,l=(e.dateprofil,e.auteurprofil,e.idprofil);return r.a.createElement(ve,{icon:"action-verified-user",title:n,key:a,click:function(){return t(l)}})}))))})),Me=Object(c.b)((function(e){var t=e.appReducer;return{appActive:t.appActive,nomApp:t.nomApp}}),{disableModal:f,thunkUpdateListProfil:function(e,t,a){var n=y.get("user",{paht:"/"}),l=n.mailuser,r=n.codeapp;return function(){var n=Object(b.a)(v.a.mark((function n(c){return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:N()({method:"post",url:"/admin/add/".concat(e,"/profil"),baseURL:j.a.url,params:{userMail:l,app:r},data:{labelProfil:t,dateProfil:x()().format("LLLL"),auteurProfil:l,droits:a},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(){c({type:"LIST_PROFIL_LOADING",text:"lister tous les profils",list:[],loading:!0,aucun:!1}),N()({url:"/admin/list/".concat(e,"/profils"),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){0!==e.length?c(w(e)):c(L(e))})).then((function(){c({type:"DISABLE_MODAL",text:"Voir le modal",visible:!1})})).catch((function(e){console.log(e)}))}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.disableModal,a=e.thunkUpdateListProfil,c=e.appActive,s=e.nomApp;x.a.locale("fr");var i=Object(l.useState)(""),o=Object(n.a)(i,2),u=o[0],m=o[1],d=Object(l.useState)(!1),p=Object(n.a)(d,2),f=p[0],E=p[1],h=Object(l.useState)(!1),v=Object(n.a)(h,2),b=v[0],g=v[1],O=Object(l.useState)([]),y=Object(n.a)(O,2),A=y[0],w=y[1],L=Object(l.useState)([]),S=Object(n.a)(L,2),R=S[0],P=S[1],k=Object(l.useState)(null),C=Object(n.a)(k,2),_=C[0],I=C[1],T=Object(l.useState)(null),D=Object(n.a)(T,2),M=D[0],G=D[1];return Object(l.useEffect)((function(){I(!0),N()({url:"/admin/list/".concat(c,"/droits"),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){I(!1),0===e.length?G(!0):w(e)}))}),[c]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"FormAddProfil Modal col-12 d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"col-3 white p-3"},r.a.createElement("small",{className:"text-center"},"Ajouter un nouveau profil - ",s),r.a.createElement("input",{value:u,onChange:function(e){var t=e.target.value;m(t),function(e){e.trim().length&&(E(!0),g(!1),N()({url:"/admin/strictsearch/".concat(c,"/profil/").concat(e),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){E(!1),0===e.length?g(!1):g(!0)})))}(t)},type:"text",className:"col-12 rounded p-1",autoFocus:!0,placeholder:"Entrez le nom du profil"}),r.a.createElement("div",null,r.a.createElement("small",null,R.length," droit(s) selectionn\xe9(s)"),r.a.createElement("div",{className:"row p-3"},r.a.createElement("div",{className:'"col-12 p-3 '.concat(0===A.length&&"d-flex justify-content-center align-items-center"),style:{height:"50vh",overflowY:"scroll",scrollbarWidth:"none"}},_&&r.a.createElement(be.a,null),M?r.a.createElement(Ne,{text:"aucun droit d\xe9tect\xe9 pour ".concat(s)}):A.map((function(e){var t=e.labeldroit,a=e.codedroit;return r.a.createElement(Ue,{selected:R.includes(a),text:t,key:a,click:function(){var e;e=a,R.includes(e)?P(Object(U.a)(R.filter((function(t){return t!==e})))):P([].concat(Object(U.a)(R),[e]))}})})))),r.a.createElement("div",{className:"row pl-2"},r.a.createElement("button",{className:"btn btn-secondary rounded-0",onClick:function(){return t()}},r.a.createElement("small",null,"Annuler")),r.a.createElement("button",{disabled:0===u.trim().length||0===R.length||b,className:"btn btn-info rounded-0",onClick:function(){return E(!0),void a(c,u,R)}},r.a.createElement("small",null,"Valider")),f&&r.a.createElement("div",{className:"d-flex col-sm align-items-center justify-content-center"},r.a.createElement(be.a,null)),b&&r.a.createElement("div",{className:"d-flex col-sm align-items-center justify-content-center text-danger"},r.a.createElement("small",null,"Ce profil existe dej\xe0 dans ",s)))))))})),Ge=Object(c.b)((function(e){var t=e.detailsReducer;return{currentProfil:t.currentProfil,loadingProfil:t.loadingProfil,modal:t.modal}}),{thunkDeleteProfil:function(e){var t=k.get("user",{paht:"/"}),a=t.mailuser,n=t.codeapp;return function(){var t=Object(b.a)(v.a.mark((function t(l){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l({type:"LOADING_PROFIL",loadingProfil:!0}),N()({url:"/admin/delete/".concat(n,"/profil/").concat(e),baseURL:j.a.url,method:"GET",params:{userMail:a,app:n}}).then((function(){l({type:"DELETE_PROFIL",currentProfil:null,loadingProfil:!1}),M.dispatch(S(M.getState().appReducer.appActive)),l(C(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:C})((function(e){var t=e.currentProfil,a=e.loadingProfil,n=e.modal,l=e.setModal,c=e.thunkDeleteProfil;return r.a.createElement("div",{className:"row DetailsProfil"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-2 col-12"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("i",{className:"mdi-action-verified-user mdi-3x text-info"})),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("small",{className:"font-weight-bold"},t[0].labelprofil)," ",r.a.createElement("br",null),r.a.createElement("small",null,"cr\xe9e  par ".concat(t[0].auteurprofil," le ").concat(t[0].dateprofil)))),r.a.createElement("div",{className:"col-12",style:{height:"50vh",overflowY:"scroll",scrollbarWidth:"none"}},r.a.createElement("div",{className:"row p-4"},r.a.createElement("table",{className:"table table-sm table-borderless table-striped col-12"},r.a.createElement("thead",{className:""},r.a.createElement("tr",{className:"row"},r.a.createElement("th",{className:"col-1"},r.a.createElement("small",null,"N\xb0")),r.a.createElement("th",{className:"col-2"},r.a.createElement("small",null,"code")),r.a.createElement("th",{className:"col-9"},r.a.createElement("small",null,"droit")))),r.a.createElement("tbody",null,t.map((function(e,t){var a=e.labeldroit,n=e.codedroit;return r.a.createElement("tr",{className:"row",key:t},r.a.createElement("td",{className:"col-1"},r.a.createElement("small",null,t)),r.a.createElement("td",{className:"col-2"},r.a.createElement("small",null,n)),r.a.createElement("td",{className:"col-9"},r.a.createElement("small",null,a)))}))))))):r.a.createElement("div",{className:"d-flex align-items-center justify-content-center grey-text lighten-3 col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("i",{className:"mdi-editor-format-align-left mdi-3x col-12 text-center"}),r.a.createElement("small",{className:"text-center col-12"},"Aucun profil selectionn\xe9"))),a&&r.a.createElement("div",{className:"d-flex align-items-center justify-content-center col-12"},r.a.createElement(be.a,null)),t&&!a&&r.a.createElement("div",{className:"d-flex align-items-center justify-content-center col-12 text-info"},r.a.createElement("small",{onClick:function(){return l(!0)},style:{cursor:"pointer"}},"Supprimer ce profil")),n&&r.a.createElement(Ae,{text:"la suppression de ce profil est dangereuse. Si des utilisateurs sont enregistr\xe9s avec ce profil, ils ne pourront plus se connecter apres cette suppression. Voulez vous continuer ?",close:function(){return l(!1)},titre:"Information",confirm:function(){return c(t[0].idprofil)}}))})),qe=Object(c.b)((function(e){return{listProfil:e.listReducer.listProfil,listApps:e.appReducer.listApps}}))((function(e){var t=e.listApps,a=e.listProfil,c=Object(l.useState)(0),s=Object(n.a)(c,2),i=s[0],o=s[1];return Object(l.useEffect)((function(){N()({url:"/admin/list/profils",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){o(e.length)}))}),[a.length]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:i,theme:"bg-info text-white rounded",titre:"Profil(s)",details:"L'ensemble de tous les profils de connexion cr\xe9\xe9s dans tous les modules."})),r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:t.length,theme:"white warning-text ombre rounded",titre:"App(s)",details:"Les appliations sont des modules compl\xe8tement ind\xe9pendants les uns des autres : GAP, DPI, PUI."})))})),Ve=Object(c.b)((function(e){return{modalVisible:e.modalReducer.visible,appActive:e.appReducer.appActive}}),{enableModal:function(){return{type:"ENABLE_MODAL",text:"Voir le modal",visible:!0}}})((function(e){var t=e.sendTitle,a=e.modalVisible,n=e.enableModal,c=e.appActive;return Object(l.useEffect)((function(){t("Profils")})),r.a.createElement("div",{className:"Profils row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("section",{id:"profil_list",className:"col-3 d-flex flex-column"},r.a.createElement(De,null),r.a.createElement("div",{className:"row"},r.a.createElement("button",{className:"btn white text-info rounded-0 col-12",onClick:function(){return n()},title:c?"ajouter un profil":"Veuillez choisir d'abord un module",disabled:null===c},r.a.createElement("small",null,"Ajouter un nouveau profil")))),r.a.createElement("section",{className:"col-3 d-flex flex-column ml-3"},r.a.createElement(qe,null)),r.a.createElement("section",{id:"profil_details",className:"col-4"},r.a.createElement(Ge,null)))),a&&r.a.createElement(Me,null))})),Fe=Object(c.b)((function(e){var t=e.appReducer;return{listApps:t.listApps,currentApp:t.currentApp}}),{thunkSetListApps:function(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N()({url:"/admin/list/apps/",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){t(q(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setActiveApp:function(e){return{type:"SET_APP_ACTIVE",currentApp:e}}})((function(e){var t=e.listApps,a=e.currentApp,c=e.setActiveApp,s=e.thunkSetListApps,i=Object(l.useState)([]),o=Object(n.a)(i,2),u=o[0],m=o[1];return Object(l.useEffect)((function(){N()({url:"/admin/listall/logs",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){m(e)}))}),[]),Object(l.useEffect)((function(){s()}),[s]),r.a.createElement("div",{className:"row"},0===t.length?r.a.createElement(be.a,null):t.map((function(e,t){var n=e.nomapp,l=e.codeapp;return r.a.createElement("div",{key:t,className:"col-12 d-flex rounded p-2 logListApps"},r.a.createElement("small",{onClick:function(){c(l)},className:"font-weight-bold  ".concat(a===l?"text-info":"grey-text")},n," (",u.filter((function(e){return e.codeapp===l})).length,")"))})))})),Ye=Object(c.b)((function(e){return{currentApp:e.appReducer.currentApp,typeLogs:e.listLogsReducer.typeLogs}}))((function(e){e.currentApp;var t=e.typeLogs,a=Object(l.useState)(0),c=Object(n.a)(a,2),s=c[0],i=c[1],o=Object(l.useState)(0),u=Object(n.a)(o,2),m=u[0],d=u[1];return Object(l.useEffect)((function(){N()({url:"/admin/listall/logs",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){i(e.length)})),N()({url:"/admin/list/logs/users",baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){d(e.length)}))}),[t]),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:s,theme:"bg-info rounded text-white",titre:"Log(s)",details:"Tous les logs g\xe9n\xe9r\xe9s par les utilisateurs du syst\xe8me dans tous les modules."})),r.a.createElement("div",{className:"col-12"},r.a.createElement(Ce,{nombre:m,theme:"white ombre rounded",titre:"User(s)",details:"Le nombre d'utilisateur ayant g\xe9n\xe9r\xe9s des logs jusqu'\xe0 aujoud'hui."})))})),ze=[{type:"CONNEXION",nom:"Connexion"},{type:"CREATION",nom:"Creation"},{type:"SUPPRESSION",nom:"Suppression"},{type:"MODIFICATION",nom:"Modification"}],Be=Object(c.b)((function(e){var t=e.listLogsReducer;return{typeLogs:t.typeLogs,loading:t.loading,listLogs:t.listLogs,currentApp:e.appReducer.currentApp}}),{setTypeLogs:function(e){return{type:"SET_TYPE_LOGS",typeLog:e}},thunkSetListList:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"LOADING",loading:!0}),N()({url:"/admin/list/".concat(e,"/logs/").concat(t),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){n(Y(e))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.setTypeLogs,a=e.typeLogs,c=e.thunkSetListList,s=e.loading,i=e.listLogs,o=e.currentApp,u=Object(l.useState)([]),m=Object(n.a)(u,2),d=m[0],p=m[1];return Object(l.useEffect)((function(){N()({url:"/admin/list/".concat(o,"/logs"),baseURL:j.a.url,method:"GET"}).then((function(e){return e.data.rows})).then((function(e){p(e)}))}),[o]),Object(l.useEffect)((function(){c(o,a)}),[c,o,a]),r.a.createElement("div",{className:"row white Verticalist"},r.a.createElement("div",{className:"col-12 ombre border-top"},r.a.createElement("div",{className:"row chooseApp text-center"},ze.map((function(e,n){var l=e.type,c=e.nom;return r.a.createElement("div",{key:n,className:"col-sm m-1 ".concat(a===l&&"active"),onClick:function(){t(l)}},r.a.createElement("small",null,c," (",d.filter((function(e){return e.typelog===l})).length,")"))}))),r.a.createElement("div",{className:"col-12 text-center"},s?r.a.createElement(be.a,null):0===i.length?r.a.createElement(Ne,{text:"Aucun log"}):r.a.createElement(Ne,{text:"".concat(i.length," log(s)")})),r.a.createElement("div",{className:"row p-2 bg-light"},r.a.createElement("small",{className:"col-2"},"date"),r.a.createElement("small",{className:"col-2"},"heure"),r.a.createElement("small",{className:"col-4"},"Utilisateur"),r.a.createElement("small",{className:"col-4"},"Action")),r.a.createElement("div",{style:{overflowY:"scroll",height:"70vh",scrollbarWidth:"none"},className:"row"},r.a.createElement("div",{className:"col-12"},i.map((function(e,t){var a=e.datelog,n=e.auteurlog,l=e.actionlog,c=e.heurelog;return r.a.createElement("div",{key:t,className:"row p-2 border-bottom border-light"},r.a.createElement("small",{className:"col-2"},a),r.a.createElement("small",{className:"col-2"},c),r.a.createElement("small",{className:"col-4"},n),r.a.createElement("small",{className:"col-4"},l))}))))))})),We=[{title:"Accueil",desc:"dashboard general de l'admin",path:"/admin",Component:Ee},{title:"User",desc:"dashboard general de l'admin",path:"/admin/users",Component:Ie,store:oe},{title:"Services",desc:"dashboard general de l'admin",path:"/admin/services",Component:Te},{title:"Profils",desc:"dashboard general de l'admin",path:"/admin/profils",Component:Ve,store:M},{title:"Logs",desc:"dashboard general de l'admin",path:"/admin/logs",Component:function(e){var t=e.sendTitle;return Object(l.useEffect)((function(){t("Logs")})),r.a.createElement("div",{className:"Logs row p-3 d-flex justify-content-center"},r.a.createElement("section",{className:"col-1",id:"listapps"},r.a.createElement(Fe,null)),r.a.createElement("section",{className:"col-3",id:"statslogs"},r.a.createElement(Ye,null)),r.a.createElement("section",{className:"col-7 ml-2"},r.a.createElement(Be,null)))},store:W}],He=function(e){var t=e.user,a=t.nomuser,n=t.posteuser,l=t.prenomsuser,c=t.labelprofil;return r.a.createElement("div",{className:"row p-4 text-light"},r.a.createElement("div",{className:"col-12 text-center "},r.a.createElement("i",{className:"mdi-social-person mdi-5x"})),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("h6",null,a+" "+l),r.a.createElement("small",null,n+"  -  "+c)))};He.prototype={user:de.a.object.isRequired};var Je=function(e){var t=e.icon,a=e.text,n=e.links,l=e.active,c=e.actif,s=e.deplied,i=e.deply;return r.a.createElement("div",{className:"row Navitem"},r.a.createElement("div",{className:"col-12 pl-4"},r.a.createElement("div",{className:"row text-light head p-2 ".concat(c&&"actifItem"),onClick:function(){return i()}},r.a.createElement("div",{className:"col-9"},"  ",r.a.createElement("span",{className:"d-flex align-items-center font-weight-normal"},r.a.createElement("i",{className:"mdi-".concat(t," mr-3 ")})," ",a," ")),r.a.createElement("div",{className:"col-3 text-center"},s?r.a.createElement("i",{className:"mdi-navigation-expand-more"}):r.a.createElement("i",{className:"mdi-navigation-chevron-right"}))),s&&r.a.createElement("ul",{itemType:"",className:"text-light"},n.map((function(e,t){var a=e.label,n=e.path;return r.a.createElement(ue.c,{key:t,exact:!0,activeClassName:"actifLink",to:n},r.a.createElement("li",{onClick:function(){return l()},className:"",key:t},r.a.createElement("small",{className:""},a)))})))))};Je.prototype={icon:de.a.string.isRequired,text:de.a.string.isRequired,links:de.a.array};var Xe=function(e){var t=e.children;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},t))},Ke=function(e){var t=e.user,a=e.fonctions,c=Object(l.useState)(0),s=Object(n.a)(c,2),i=s[0],o=s[1],u=Object(l.useState)(0),m=Object(n.a)(u,2),d=m[0],p=m[1];return r.a.createElement("div",{className:"row page Navbar"},r.a.createElement("div",{className:"col-12"},r.a.createElement(He,{user:t}),a&&r.a.createElement(Xe,null,a.map((function(e,t){var a=e.title,n=e.icon,l=e.links;return r.a.createElement(Je,{actif:i===t,deplied:d===t,key:t,icon:n,text:a,links:l,deply:function(){return function(e){p(d===e?null:e)}(t)},active:function(){return function(e){o(e)}(t)}})})))))};Ke.prototype={user:de.a.object.isRequired,functions:de.a.array.isRequired};var Qe=Ke,Ze=a(158);t.default=function(){var e=new s.a,t=Object(l.useState)("Accueil"),a=Object(n.a)(t,2),u=a[0],m=a[1],d=Object(l.useState)(!1),p=Object(n.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"col-12 page bg-light",id:"admin"},r.a.createElement("div",{className:"row"},r.a.createElement("section",{className:"col-2",id:"navbar"},r.a.createElement(Qe,{user:e.get("user",{path:"/"}),fonctions:o})),r.a.createElement("section",{className:"col-10",id:"principal",style:{height:"100vh",overflowY:"scroll",overflowX:"hidden"}},r.a.createElement("section",{className:"row",id:"Topbar"},r.a.createElement(Ze.a,{title:u,toggleFullscreen:function(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),E(!1)):(document.documentElement.requestFullscreen(),E(!0))},fullscreen:f})),r.a.createElement("section",{className:"bg-light"},We.map((function(e,t){var a=e.path,n=e.Component,l=e.store;return r.a.createElement(i.b,{exact:!0,key:t,path:a},l?r.a.createElement(c.a,{store:l},r.a.createElement(n,{sendTitle:function(e){m(e)}})):r.a.createElement(n,{sendTitle:function(e){m(e)}}))}))))))}}}]);